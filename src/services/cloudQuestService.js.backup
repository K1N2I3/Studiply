import { 
  collection, 
  doc, 
  getDoc, 
  getDocs, 
  setDoc, 
  updateDoc, 
  deleteDoc, 
  query, 
  where, 
  orderBy,
  serverTimestamp 
} from 'firebase/firestore';
import { db } from '../firebase/config';

// ‰∫ëÁ´ØÂ≠òÂÇ®ÁöÑquestÊï∞ÊçÆÁªìÊûÑ
const CLOUD_QUEST_COLLECTION = 'quests';

// ‰ªé‰∫ëÁ´ØËé∑ÂèñÊâÄÊúâquestÊï∞ÊçÆ
export const getCloudQuestData = async () => {
  try {
    const questsRef = collection(db, CLOUD_QUEST_COLLECTION);
    const snapshot = await getDocs(questsRef);
    
    const questData = {};
    snapshot.forEach((doc) => {
      const data = doc.data();
      const { subject, category, questId } = data;
      
      if (!questData[subject]) {
        questData[subject] = {};
      }
      if (!questData[subject][category]) {
        questData[subject][category] = {};
      }
      
      questData[subject][category][questId] = data;
    });
    
    return questData;
  } catch (error) {
    console.error('Error fetching cloud quest data:', error);
    return {};
  }
};

// Ëé∑ÂèñÁâπÂÆöquest
export const getCloudQuest = async (subject, category, questId) => {
  try {
    const questRef = doc(db, CLOUD_QUEST_COLLECTION, `${subject}_${category}_${questId}`);
    const questSnap = await getDoc(questRef);
    
    if (questSnap.exists()) {
      return questSnap.data();
    } else {
      console.log('No such quest document!');
      return null;
    }
  } catch (error) {
    console.error('Error fetching quest:', error);
    return null;
  }
};

// ‰øùÂ≠òquestÂà∞‰∫ëÁ´Ø
export const saveCloudQuest = async (subject, category, questId, questData) => {
  try {
    const questRef = doc(db, CLOUD_QUEST_COLLECTION, `${subject}_${category}_${questId}`);
    await setDoc(questRef, {
      ...questData,
      subject,
      category,
      questId,
      updatedAt: serverTimestamp()
    });
    console.log('Quest saved to cloud successfully');
  } catch (error) {
    console.error('Error saving quest to cloud:', error);
  }
};

// ÊâπÈáè‰øùÂ≠òquests
export const saveCloudQuests = async (questsData) => {
  try {
    const promises = [];
    
    for (const [subject, categories] of Object.entries(questsData)) {
      for (const [category, quests] of Object.entries(categories)) {
        for (const [questId, questData] of Object.entries(quests)) {
          const questRef = doc(db, CLOUD_QUEST_COLLECTION, `${subject}_${category}_${questId}`);
          promises.push(setDoc(questRef, {
            ...questData,
            subject,
            category,
            questId,
            updatedAt: serverTimestamp()
          }));
        }
      }
    }
    
    await Promise.all(promises);
    console.log('All quests saved to cloud successfully');
  } catch (error) {
    console.error('Error saving quests to cloud:', error);
  }
};

// Êâ©Â±ïÁöÑÊú¨Âú∞fallbackÊï∞ÊçÆ - ‰ªéÂÖ•Èó®Âà∞Á≤æÈÄöÁöÑÂ≠¶‰π†Ë∑ØÂæÑ
const FALLBACK_QUESTS = {
  // ==================== ÊÑèÂ§ßÂà©ËØ≠Â≠¶‰π†Ë∑ØÂæÑ ====================
  italian: {
    grammar: {
      'quest-1': {
        id: 'quest-1',
        title: 'Italian Alphabet & Pronunciation',
        description: 'Learn the Italian alphabet and basic pronunciation rules',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 80,
        goldReward: 40,
        icon: 'üáÆüáπ',
        timeEstimate: '25 min',
        skills: ['language-learning', 'pronunciation'],
        requirements: [],
        deliverables: [
          {
            type: 'pronunciation-exercises',
            description: 'Practice Italian alphabet pronunciation',
            format: 'audio'
          }
        ],
        resources: ['Italian alphabet guide', 'Audio pronunciation', 'Practice exercises'],
        learningMaterial: {
          title: "Italian Alphabet & Pronunciation Basics",
          content: `
# Italian Alphabet & Pronunciation Guide

## Italian Alphabet
Italian uses 21 letters, excluding J, K, W, X, Y (which are only used in foreign words).

### Basic Letters
A, B, C, D, E, F, G, H, I, L, M, N, O, P, Q, R, S, T, U, V, Z

### Pronunciation Rules
1. **Vowel Sounds**:
   - A: like "father" in English
   - E: like "bed" in English  
   - I: like "machine" in English
   - O: like "more" in English
   - U: like "rule" in English

2. **Consonant Sounds**:
   - C: [k] sound before a, o, u; [ch] sound before e, i
   - G: [g] sound before a, o, u; [j] sound before e, i
   - H: silent, but affects C and G pronunciation

### Common Greetings
- **Ciao** [chao] - Hello/Goodbye (informal)
- **Buongiorno** [bwon-jor-no] - Good morning
- **Buonasera** [bwona-se-ra] - Good evening
- **Salve** [sal-ve] - Hello (formal)

## Key Learning Points
1. Italian is a phonetic language - each letter has a fixed sound
2. Stress usually falls on the second-to-last syllable
3. Double consonants require extended pronunciation time
          `,
          readingTime: "5-8 minutes",
          keyPoints: [
            "Italian has 21 letters",
            "Vowel sounds are clear and distinct",
            "C and G pronunciation rules",
            "Common greeting usage contexts"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Learn the Italian Alphabet',
            type: 'multiple-choice',
            question: 'How many letters are in the Italian alphabet?',
            options: ['21', '26', '25', '24'],
            correctAnswer: 0,
            explanation: 'The Italian alphabet has 21 letters, excluding J, K, W, X, and Y which are only used in foreign words.'
          },
          {
            id: 'step-2',
            title: 'Practice Pronunciation',
            type: 'text-input',
            question: 'Write the Italian word for "hello" using the Italian alphabet.',
            placeholder: 'Type the Italian word for hello...',
            correctAnswers: ['ciao', 'buongiorno', 'salve'],
            explanation: 'Common Italian greetings include "ciao" (informal), "buongiorno" (good morning), and "salve" (formal hello).'
          },
          {
            id: 'step-3',
            title: 'Vowel Sounds',
            type: 'multiple-choice',
            question: 'How do you pronounce the Italian letter "E"?',
            options: ['Like "bed" in English', 'Like "machine" in English', 'Like "more" in English', 'Like "rule" in English'],
            correctAnswer: 0,
            explanation: 'The Italian "E" is pronounced like the "e" in "bed" in English.'
          },
          {
            id: 'step-4',
            title: 'Consonant Rules',
            type: 'multiple-choice',
            question: 'How is the letter "C" pronounced before "E" and "I"?',
            options: ['[k] sound', '[ch] sound', '[s] sound', '[g] sound'],
            correctAnswer: 1,
            explanation: 'Before "E" and "I", the letter "C" is pronounced as [ch] sound, like in "ciao".'
          },
          {
            id: 'step-5',
            title: 'Double Consonants',
            type: 'multiple-choice',
            question: 'What is special about double consonants in Italian?',
            options: ['They are silent', 'They require extended pronunciation', 'They change the vowel sound', 'They are optional'],
            correctAnswer: 1,
            explanation: 'Double consonants in Italian require extended pronunciation time, making them distinct from single consonants.'
          }
        ]
      }
    }
  },
  mathematics: {
    algebra: {
      'quest-1': {
        id: 'quest-1',
        title: 'Linear Equations',
        description: 'Learn to solve linear equations with one variable',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üìê',
        timeEstimate: '30 min',
        skills: ['mathematical-thinking', 'problem-solving'],
        requirements: [],
        deliverables: [
          {
            type: 'equation-solving',
            description: 'Solve 10 linear equations',
            format: 'text'
          }
        ],
        resources: ['Algebra textbook', 'Practice problems', 'Video tutorials'],
        learningMaterial: {
          title: "Linear Equations Fundamentals",
          content: `
# Introduction to Linear Equations

## What are Linear Equations?
Linear equations are equations where the highest power is 1, typically in the form: ax + b = 0

## Basic Concepts

### 1. Equation Definition
- **Equation**: An equality containing unknown variables
- **Solution**: The value of the unknown that makes the equation true
- **Root**: The solution of the equation

### 2. Standard Form of Linear Equations
ax + b = 0 (a ‚â† 0)

### 3. Steps to Solve Linear Equations
1. **Transpose**: Move terms with unknowns to one side, constants to the other
2. **Combine like terms**: Simplify the equation
3. **Divide by coefficient**: Divide both sides by the coefficient of the unknown

## Worked Examples

### Example 1: 2x + 3 = 7
**Step 1**: Transpose
2x = 7 - 3
2x = 4

**Step 2**: Divide by coefficient
x = 4 √∑ 2
x = 2

### Example 2: 3x - 5 = 10
**Step 1**: Transpose
3x = 10 + 5
3x = 15

**Step 2**: Divide by coefficient
x = 15 √∑ 3
x = 5

## Checking Your Answer
Substitute the solution back into the original equation to verify.

## Common Mistakes
1. Forgetting to change signs when transposing
2. Calculation errors when dividing by coefficient
3. Forgetting to check the answer
          `,
          readingTime: "6-10 minutes",
          keyPoints: [
            "Standard form of linear equations",
            "Basic steps to solve equations",
            "Transposing and combining like terms",
            "Importance of checking answers"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Basic Concepts',
            type: 'multiple-choice',
            question: 'What is the solution to 2x + 3 = 7?',
            options: ['x = 2', 'x = 4', 'x = 5', 'x = 1'],
            correctAnswer: 0,
            explanation: 'Subtract 3 from both sides: 2x = 4, then divide by 2: x = 2'
          },
          {
            id: 'step-2',
            title: 'Practice',
            type: 'text-input',
            question: 'Solve: 3x - 5 = 10',
            placeholder: 'Enter your answer...',
            correctAnswers: ['x = 5', '5'],
            explanation: 'Add 5 to both sides: 3x = 15, then divide by 3: x = 5'
          },
          {
            id: 'step-3',
            title: 'Negative Coefficients',
            type: 'multiple-choice',
            question: 'What is the solution to -2x + 4 = 8?',
            options: ['x = 2', 'x = -2', 'x = 6', 'x = -6'],
            correctAnswer: 1,
            explanation: 'Subtract 4 from both sides: -2x = 4, then divide by -2: x = -2'
          },
          {
            id: 'step-4',
            title: 'Fractions in Equations',
            type: 'multiple-choice',
            question: 'What is the solution to (1/2)x + 3 = 7?',
            options: ['x = 8', 'x = 4', 'x = 2', 'x = 6'],
            correctAnswer: 0,
            explanation: 'Subtract 3 from both sides: (1/2)x = 4, then multiply by 2: x = 8'
          },
          {
            id: 'step-5',
            title: 'Word Problems',
            type: 'multiple-choice',
            question: 'If a number plus 5 equals 12, what is the number?',
            options: ['7', '17', '2.4', '60'],
            correctAnswer: 0,
            explanation: 'Let x be the number. Then x + 5 = 12, so x = 12 - 5 = 7'
          }
        ]
      }
    }
  },
  physics: {
    mechanics: {
      'quest-1': {
        id: 'quest-1',
        title: 'Newton\'s Laws of Motion',
        description: 'Understand the fundamental laws governing motion',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 120,
        goldReward: 60,
        icon: '‚öõÔ∏è',
        timeEstimate: '35 min',
        skills: ['scientific-thinking', 'analytical-reasoning'],
        requirements: [],
        deliverables: [
          {
            type: 'physics-problems',
            description: 'Solve motion problems using Newton\'s laws',
            format: 'text'
          }
        ],
        resources: ['Physics textbook', 'Interactive simulations', 'Problem sets'],
        learningMaterial: {
          title: "Newton's Laws of Motion",
          content: `
# Newton's Laws of Motion

## Introduction
Newton's three laws of motion form the foundation of classical mechanics and describe the relationship between forces and motion.

## Newton's First Law (Law of Inertia)
An object at rest stays at rest, and an object in motion stays in motion, unless acted upon by an external force.

### Key Concepts:
- **Inertia**: The tendency of objects to resist changes in motion
- **Equilibrium**: When forces are balanced, there is no acceleration
- **Examples**: A book on a table, a car coasting on a flat road

## Newton's Second Law
Force equals mass times acceleration (F = ma)

### Key Concepts:
- **Force**: A push or pull that causes acceleration
- **Mass**: The amount of matter in an object
- **Acceleration**: The rate of change of velocity
- **Examples**: Pushing a shopping cart, throwing a ball

## Newton's Third Law (Action-Reaction)
For every action, there is an equal and opposite reaction.

### Key Concepts:
- **Action-Reaction Pairs**: Forces always come in pairs
- **Equal Magnitude**: Forces are equal in strength
- **Opposite Direction**: Forces act in opposite directions
- **Examples**: Walking, rocket propulsion, swimming

## Applications

### Everyday Examples
- Walking: Your foot pushes backward, ground pushes you forward
- Driving: Engine pushes car forward, friction opposes motion
- Swimming: Arms push water backward, water pushes you forward

### Engineering Applications
- Rocket design and propulsion
- Vehicle safety systems
- Sports equipment design
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "First Law: Objects resist changes in motion",
            "Second Law: F = ma relationship",
            "Third Law: Action-reaction pairs",
            "Real-world applications of Newton's laws"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'First Law',
            type: 'multiple-choice',
            question: 'What does Newton\'s First Law state?',
            options: [
              'F = ma',
              'An object at rest stays at rest',
              'For every action there is an equal reaction',
              'Energy is conserved'
            ],
            correctAnswer: 1,
            explanation: 'Newton\'s First Law states that an object at rest stays at rest, and an object in motion stays in motion, unless acted upon by an external force.'
          },
          {
            id: 'step-2',
            title: 'Second Law',
            type: 'multiple-choice',
            question: 'What is the formula for Newton\'s Second Law?',
            options: ['F = ma', 'E = mc¬≤', 'v = d/t', 'P = mv'],
            correctAnswer: 0,
            explanation: 'Newton\'s Second Law states that Force equals mass times acceleration (F = ma).'
          },
          {
            id: 'step-3',
            title: 'Third Law',
            type: 'multiple-choice',
            question: 'What does Newton\'s Third Law state?',
            options: [
              'F = ma',
              'An object at rest stays at rest',
              'For every action there is an equal and opposite reaction',
              'Energy is conserved'
            ],
            correctAnswer: 2,
            explanation: 'Newton\'s Third Law states that for every action, there is an equal and opposite reaction.'
          },
          {
            id: 'step-4',
            title: 'Force Applications',
            type: 'multiple-choice',
            question: 'When you walk, what force pushes you forward?',
            options: [
              'Your foot pushing backward',
              'The ground pushing you forward',
              'Gravity pulling you down',
              'Air resistance'
            ],
            correctAnswer: 1,
            explanation: 'The ground pushes you forward (reaction force) when your foot pushes backward (action force).'
          },
          {
            id: 'step-5',
            title: 'Mass vs Weight',
            type: 'multiple-choice',
            question: 'What is the difference between mass and weight?',
            options: [
              'They are the same thing',
              'Mass is matter, weight is force',
              'Weight is matter, mass is force',
              'No difference'
            ],
            correctAnswer: 1,
            explanation: 'Mass is the amount of matter in an object, while weight is the force of gravity acting on that mass.'
          }
        ]
      }
    }
  },
  chemistry: {
    organic: {
      'quest-1': {
        id: 'quest-1',
        title: 'Organic Compounds',
        description: 'Learn about carbon-based molecules and their properties',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 110,
        goldReward: 55,
        icon: 'üß™',
        timeEstimate: '40 min',
        skills: ['chemical-thinking', 'molecular-understanding'],
        requirements: [],
        deliverables: [
          {
            type: 'molecular-structures',
            description: 'Draw and identify organic compounds',
            format: 'diagram'
          }
        ],
        resources: ['Chemistry textbook', 'Molecular models', 'Interactive tools'],
        learningMaterial: {
          title: "Organic Compounds Fundamentals",
          content: `
# Introduction to Organic Compounds

## What are Organic Compounds?
Organic compounds are carbon-based molecules that form the basis of all living things and many synthetic materials.

## Carbon Chemistry

### Why Carbon is Special
- **Four valence electrons**: Can form 4 covalent bonds
- **Versatile bonding**: Single, double, and triple bonds
- **Chain formation**: Can form long chains and rings
- **Diversity**: Millions of possible compounds

### Types of Carbon Bonds
- **Single bonds**: C-C (alkanes)
- **Double bonds**: C=C (alkenes)
- **Triple bonds**: C‚â°C (alkynes)
- **Aromatic bonds**: Benzene rings

## Functional Groups

### Hydrocarbons
- **Alkanes**: Single bonds only (methane, ethane)
- **Alkenes**: Double bonds (ethene, propene)
- **Alkynes**: Triple bonds (ethyne, propyne)

### Oxygen-Containing Groups
- **Alcohols**: -OH group (methanol, ethanol)
- **Aldehydes**: -CHO group (formaldehyde, acetaldehyde)
- **Ketones**: -CO- group (acetone)
- **Carboxylic acids**: -COOH group (acetic acid)

### Nitrogen-Containing Groups
- **Amines**: -NH2 group (methylamine)
- **Amides**: -CONH2 group (acetamide)

## Importance of Organic Compounds

### Biological Significance
- **Proteins**: Made of amino acids
- **Carbohydrates**: Sugars and starches
- **Lipids**: Fats and oils
- **Nucleic acids**: DNA and RNA

### Industrial Applications
- **Pharmaceuticals**: Medicine development
- **Plastics**: Polymer chemistry
- **Fuels**: Petroleum products
- **Materials**: Synthetic fibers
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Carbon can form 4 covalent bonds",
            "Functional groups determine properties",
            "Organic compounds are essential for life",
            "Industrial applications of organic chemistry"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Carbon Chemistry',
            type: 'multiple-choice',
            question: 'How many bonds can carbon form?',
            options: ['2', '3', '4', '6'],
            correctAnswer: 2,
            explanation: 'Carbon can form 4 covalent bonds, allowing it to create complex organic molecules.'
          },
          {
            id: 'step-2',
            title: 'Functional Groups',
            type: 'multiple-choice',
            question: 'What functional group is -OH?',
            options: ['Aldehyde', 'Ketone', 'Alcohol', 'Ether'],
            correctAnswer: 2,
            explanation: 'The -OH group is characteristic of alcohols.'
          },
          {
            id: 'step-3',
            title: 'Hydrocarbons',
            type: 'multiple-choice',
            question: 'What is the simplest hydrocarbon?',
            options: ['Ethane', 'Methane', 'Propane', 'Butane'],
            correctAnswer: 1,
            explanation: 'Methane (CH‚ÇÑ) is the simplest hydrocarbon with one carbon atom.'
          },
          {
            id: 'step-4',
            title: 'Isomers',
            type: 'multiple-choice',
            question: 'What are isomers?',
            options: [
              'Same molecular formula, different structure',
              'Different molecular formula, same structure',
              'Same atoms, different elements',
              'Different atoms, same elements'
            ],
            correctAnswer: 0,
            explanation: 'Isomers are compounds with the same molecular formula but different structural arrangements.'
          },
          {
            id: 'step-5',
            title: 'Organic Reactions',
            type: 'multiple-choice',
            question: 'What type of reaction is combustion?',
            options: [
              'Addition reaction',
              'Substitution reaction',
              'Oxidation reaction',
              'Reduction reaction'
            ],
            correctAnswer: 2,
            explanation: 'Combustion is an oxidation reaction where organic compounds react with oxygen to produce CO‚ÇÇ and H‚ÇÇO.'
          }
        ]
      }
    }
  },
  history: {
    ancient: {
      'quest-1': {
        id: 'quest-1',
        title: 'Ancient Civilizations',
        description: 'Explore the great civilizations of the ancient world',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 90,
        goldReward: 45,
        icon: 'üìú',
        timeEstimate: '30 min',
        skills: ['historical-thinking', 'cultural-understanding'],
        requirements: [],
        deliverables: [
          {
            type: 'timeline-creation',
            description: 'Create a timeline of ancient civilizations',
            format: 'text'
          }
        ],
        resources: ['History textbook', 'Maps', 'Archaeological evidence'],
        learningMaterial: {
          title: "Ancient Civilizations Overview",
          content: `
# Ancient Civilizations: Foundations of Human Society

## What are Ancient Civilizations?
Ancient civilizations were the first complex societies that developed writing, government, and advanced technologies.

## Key Ancient Civilizations

### Mesopotamia (3500-500 BCE)
- **Location**: Between Tigris and Euphrates rivers (modern Iraq)
- **Achievements**: First writing system (cuneiform), wheel, irrigation
- **Government**: City-states with kings
- **Culture**: Ziggurats, Epic of Gilgamesh

### Ancient Egypt (3100-30 BCE)
- **Location**: Nile River valley
- **Achievements**: Pyramids, hieroglyphics, calendar, medicine
- **Government**: Pharaohs as divine rulers
- **Culture**: Mummification, Book of the Dead

### Ancient Greece (800-146 BCE)
- **Location**: Greek peninsula and islands
- **Achievements**: Democracy, philosophy, theater, Olympics
- **Government**: City-states (Athens, Sparta)
- **Culture**: Mythology, art, architecture

### Ancient Rome (753 BCE-476 CE)
- **Location**: Italian peninsula, expanded across Mediterranean
- **Achievements**: Law, engineering, roads, aqueducts
- **Government**: Republic, then Empire
- **Culture**: Latin language, gladiators, Christianity

## Common Features of Ancient Civilizations

### Social Structure
- **Rulers**: Kings, pharaohs, emperors
- **Priests**: Religious leaders
- **Merchants**: Traders and craftspeople
- **Farmers**: Agricultural workers
- **Slaves**: Forced labor

### Technological Advances
- **Writing**: Record keeping and communication
- **Metallurgy**: Bronze and iron working
- **Architecture**: Monumental buildings
- **Mathematics**: Number systems and calculations
- **Astronomy**: Calendar systems

### Cultural Achievements
- **Art**: Sculpture, painting, pottery
- **Literature**: Epic poems, plays, histories
- **Religion**: Polytheistic belief systems
- **Philosophy**: Questions about life and existence
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Four major ancient civilizations",
            "Common features of early societies",
            "Technological and cultural achievements",
            "Social structure and government systems"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Ancient Egypt',
            type: 'multiple-choice',
            question: 'Which civilization built the pyramids?',
            options: ['Ancient Greeks', 'Ancient Egyptians', 'Ancient Romans', 'Ancient Chinese'],
            correctAnswer: 1,
            explanation: 'The Ancient Egyptians built the pyramids as tombs for pharaohs.'
          },
          {
            id: 'step-2',
            title: 'Mesopotamia',
            type: 'multiple-choice',
            question: 'Where was the first writing system developed?',
            options: ['Egypt', 'Greece', 'Mesopotamia', 'China'],
            correctAnswer: 2,
            explanation: 'Cuneiform, the first known writing system, was developed in ancient Mesopotamia.'
          },
          {
            id: 'step-3',
            title: 'Ancient Greece',
            type: 'multiple-choice',
            question: 'What form of government was developed in ancient Athens?',
            options: ['Monarchy', 'Democracy', 'Dictatorship', 'Theocracy'],
            correctAnswer: 1,
            explanation: 'Ancient Athens developed democracy, where citizens could participate in government decisions.'
          },
          {
            id: 'step-4',
            title: 'Ancient Rome',
            type: 'multiple-choice',
            question: 'What was the Roman Empire known for?',
            options: [
              'Building pyramids',
              'Creating the first democracy',
              'Extensive road networks and law',
              'Inventing the wheel'
            ],
            correctAnswer: 2,
            explanation: 'The Roman Empire was known for its extensive road networks, legal system, and engineering achievements.'
          },
          {
            id: 'step-5',
            title: 'Cultural Achievements',
            type: 'multiple-choice',
            question: 'What was a common feature of ancient civilizations?',
            options: [
              'They all spoke the same language',
              'They all had writing systems and monumental architecture',
              'They all lived in the same climate',
              'They all used the same currency'
            ],
            correctAnswer: 1,
            explanation: 'Ancient civilizations commonly developed writing systems and built monumental architecture as expressions of their power and culture.'
          }
        ]
      }
    }
  },
  computerScience: {
    programming: {
      'quest-1': {
        id: 'quest-1',
        title: 'Introduction to Programming',
        description: 'Learn the basics of computer programming',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 130,
        goldReward: 65,
        icon: 'üíª',
        timeEstimate: '45 min',
        skills: ['logical-thinking', 'problem-solving'],
        requirements: [],
        deliverables: [
          {
            type: 'code-exercises',
            description: 'Write your first programs',
            format: 'code'
          }
        ],
        resources: ['Programming tutorial', 'Code editor', 'Practice exercises'],
        learningMaterial: {
          title: "Introduction to Programming",
          content: `
# Programming Fundamentals

## What is Programming?
Programming is the process of creating instructions for computers to follow. It involves writing code that tells a computer what to do.

## Basic Programming Concepts

### Variables
- **Definition**: Storage locations that hold data
- **Types**: Numbers, text, true/false values
- **Examples**: age = 25, name = "Alice", isStudent = true

### Data Types
- **Integers**: Whole numbers (1, 2, 3, -5)
- **Floats**: Decimal numbers (3.14, 2.5)
- **Strings**: Text data ("Hello", "World")
- **Booleans**: True or false values

### Control Structures
- **If statements**: Make decisions based on conditions
- **Loops**: Repeat actions multiple times
- **Functions**: Reusable blocks of code

## Programming Languages

### Popular Languages
- **Python**: Easy to learn, great for beginners
- **JavaScript**: Web development and applications
- **Java**: Enterprise software and Android apps
- **C++**: System programming and games

### Choosing a Language
- **Beginner-friendly**: Python, JavaScript
- **Web development**: HTML, CSS, JavaScript
- **Mobile apps**: Swift (iOS), Kotlin (Android)
- **Data science**: Python, R

## Problem-Solving Process

### 1. Understand the Problem
- Read the requirements carefully
- Identify inputs and expected outputs
- Break down complex problems

### 2. Plan Your Solution
- Think through the steps
- Consider different approaches
- Write pseudocode (plain English steps)

### 3. Write the Code
- Start with simple solutions
- Test frequently
- Debug errors as they appear

### 4. Test and Refine
- Test with different inputs
- Check edge cases
- Optimize if needed

## Programming Best Practices

### Code Organization
- Use meaningful variable names
- Add comments to explain complex logic
- Keep functions small and focused
- Follow consistent formatting

### Debugging Tips
- Read error messages carefully
- Use print statements to trace execution
- Test with simple examples first
- Ask for help when stuck
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Variables store data in programs",
            "Different data types for different information",
            "Control structures guide program flow",
            "Problem-solving process for programming"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Variables',
            type: 'multiple-choice',
            question: 'What is a variable in programming?',
            options: [
              'A storage location for data',
              'A type of function',
              'A programming language',
              'A computer part'
            ],
            correctAnswer: 0,
            explanation: 'A variable is a storage location that holds data that can be changed during program execution.'
          },
          {
            id: 'step-2',
            title: 'Data Types',
            type: 'multiple-choice',
            question: 'Which is NOT a common data type?',
            options: ['String', 'Integer', 'Boolean', 'Triangle'],
            correctAnswer: 3,
            explanation: 'String, Integer, and Boolean are common data types. Triangle is not a programming data type.'
          },
          {
            id: 'step-3',
            title: 'Control Structures',
            type: 'multiple-choice',
            question: 'What is a loop in programming?',
            options: [
              'A way to stop a program',
              'A way to repeat code multiple times',
              'A way to store data',
              'A way to print text'
            ],
            correctAnswer: 1,
            explanation: 'A loop is a control structure that repeats a block of code multiple times.'
          },
          {
            id: 'step-4',
            title: 'Functions',
            type: 'multiple-choice',
            question: 'What is a function in programming?',
            options: [
              'A variable that stores data',
              'A reusable block of code that performs a task',
              'A type of loop',
              'A programming language'
            ],
            correctAnswer: 1,
            explanation: 'A function is a reusable block of code that performs a specific task and can be called multiple times.'
          },
          {
            id: 'step-5',
            title: 'Algorithms',
            type: 'multiple-choice',
            question: 'What is an algorithm?',
            options: [
              'A programming language',
              'A step-by-step procedure to solve a problem',
              'A type of variable',
              'A computer part'
            ],
            correctAnswer: 1,
            explanation: 'An algorithm is a step-by-step procedure or set of rules to solve a problem or complete a task.'
          }
        ]
      }
    }
  },
  literature: {
    poetry: {
      'quest-1': {
        id: 'quest-1',
        title: 'Poetry Analysis',
        description: 'Learn to analyze and understand poetry',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 95,
        goldReward: 47,
        icon: 'üìö',
        timeEstimate: '35 min',
        skills: ['literary-analysis', 'critical-thinking'],
        requirements: [],
        deliverables: [
          {
            type: 'poetry-analysis',
            description: 'Analyze a classic poem',
            format: 'text'
          }
        ],
        resources: ['Poetry anthology', 'Literary analysis guide', 'Examples'],
        learningMaterial: {
          title: "Poetry Analysis Fundamentals",
          content: `
# Understanding Poetry: A Beginner's Guide

## What is Poetry?
Poetry is a form of literature that uses language, rhythm, and imagery to express ideas and emotions in a concentrated and artistic way.

## Key Elements of Poetry

### Rhythm and Meter
- **Rhythm**: The pattern of stressed and unstressed syllables
- **Meter**: The regular pattern of rhythm in a poem
- **Examples**: Iambic pentameter, trochaic tetrameter

### Rhyme and Sound
- **Rhyme**: Words that sound the same at the end of lines
- **Alliteration**: Repetition of consonant sounds
- **Assonance**: Repetition of vowel sounds
- **Onomatopoeia**: Words that imitate sounds

### Figurative Language
- **Metaphor**: Direct comparison without "like" or "as"
- **Simile**: Comparison using "like" or "as"
- **Personification**: Giving human qualities to non-human things
- **Symbolism**: Using objects to represent ideas

## Types of Poetry

### Traditional Forms
- **Sonnet**: 14-line poem with specific rhyme scheme
- **Haiku**: 3-line poem with 5-7-5 syllable pattern
- **Limerick**: 5-line humorous poem
- **Ballad**: Narrative poem that tells a story

### Free Verse
- **No fixed structure**: No regular meter or rhyme
- **Natural speech patterns**: More conversational tone
- **Modern poetry**: Popular in 20th and 21st centuries

## How to Analyze Poetry

### Step 1: Read Aloud
- Listen to the rhythm and sound
- Notice the emotional impact
- Identify the overall mood

### Step 2: Identify Structure
- Count lines and stanzas
- Look for rhyme patterns
- Notice line breaks and punctuation

### Step 3: Analyze Language
- Find figurative language
- Look for repeated words or phrases
- Consider word choice and tone

### Step 4: Interpret Meaning
- What is the main theme?
- What emotions does it convey?
- What is the poet trying to say?

## Common Themes in Poetry
- **Love and relationships**
- **Nature and the environment**
- **Death and loss**
- **Identity and self-discovery**
- **Social and political issues**
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Poetry uses rhythm, rhyme, and figurative language",
            "Different types of poetry have different structures",
            "Analysis involves reading, structure, language, and meaning",
            "Common themes include love, nature, and identity"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Poetic Devices',
            type: 'multiple-choice',
            question: 'What is a metaphor?',
            options: [
              'A comparison using like or as',
              'A direct comparison without like or as',
              'The repetition of sounds',
              'The pattern of stressed syllables'
            ],
            correctAnswer: 1,
            explanation: 'A metaphor is a direct comparison between two unlike things without using like or as.'
          },
          {
            id: 'step-2',
            title: 'Rhyme Scheme',
            type: 'multiple-choice',
            question: 'What is the rhyme scheme of a sonnet?',
            options: ['ABAB CDCD EFEF GG', 'AABB CCDD EEFF GG', 'ABBA ABBA CDE CDE', 'All of the above'],
            correctAnswer: 3,
            explanation: 'Different types of sonnets have different rhyme schemes, including all the options listed.'
          },
          {
            id: 'step-3',
            title: 'Simile vs Metaphor',
            type: 'multiple-choice',
            question: 'What is the difference between a simile and a metaphor?',
            options: [
              'No difference',
              'Simile uses like or as, metaphor does not',
              'Metaphor is longer than simile',
              'Simile is more poetic than metaphor'
            ],
            correctAnswer: 1,
            explanation: 'A simile uses like or as to make comparisons, while a metaphor makes direct comparisons without these words.'
          },
          {
            id: 'step-4',
            title: 'Poetry Forms',
            type: 'multiple-choice',
            question: 'What is a haiku?',
            options: [
              'A 14-line poem',
              'A 3-line poem with 5-7-5 syllables',
              'A poem without rhyme',
              'A long narrative poem'
            ],
            correctAnswer: 1,
            explanation: 'A haiku is a traditional Japanese poem with 3 lines and a 5-7-5 syllable pattern.'
          },
          {
            id: 'step-5',
            title: 'Poetry Themes',
            type: 'multiple-choice',
            question: 'What are common themes in poetry?',
            options: [
              'Only love and romance',
              'Love, nature, death, identity, and social issues',
              'Only nature and animals',
              'Only historical events'
            ],
            correctAnswer: 1,
            explanation: 'Poetry explores many themes including love, nature, death, identity, and social issues.'
          }
        ]
      }
    }
  },
  psychology: {
    cognitive: {
      'quest-1': {
        id: 'quest-1',
        title: 'Cognitive Psychology',
        description: 'Understand how the mind processes information',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 105,
        goldReward: 52,
        icon: 'üß†',
        timeEstimate: '40 min',
        skills: ['psychological-thinking', 'research-methods'],
        requirements: [],
        deliverables: [
          {
            type: 'cognitive-experiment',
            description: 'Design a simple cognitive experiment',
            format: 'text'
          }
        ],
        resources: ['Psychology textbook', 'Research papers', 'Case studies'],
        learningMaterial: {
          title: "Cognitive Psychology Fundamentals",
          content: `
# Introduction to Cognitive Psychology

## What is Cognitive Psychology?
Cognitive psychology is the study of mental processes including how people think, perceive, remember, and learn.

## Key Mental Processes

### Memory Systems
- **Sensory Memory**: Brief storage of sensory information
- **Short-term Memory**: Temporary storage (7¬±2 items)
- **Long-term Memory**: Permanent storage of information
- **Working Memory**: Active processing of information

### Attention
- **Selective Attention**: Focusing on one thing while ignoring others
- **Divided Attention**: Paying attention to multiple things
- **Sustained Attention**: Maintaining focus over time
- **Attention Deficit**: Difficulty maintaining focus

### Perception
- **Bottom-up Processing**: Building perception from sensory input
- **Top-down Processing**: Using knowledge to interpret sensations
- **Gestalt Principles**: How we organize visual information
- **Perceptual Illusions**: When perception doesn't match reality

## Cognitive Development

### Information Processing Model
1. **Input**: Information enters the system
2. **Processing**: Information is analyzed and interpreted
3. **Storage**: Information is stored in memory
4. **Output**: Information is retrieved and used

### Problem-Solving Strategies
- **Algorithm**: Step-by-step procedure
- **Heuristic**: Mental shortcut or rule of thumb
- **Insight**: Sudden understanding of a problem
- **Trial and Error**: Trying different approaches

## Research Methods

### Experimental Design
- **Independent Variable**: What the researcher manipulates
- **Dependent Variable**: What is measured
- **Control Group**: Group that doesn't receive treatment
- **Random Assignment**: Randomly assigning participants to groups

### Cognitive Tasks
- **Memory Tests**: Recall and recognition tasks
- **Attention Tasks**: Focus and concentration tests
- **Problem-Solving Tasks**: Logic and reasoning tests
- **Reaction Time**: Speed of mental processing

## Applications

### Education
- **Learning Styles**: Visual, auditory, kinesthetic
- **Memory Techniques**: Mnemonics and chunking
- **Study Strategies**: Spaced repetition and elaboration

### Technology
- **User Interface Design**: Making technology user-friendly
- **Human-Computer Interaction**: How people use computers
- **Artificial Intelligence**: Modeling human cognition

### Clinical Applications
- **Cognitive Therapy**: Changing negative thought patterns
- **Memory Training**: Improving memory function
- **Attention Training**: Enhancing focus and concentration
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Cognitive psychology studies mental processes",
            "Memory, attention, and perception are key areas",
            "Research methods include experiments and tasks",
            "Applications in education, technology, and therapy"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Memory Systems',
            type: 'multiple-choice',
            question: 'What are the three stages of memory?',
            options: [
              'Encoding, storage, retrieval',
              'Short-term, long-term, working',
              'Sensory, short-term, long-term',
              'Implicit, explicit, procedural'
            ],
            correctAnswer: 0,
            explanation: 'The three stages of memory are encoding (input), storage (retention), and retrieval (output).'
          },
          {
            id: 'step-2',
            title: 'Attention',
            type: 'multiple-choice',
            question: 'What is selective attention?',
            options: [
              'Paying attention to everything at once',
              'Focusing on one thing while ignoring others',
              'Remembering everything you see',
              'Processing information unconsciously'
            ],
            correctAnswer: 1,
            explanation: 'Selective attention is the ability to focus on one stimulus while filtering out others.'
          },
          {
            id: 'step-3',
            title: 'Perception',
            type: 'multiple-choice',
            question: 'What is perception?',
            options: [
              'The process of storing information',
              'The process of interpreting sensory information',
              'The process of forgetting information',
              'The process of learning new skills'
            ],
            correctAnswer: 1,
            explanation: 'Perception is the process of interpreting and organizing sensory information to understand the world.'
          },
          {
            id: 'step-4',
            title: 'Problem Solving',
            type: 'multiple-choice',
            question: 'What is the first step in problem solving?',
            options: [
              'Implementing a solution',
              'Defining the problem',
              'Testing the solution',
              'Gathering resources'
            ],
            correctAnswer: 1,
            explanation: 'The first step in problem solving is defining and understanding the problem clearly.'
          },
          {
            id: 'step-5',
            title: 'Cognitive Development',
            type: 'multiple-choice',
            question: 'Who developed the theory of cognitive development?',
            options: [
              'Sigmund Freud',
              'Jean Piaget',
              'B.F. Skinner',
              'Carl Rogers'
            ],
            correctAnswer: 1,
            explanation: 'Jean Piaget developed the theory of cognitive development, describing how children\'s thinking changes with age.'
          }
        ]
      }
    }
  },
  sociology: {
    'social-structures': {
      'quest-1': {
        id: 'quest-1',
        title: 'Social Institutions',
        description: 'Learn about social institutions and their functions',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üë•',
        timeEstimate: '35 min',
        skills: ['sociological-thinking', 'social-analysis'],
        requirements: [],
        deliverables: [
          {
            type: 'social-analysis',
            description: 'Analyze a social institution in your community',
            format: 'text'
          }
        ],
        resources: ['Sociology textbook', 'Social research', 'Community studies'],
        learningMaterial: {
          title: "Social Institutions and Society",
          content: `
# Understanding Social Institutions

## What are Social Institutions?
Social institutions are organized patterns of beliefs and behaviors centered on basic social needs. They provide structure and stability to society.

## Major Social Institutions

### Family
- **Definition**: The basic unit of society, responsible for reproduction and socialization
- **Functions**: Child-rearing, emotional support, economic cooperation
- **Types**: Nuclear, extended, single-parent, blended families
- **Changes**: From traditional to modern family structures

### Education
- **Purpose**: Transmitting knowledge, skills, and cultural values
- **Functions**: Socialization, social mobility, economic preparation
- **Levels**: Primary, secondary, higher education
- **Issues**: Access, quality, inequality in education

### Religion
- **Definition**: System of beliefs and practices related to the sacred
- **Functions**: Meaning-making, social cohesion, moral guidance
- **Types**: Monotheistic, polytheistic, non-theistic
- **Role**: Personal spirituality and social organization

### Government/Politics
- **Purpose**: Making and enforcing laws, maintaining order
- **Functions**: Law-making, defense, public services
- **Types**: Democracy, authoritarianism, totalitarianism
- **Power**: How power is distributed and exercised

### Economy
- **Definition**: System for producing, distributing, and consuming goods
- **Functions**: Resource allocation, employment, wealth creation
- **Types**: Capitalism, socialism, mixed economies
- **Issues**: Inequality, unemployment, economic cycles

## How Institutions Work Together

### Interdependence
- Institutions are interconnected and influence each other
- Changes in one institution affect others
- Example: Economic changes affect family structures

### Socialization
- Institutions teach us how to behave in society
- They transmit cultural values and norms
- They prepare us for different social roles

### Social Control
- Institutions maintain social order
- They enforce rules and norms
- They provide consequences for deviant behavior

## Studying Social Institutions

### Sociological Perspectives
- **Functionalist**: How institutions contribute to social stability
- **Conflict**: How institutions maintain inequality
- **Symbolic Interactionist**: How people create meaning in institutions

### Research Methods
- **Surveys**: Asking people about their experiences
- **Interviews**: In-depth conversations with individuals
- **Observation**: Watching how institutions work in practice
- **Historical Analysis**: Studying how institutions change over time
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Social institutions provide structure to society",
            "Major institutions include family, education, religion, government, and economy",
            "Institutions are interconnected and influence each other",
            "Sociologists study institutions from different perspectives"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Social Institutions',
            type: 'multiple-choice',
            question: 'Which is NOT a major social institution?',
            options: ['Family', 'Education', 'Government', 'Weather'],
            correctAnswer: 3,
            explanation: 'Family, Education, and Government are major social institutions. Weather is a natural phenomenon, not a social institution.'
          },
          {
            id: 'step-2',
            title: 'Social Functions',
            type: 'multiple-choice',
            question: 'What is the primary function of education?',
            options: [
              'To provide entertainment',
              'To socialize individuals and transmit culture',
              'To make money',
              'To control the weather'
            ],
            correctAnswer: 1,
            explanation: 'Education serves to socialize individuals and transmit cultural knowledge from one generation to the next.'
          },
          {
            id: 'step-3',
            title: 'Social Stratification',
            type: 'multiple-choice',
            question: 'What is social stratification?',
            options: [
              'The process of making friends',
              'The division of society into different social classes',
              'The study of weather patterns',
              'The organization of schools'
            ],
            correctAnswer: 1,
            explanation: 'Social stratification is the division of society into different social classes based on factors like wealth, power, and status.'
          },
          {
            id: 'step-4',
            title: 'Social Groups',
            type: 'multiple-choice',
            question: 'What is a primary group?',
            options: [
              'A large organization',
              'A small, intimate group with close relationships',
              'A group of strangers',
              'A government agency'
            ],
            correctAnswer: 1,
            explanation: 'A primary group is a small, intimate group with close, personal relationships, like family or close friends.'
          },
          {
            id: 'step-5',
            title: 'Social Change',
            type: 'multiple-choice',
            question: 'What causes social change?',
            options: [
              'Only natural disasters',
              'Technological innovation, social movements, and cultural shifts',
              'Only government decisions',
              'Only individual choices'
            ],
            correctAnswer: 1,
            explanation: 'Social change is caused by multiple factors including technological innovation, social movements, cultural shifts, and other social forces.'
          }
        ]
      }
    }
  },
  economics: {
    microeconomics: {
      'quest-1': {
        id: 'quest-1',
        title: 'Supply and Demand',
        description: 'Understand the fundamental principles of market economics',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 110,
        goldReward: 55,
        icon: 'üí∞',
        timeEstimate: '30 min',
        skills: ['economic-thinking', 'market-analysis'],
        requirements: [],
        deliverables: [
          {
            type: 'market-analysis',
            description: 'Analyze supply and demand for a product',
            format: 'text'
          }
        ],
        resources: ['Economics textbook', 'Market data', 'Case studies'],
        learningMaterial: {
          title: "Supply and Demand Fundamentals",
          content: `
# Understanding Supply and Demand

## What is Supply and Demand?
Supply and demand is the fundamental economic model that explains how prices are determined in markets.

## The Law of Demand
- **Definition**: As price increases, quantity demanded decreases
- **Reason**: People buy less when things are more expensive
- **Graph**: Downward-sloping demand curve
- **Example**: If pizza costs $20, fewer people will buy it than if it costs $5

## The Law of Supply
- **Definition**: As price increases, quantity supplied increases
- **Reason**: Higher prices make it more profitable to produce
- **Graph**: Upward-sloping supply curve
- **Example**: If pizza sells for $20, more restaurants will want to make pizza

## Market Equilibrium
- **Definition**: Where supply and demand curves intersect
- **Equilibrium Price**: The price where quantity supplied equals quantity demanded
- **Equilibrium Quantity**: The amount bought and sold at equilibrium price
- **Market Clearing**: No excess supply or demand

## Factors Affecting Demand

### Price of the Good
- **Direct relationship**: Higher price = lower demand
- **Movement along curve**: Price changes cause movement along demand curve

### Other Factors (Shift the Curve)
- **Income**: Higher income usually increases demand
- **Tastes and Preferences**: What people like changes demand
- **Prices of Related Goods**: Substitutes and complements
- **Population**: More people = more demand
- **Expectations**: Future price expectations affect current demand

## Factors Affecting Supply

### Price of the Good
- **Direct relationship**: Higher price = higher supply
- **Movement along curve**: Price changes cause movement along supply curve

### Other Factors (Shift the Curve)
- **Cost of Production**: Higher costs reduce supply
- **Technology**: Better technology increases supply
- **Number of Sellers**: More sellers = more supply
- **Government Policies**: Taxes and regulations affect supply
- **Natural Conditions**: Weather affects agricultural supply

## Market Dynamics

### Shortage
- **Definition**: When demand exceeds supply at current price
- **Result**: Prices tend to rise
- **Example**: Popular concert tickets sell out quickly

### Surplus
- **Definition**: When supply exceeds demand at current price
- **Result**: Prices tend to fall
- **Example**: Too many winter coats in summer

### Price Elasticity
- **Elastic Demand**: Quantity demanded changes significantly with price
- **Inelastic Demand**: Quantity demanded changes little with price
- **Factors**: Availability of substitutes, necessity of good, time period

## Real-World Applications

### Consumer Behavior
- Understanding why people buy certain products
- How advertising affects demand
- Seasonal demand patterns

### Business Decisions
- Setting prices to maximize profit
- Deciding what to produce
- Responding to market changes

### Government Policy
- Price controls and their effects
- Taxes and subsidies
- Market regulation
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Demand decreases as price increases",
            "Supply increases as price increases",
            "Equilibrium occurs where supply and demand intersect",
            "Many factors can shift supply and demand curves"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Demand Curve',
            type: 'multiple-choice',
            question: 'What happens to demand when price increases?',
            options: [
              'Demand increases',
              'Demand decreases',
              'Demand stays the same',
              'Demand becomes infinite'
            ],
            correctAnswer: 1,
            explanation: 'According to the law of demand, when price increases, quantity demanded decreases (and vice versa).'
          },
          {
            id: 'step-2',
            title: 'Market Equilibrium',
            type: 'multiple-choice',
            question: 'What is market equilibrium?',
            options: [
              'When supply equals demand',
              'When prices are highest',
              'When there is no competition',
              'When government controls prices'
            ],
            correctAnswer: 0,
            explanation: 'Market equilibrium occurs when supply equals demand, determining the market price and quantity.'
          },
          {
            id: 'step-3',
            title: 'Supply Factors',
            type: 'multiple-choice',
            question: 'What happens to supply when production costs increase?',
            options: [
              'Supply increases',
              'Supply decreases',
              'Supply stays the same',
              'Supply becomes infinite'
            ],
            correctAnswer: 1,
            explanation: 'When production costs increase, suppliers are less willing to produce at the same price, so supply decreases.'
          },
          {
            id: 'step-4',
            title: 'Price Elasticity',
            type: 'multiple-choice',
            question: 'What is elastic demand?',
            options: [
              'Demand that never changes',
              'Demand that changes significantly with price',
              'Demand that is always high',
              'Demand that is always low'
            ],
            correctAnswer: 1,
            explanation: 'Elastic demand means that quantity demanded changes significantly when price changes.'
          },
          {
            id: 'step-5',
            title: 'Market Shortages',
            type: 'multiple-choice',
            question: 'What happens in a market shortage?',
            options: [
              'Prices tend to fall',
              'Prices tend to rise',
              'Supply and demand are equal',
              'No one wants the product'
            ],
            correctAnswer: 1,
            explanation: 'In a shortage, demand exceeds supply, so prices tend to rise as buyers compete for limited goods.'
          }
        ]
      }
    }
  },
  geography: {
    physical: {
      'quest-1': {
        id: 'quest-1',
        title: 'Earth\'s Physical Features',
        description: 'Learn about the Earth\'s landforms and natural features',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 90,
        goldReward: 45,
        icon: 'üåç',
        timeEstimate: '30 min',
        skills: ['geographical-thinking', 'spatial-analysis'],
        requirements: [],
        deliverables: [
          {
            type: 'landform-identification',
            description: 'Identify different landforms on a map',
            format: 'diagram'
          }
        ],
        resources: ['Geography textbook', 'Maps', 'Satellite imagery'],
        learningMaterial: {
          title: "Earth's Physical Features and Landforms",
          content: `
# Understanding Earth's Physical Geography

## What is Physical Geography?
Physical geography studies the natural features and processes of Earth's surface, including landforms, climate, and ecosystems.

## Major Landforms

### Mountains
- **Formation**: Tectonic plate collision, volcanic activity
- **Characteristics**: High elevation, steep slopes, rocky terrain
- **Examples**: Himalayas, Andes, Rocky Mountains
- **Importance**: Water sources, biodiversity, recreation

### Plains
- **Formation**: Sediment deposition, erosion
- **Characteristics**: Flat or gently rolling terrain
- **Examples**: Great Plains, Pampas, Steppes
- **Importance**: Agriculture, transportation, settlement

### Plateaus
- **Formation**: Uplift, volcanic activity
- **Characteristics**: Elevated flat areas
- **Examples**: Tibetan Plateau, Colorado Plateau
- **Importance**: Water sources, mineral resources

### Valleys
- **Formation**: River erosion, glacial activity
- **Characteristics**: Low areas between higher land
- **Examples**: Grand Canyon, Rhine Valley
- **Importance**: Transportation routes, fertile soil

## Water Features

### Rivers
- **Formation**: Precipitation, snowmelt, springs
- **Characteristics**: Flowing water, erosion and deposition
- **Examples**: Amazon, Nile, Mississippi
- **Importance**: Transportation, irrigation, hydroelectric power

### Lakes
- **Formation**: Glacial activity, tectonic movement, volcanic craters
- **Characteristics**: Standing water bodies
- **Examples**: Great Lakes, Lake Baikal, Caspian Sea
- **Importance**: Freshwater supply, recreation, transportation

### Oceans
- **Formation**: Tectonic plate movement
- **Characteristics**: Large saltwater bodies
- **Examples**: Pacific, Atlantic, Indian Ocean
- **Importance**: Climate regulation, transportation, resources

## Climate and Weather

### Climate Zones
- **Tropical**: Hot and humid year-round
- **Temperate**: Four distinct seasons
- **Polar**: Cold year-round
- **Desert**: Hot and dry
- **Mediterranean**: Hot, dry summers; mild, wet winters

### Weather Patterns
- **Precipitation**: Rain, snow, sleet, hail
- **Temperature**: Daily and seasonal variations
- **Wind**: Global wind patterns, local breezes
- **Storms**: Hurricanes, tornadoes, blizzards

## Natural Processes

### Erosion
- **Water Erosion**: Rivers, rain, waves
- **Wind Erosion**: Sand and dust movement
- **Glacial Erosion**: Ice movement and melting
- **Effects**: Landform changes, soil loss

### Deposition
- **River Deposition**: Deltas, floodplains
- **Wind Deposition**: Sand dunes, loess
- **Glacial Deposition**: Moraines, till
- **Effects**: New landforms, fertile soil

### Tectonic Activity
- **Plate Movement**: Continental drift
- **Earthquakes**: Sudden ground movement
- **Volcanoes**: Magma and ash eruption
- **Effects**: Mountain building, landform creation

## Human Impact

### Environmental Changes
- **Deforestation**: Loss of forest cover
- **Urbanization**: City growth and expansion
- **Pollution**: Air, water, and soil contamination
- **Climate Change**: Global temperature increase

### Conservation
- **Protected Areas**: National parks, wildlife reserves
- **Sustainable Development**: Balancing growth and environment
- **Renewable Energy**: Solar, wind, hydroelectric power
- **Environmental Policies**: Laws and regulations
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Physical geography studies Earth's natural features",
            "Major landforms include mountains, plains, plateaus, and valleys",
            "Water features include rivers, lakes, and oceans",
            "Natural processes like erosion and deposition shape the landscape"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Landforms',
            type: 'multiple-choice',
            question: 'What is the highest type of landform?',
            options: ['Hill', 'Mountain', 'Plateau', 'Valley'],
            correctAnswer: 1,
            explanation: 'Mountains are the highest landforms, typically rising more than 1,000 feet above surrounding land.'
          },
          {
            id: 'step-2',
            title: 'Water Bodies',
            type: 'multiple-choice',
            question: 'What is the largest ocean?',
            options: ['Atlantic', 'Pacific', 'Indian', 'Arctic'],
            correctAnswer: 1,
            explanation: 'The Pacific Ocean is the largest ocean, covering more than 30% of Earth\'s surface.'
          },
          {
            id: 'step-3',
            title: 'Climate Zones',
            type: 'multiple-choice',
            question: 'What characterizes a tropical climate?',
            options: [
              'Four distinct seasons',
              'Hot and humid year-round',
              'Cold year-round',
              'Hot and dry'
            ],
            correctAnswer: 1,
            explanation: 'Tropical climates are characterized by hot and humid conditions year-round with little seasonal variation.'
          },
          {
            id: 'step-4',
            title: 'Natural Processes',
            type: 'multiple-choice',
            question: 'What is erosion?',
            options: [
              'The building up of landforms',
              'The wearing away of landforms by natural forces',
              'The creation of mountains',
              'The formation of rivers'
            ],
            correctAnswer: 1,
            explanation: 'Erosion is the process of wearing away landforms by natural forces like water, wind, and ice.'
          },
          {
            id: 'step-5',
            title: 'Tectonic Activity',
            type: 'multiple-choice',
            question: 'What causes earthquakes?',
            options: [
              'Weather changes',
              'Movement of tectonic plates',
              'Ocean currents',
              'Wind patterns'
            ],
            correctAnswer: 1,
            explanation: 'Earthquakes are caused by the movement and interaction of tectonic plates beneath Earth\'s surface.'
          }
        ]
      }
    }
  },
  art: {
    painting: {
      'quest-1': {
        id: 'quest-1',
        title: 'Art History and Techniques',
        description: 'Explore different art movements and painting techniques',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 85,
        goldReward: 42,
        icon: 'üé®',
        timeEstimate: '35 min',
        skills: ['artistic-thinking', 'visual-analysis'],
        requirements: [],
        deliverables: [
          {
            type: 'art-analysis',
            description: 'Analyze a famous painting',
            format: 'text'
          }
        ],
        resources: ['Art history book', 'Museum collections', 'Artist biographies'],
        learningMaterial: {
          title: "Art History and Visual Techniques",
          content: `
# Understanding Art History and Techniques

## What is Art?
Art is the expression of human creativity and imagination through visual, auditory, or performance forms.

## Major Art Movements

### Renaissance (1400-1600)
- **Characteristics**: Realistic representation, perspective, humanism
- **Key Artists**: Leonardo da Vinci, Michelangelo, Raphael
- **Techniques**: Oil painting, chiaroscuro, linear perspective
- **Famous Works**: Mona Lisa, Sistine Chapel ceiling

### Impressionism (1860-1880)
- **Characteristics**: Capturing light and color, loose brushstrokes
- **Key Artists**: Claude Monet, Pierre-Auguste Renoir, Edgar Degas
- **Techniques**: Plein air painting, broken color, visible brushstrokes
- **Famous Works**: Water Lilies, Luncheon of the Boating Party

### Post-Impressionism (1880-1900)
- **Characteristics**: Emotional expression, bold colors, geometric forms
- **Key Artists**: Vincent van Gogh, Paul C√©zanne, Paul Gauguin
- **Techniques**: Thick paint application, bold color choices
- **Famous Works**: Starry Night, The Card Players

### Modern Art (1900-1970)
- **Characteristics**: Breaking traditional rules, experimentation
- **Key Artists**: Pablo Picasso, Henri Matisse, Jackson Pollock
- **Techniques**: Cubism, abstract expressionism, collage
- **Famous Works**: Les Demoiselles d'Avignon, Guernica

## Art Techniques

### Drawing
- **Pencil**: Graphite, charcoal, colored pencils
- **Ink**: Pen and ink, brush and ink, markers
- **Paper**: Different textures and weights
- **Methods**: Hatching, cross-hatching, stippling

### Painting
- **Watercolor**: Transparent, fluid, quick-drying
- **Oil**: Rich colors, slow-drying, blendable
- **Acrylic**: Fast-drying, versatile, water-soluble
- **Tempera**: Egg-based, matte finish, traditional

### Sculpture
- **Materials**: Stone, wood, metal, clay, glass
- **Methods**: Carving, modeling, casting, assembling
- **Techniques**: Relief, in-the-round, installation
- **Tools**: Chisels, hammers, files, welding equipment

### Digital Art
- **Software**: Photoshop, Illustrator, Procreate
- **Tablets**: Drawing tablets, stylus pens
- **Techniques**: Digital painting, vector graphics, 3D modeling
- **Advantages**: Undo function, layers, infinite colors

## Elements of Art

### Line
- **Definition**: A mark made by a moving point
- **Types**: Straight, curved, thick, thin, broken
- **Functions**: Outline, texture, movement, direction

### Shape
- **Definition**: A two-dimensional area with boundaries
- **Types**: Geometric (circles, squares) and organic (natural forms)
- **Functions**: Composition, balance, emphasis

### Color
- **Primary**: Red, blue, yellow (cannot be mixed)
- **Secondary**: Green, orange, purple (mixed from primaries)
- **Warm Colors**: Red, orange, yellow (energy, warmth)
- **Cool Colors**: Blue, green, purple (calm, distance)

### Texture
- **Definition**: The surface quality of an object
- **Types**: Rough, smooth, bumpy, soft, hard
- **Methods**: Actual texture (real) and implied texture (visual)

### Space
- **Positive Space**: The subject or objects in artwork
- **Negative Space**: The empty areas around objects
- **Perspective**: Creating depth and dimension
- **Overlap**: Objects in front of others

## Principles of Design

### Balance
- **Symmetrical**: Equal weight on both sides
- **Asymmetrical**: Unequal but balanced composition
- **Radial**: Elements arranged around a center point

### Emphasis
- **Focal Point**: The main area of interest
- **Methods**: Color, size, contrast, placement
- **Purpose**: Directing the viewer's attention

### Movement
- **Definition**: The path the eye follows through artwork
- **Methods**: Lines, shapes, colors, repetition
- **Types**: Actual movement (kinetic art) and implied movement

### Unity
- **Definition**: All elements working together harmoniously
- **Methods**: Repetition, similarity, proximity
- **Purpose**: Creating a cohesive composition
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Art movements reflect historical and cultural changes",
            "Different techniques use various materials and methods",
            "Elements of art are the building blocks of visual composition",
            "Principles of design guide how elements are arranged"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Art Movements',
            type: 'multiple-choice',
            question: 'Which art movement is known for its emphasis on light and color?',
            options: ['Cubism', 'Impressionism', 'Surrealism', 'Abstract Expressionism'],
            correctAnswer: 1,
            explanation: 'Impressionism is known for its emphasis on capturing light and color in outdoor scenes.'
          },
          {
            id: 'step-2',
            title: 'Painting Techniques',
            type: 'multiple-choice',
            question: 'What is chiaroscuro?',
            options: [
              'A type of brush',
              'The use of light and dark contrast',
              'A color mixing technique',
              'A canvas preparation method'
            ],
            correctAnswer: 1,
            explanation: 'Chiaroscuro is the use of light and dark contrast to create depth and volume in painting.'
          },
          {
            id: 'step-3',
            title: 'Elements of Art',
            type: 'multiple-choice',
            question: 'What are the primary colors?',
            options: [
              'Red, blue, green',
              'Red, blue, yellow',
              'Orange, purple, green',
              'Black, white, gray'
            ],
            correctAnswer: 1,
            explanation: 'The primary colors are red, blue, and yellow - they cannot be created by mixing other colors.'
          },
          {
            id: 'step-4',
            title: 'Principles of Design',
            type: 'multiple-choice',
            question: 'What is balance in art?',
            options: [
              'The use of bright colors',
              'The distribution of visual weight in a composition',
              'The size of the artwork',
              'The speed of creating art'
            ],
            correctAnswer: 1,
            explanation: 'Balance is the distribution of visual weight in a composition, creating a sense of stability.'
          },
          {
            id: 'step-5',
            title: 'Art History',
            type: 'multiple-choice',
            question: 'Who painted the Mona Lisa?',
            options: [
              'Vincent van Gogh',
              'Leonardo da Vinci',
              'Pablo Picasso',
              'Michelangelo'
            ],
            correctAnswer: 1,
            explanation: 'Leonardo da Vinci painted the Mona Lisa, one of the most famous paintings in the world.'
          }
        ]
      }
    }
  },
  music: {
    theory: {
      'quest-1': {
        id: 'quest-1',
        title: 'Music Theory Fundamentals',
        description: 'Learn the basics of music theory and notation',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 95,
        goldReward: 47,
        icon: 'üéµ',
        timeEstimate: '40 min',
        skills: ['musical-thinking', 'aural-skills'],
        requirements: [],
        deliverables: [
          {
            type: 'music-composition',
            description: 'Write a simple melody',
            format: 'notation'
          }
        ],
        resources: ['Music theory book', 'Piano/keyboard', 'Notation software'],
        learningMaterial: {
          title: "Music Theory Fundamentals",
          content: `
# Understanding Music Theory

## What is Music Theory?
Music theory is the study of how music works, including the principles and practices of musical composition and performance.

## Musical Notes and Scales

### The Musical Alphabet
- **Notes**: A, B, C, D, E, F, G (then repeats)
- **Sharps (#)**: Raise a note by half step
- **Flats (b)**: Lower a note by half step
- **Natural (‚ôÆ)**: Cancel a sharp or flat

### Major Scales
- **Pattern**: Whole-Whole-Half-Whole-Whole-Whole-Half
- **C Major**: C-D-E-F-G-A-B-C (all white keys)
- **G Major**: G-A-B-C-D-E-F#-G (one sharp)
- **F Major**: F-G-A-Bb-C-D-E-F (one flat)

### Minor Scales
- **Natural Minor**: Same pattern as major, starting on different note
- **Harmonic Minor**: Raised 7th note
- **Melodic Minor**: Raised 6th and 7th ascending, natural descending

## Intervals and Chords

### Intervals
- **Unison**: Same note (C to C)
- **Second**: Two notes apart (C to D)
- **Third**: Three notes apart (C to E)
- **Perfect Fourth**: Four notes apart (C to F)
- **Perfect Fifth**: Five notes apart (C to G)
- **Octave**: Eight notes apart (C to C)

### Triads (Three-Note Chords)
- **Major Triad**: Root, major third, perfect fifth (C-E-G)
- **Minor Triad**: Root, minor third, perfect fifth (C-Eb-G)
- **Diminished Triad**: Root, minor third, diminished fifth (C-Eb-Gb)
- **Augmented Triad**: Root, major third, augmented fifth (C-E-G#)

### Seventh Chords
- **Major 7th**: Major triad + major 7th (C-E-G-B)
- **Minor 7th**: Minor triad + minor 7th (C-Eb-G-Bb)
- **Dominant 7th**: Major triad + minor 7th (C-E-G-Bb)
- **Half-Diminished**: Diminished triad + minor 7th (C-Eb-Gb-Bb)

## Rhythm and Time

### Note Values
- **Whole Note**: 4 beats (semibreve)
- **Half Note**: 2 beats (minim)
- **Quarter Note**: 1 beat (crotchet)
- **Eighth Note**: 1/2 beat (quaver)
- **Sixteenth Note**: 1/4 beat (semiquaver)

### Time Signatures
- **4/4 Time**: 4 beats per measure, quarter note gets 1 beat
- **3/4 Time**: 3 beats per measure (waltz time)
- **2/4 Time**: 2 beats per measure (march time)
- **6/8 Time**: 6 eighth notes per measure (compound time)

### Tempo
- **Largo**: Very slow (40-60 BPM)
- **Andante**: Walking pace (76-108 BPM)
- **Moderato**: Moderate (108-120 BPM)
- **Allegro**: Fast (120-168 BPM)
- **Presto**: Very fast (168-200 BPM)

## Musical Forms

### Binary Form (A-B)
- **A Section**: First musical idea
- **B Section**: Contrasting musical idea
- **Example**: Many folk songs and dances

### Ternary Form (A-B-A)
- **A Section**: First musical idea
- **B Section**: Contrasting middle section
- **A Section**: Return of first idea (often varied)
- **Example**: Many classical minuets

### Sonata Form
- **Exposition**: Present main themes
- **Development**: Develop and transform themes
- **Recapitulation**: Restate themes in original key
- **Example**: First movements of symphonies

## Harmony and Key Relationships

### Circle of Fifths
- **Purpose**: Shows relationships between keys
- **Clockwise**: Each key is a fifth higher
- **Sharps**: Keys with sharps increase clockwise
- **Flats**: Keys with flats increase counterclockwise

### Chord Progressions
- **I-V-vi-IV**: Common pop progression (C-G-Am-F)
- **ii-V-I**: Jazz progression (Dm-G-C)
- **I-vi-IV-V**: 50s progression (C-Am-F-G)
- **Function**: How chords work together harmonically

## Musical Instruments

### String Instruments
- **Violin**: Highest pitched, four strings
- **Viola**: Slightly lower than violin
- **Cello**: Lower pitched, held between knees
- **Double Bass**: Lowest pitched, largest

### Wind Instruments
- **Woodwinds**: Flute, clarinet, oboe, bassoon
- **Brass**: Trumpet, trombone, French horn, tuba
- **Reed Instruments**: Use reeds to produce sound
- **Valve Instruments**: Use valves to change pitch

### Percussion
- **Pitched**: Xylophone, timpani, piano
- **Non-pitched**: Snare drum, cymbals, triangle
- **Rhythm**: Provide rhythmic foundation
- **Color**: Add timbral variety
          `,
          readingTime: "12-18 minutes",
          keyPoints: [
            "Music theory explains how music works",
            "Scales and chords are the building blocks of harmony",
            "Rhythm and time signatures organize musical time",
            "Different forms provide structure to musical pieces"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Musical Notes',
            type: 'multiple-choice',
            question: 'How many notes are in a major scale?',
            options: ['5', '7', '8', '12'],
            correctAnswer: 1,
            explanation: 'A major scale consists of 7 different notes, typically arranged in a specific pattern of whole and half steps.'
          },
          {
            id: 'step-2',
            title: 'Time Signatures',
            type: 'multiple-choice',
            question: 'What does 4/4 time signature mean?',
            options: [
              '4 beats per measure, quarter note gets 1 beat',
              '4 measures per song',
              '4 different instruments',
              '4 minutes long'
            ],
            correctAnswer: 0,
            explanation: '4/4 time signature means 4 beats per measure, with the quarter note receiving 1 beat.'
          },
          {
            id: 'step-3',
            title: 'Major Scales',
            type: 'multiple-choice',
            question: 'What is the pattern for a major scale?',
            options: [
              'Whole-Whole-Half-Whole-Whole-Whole-Half',
              'Half-Whole-Half-Whole-Half-Whole-Half',
              'Whole-Half-Whole-Whole-Half-Whole-Whole',
              'All whole steps'
            ],
            correctAnswer: 0,
            explanation: 'The major scale pattern is Whole-Whole-Half-Whole-Whole-Whole-Half (W-W-H-W-W-W-H).'
          },
          {
            id: 'step-4',
            title: 'Intervals',
            type: 'multiple-choice',
            question: 'What is a perfect fifth?',
            options: [
              'Two notes that are the same',
              'Five notes apart in the scale',
              'The interval between C and G',
              'A chord with five notes'
            ],
            correctAnswer: 2,
            explanation: 'A perfect fifth is the interval between C and G (or any note and the note five steps up the scale).'
          },
          {
            id: 'step-5',
            title: 'Chords',
            type: 'multiple-choice',
            question: 'What is a major triad?',
            options: [
              'Three notes played together',
              'A chord with a root, major third, and perfect fifth',
              'A chord with only major notes',
              'A chord with four notes'
            ],
            correctAnswer: 1,
            explanation: 'A major triad consists of a root note, a major third (4 semitones up), and a perfect fifth (7 semitones up).'
          }
        ]
      }
    }
  },
  philosophy: {
    ethics: {
      'quest-1': {
        id: 'quest-1',
        title: 'Introduction to Ethics',
        description: 'Explore fundamental ethical theories and moral reasoning',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'ü§î',
        timeEstimate: '35 min',
        skills: ['ethical-reasoning', 'critical-thinking'],
        requirements: [],
        deliverables: [
          {
            type: 'ethical-analysis',
            description: 'Analyze a moral dilemma using ethical theories',
            format: 'text'
          }
        ],
        resources: ['Ethics textbook', 'Philosophical readings', 'Case studies'],
        learningMaterial: {
          title: "Introduction to Utilitarianism",
          content: `
# Utilitarian Ethics

## What is Utilitarianism?
Utilitarianism is an ethical theory that judges the moral value of actions based on their consequences, particularly their impact on overall happiness.

## Core Principles

### 1. Greatest Happiness Principle
- Actions are right if they promote the greatest happiness
- Consider the interests of all affected parties
- Pursue the maximization of overall welfare

### 2. Consequentialism
- The moral value of actions depends entirely on their results
- Motives and intentions are not the primary criteria for moral judgment
- The goodness of outcomes determines the rightness of actions

## Key Thinkers

### Jeremy Bentham
- Founder of utilitarianism
- Proposed "greatest happiness for the greatest number"
- Emphasized quantitative calculation of pleasure and pain

### John Stuart Mill
- Developed Bentham's theory
- Distinguished between higher and lower pleasures
- Emphasized the importance of individual liberty

## Types of Utilitarianism

### 1. Act Utilitarianism
- Each action is judged by its specific consequences
- Direct calculation of each action's utility

### 2. Rule Utilitarianism
- Actions are judged by the consequences of following rules
- Considers the general utility of rules

## Practical Applications

### Medical Ethics
- Resource allocation: How to distribute limited medical resources
- Euthanasia: Moral considerations for relieving suffering

### Public Policy
- Cost-benefit analysis
- Social welfare policy development

## Criticisms and Responses

### Main Criticisms
1. **Justice Problem**: May sacrifice minority interests
2. **Calculation Difficulty**: Hard to accurately calculate consequences
3. **Rights Neglect**: May ignore individual rights

### Utilitarian Responses
1. Consideration of long-term consequences
2. Importance of rules
3. Balance between rights and utility
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Core principles of utilitarianism",
            "Key ideas of Bentham and Mill",
            "Act vs Rule utilitarianism",
            "Practical applications and criticisms"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Utilitarianism Basics',
            type: 'multiple-choice',
            question: 'What is utilitarianism?',
            options: [
              'A theory that focuses on individual rights',
              'A theory that judges actions by their consequences',
              'A theory that emphasizes duty and obligation',
              'A theory that prioritizes personal virtue'
            ],
            correctAnswer: 1,
            explanation: 'Utilitarianism is a consequentialist theory that judges the morality of actions based on their outcomes and consequences.'
          },
          {
            id: 'step-2',
            title: 'Greatest Happiness Principle',
            type: 'multiple-choice',
            question: 'What is the greatest happiness principle?',
            options: [
              'Actions are right if they promote individual happiness',
              'Actions are right if they promote the greatest happiness for the greatest number',
              'Actions are right if they follow moral rules',
              'Actions are right if they demonstrate virtue'
            ],
            correctAnswer: 1,
            explanation: 'The greatest happiness principle states that actions are right if they promote the greatest happiness for the greatest number of people.'
          },
          {
            id: 'step-3',
            title: 'Deontological Ethics',
            type: 'multiple-choice',
            question: 'What is deontological ethics?',
            options: [
              'Ethics based on consequences',
              'Ethics based on duties and rules',
              'Ethics based on character',
              'Ethics based on divine commands'
            ],
            correctAnswer: 1,
            explanation: 'Deontological ethics is based on duties and rules, where actions are right or wrong based on their adherence to moral rules, regardless of consequences.'
          },
          {
            id: 'step-4',
            title: 'Virtue Ethics',
            type: 'multiple-choice',
            question: 'What is the focus of virtue ethics?',
            options: [
              'Following rules and duties',
              'Consequences of actions',
              'Character and moral virtues',
              'Divine commands'
            ],
            correctAnswer: 2,
            explanation: 'Virtue ethics focuses on developing good character traits and moral virtues rather than following rules or calculating consequences.'
          },
          {
            id: 'step-5',
            title: 'Moral Dilemmas',
            type: 'multiple-choice',
            question: 'What is a moral dilemma?',
            options: [
              'A situation with no moral implications',
              'A situation where moral principles conflict',
              'A situation with only one right answer',
              'A situation involving only good outcomes'
            ],
            correctAnswer: 1,
            explanation: 'A moral dilemma is a situation where two or more moral principles or values conflict, making it difficult to determine the right course of action.'
          }
        ]
      }
    }
  },
  biology: {
    'cell-biology': {
      'quest-1': {
        id: 'quest-1',
        title: 'Cell Structure and Function',
        description: 'Learn about the basic structure and function of cells',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 110,
        goldReward: 55,
        icon: 'üß¨',
        timeEstimate: '40 min',
        skills: ['scientific-thinking', 'biological-understanding'],
        requirements: [],
        deliverables: [
          {
            type: 'cell-diagram',
            description: 'Draw and label a plant cell',
            format: 'diagram'
          }
        ],
        resources: ['Biology textbook', 'Microscope images', 'Interactive models'],
        learningMaterial: {
          title: "Cell Structure and Function",
          content: `
# Cells: The Basic Unit of Life

## Cell Theory
1. All living things are composed of cells
2. Cells are the basic unit of life
3. New cells come from existing cells

## Basic Cell Structure

### 1. Cell Membrane
- **Function**: Controls what enters and leaves the cell
- **Structure**: Phospholipid bilayer
- **Feature**: Selectively permeable

### 2. Cytoplasm
- **Function**: Main site of cellular metabolism
- **Composition**: Organelles and cytosol
- **Feature**: Semi-fluid state

### 3. Nucleus
- **Function**: Controls cell activities and heredity
- **Structure**: Nuclear membrane, nucleolus, chromatin
- **Feature**: Unique to eukaryotic cells

## Important Organelles

### Mitochondria
- **Function**: Cellular respiration, ATP production
- **Structure**: Double membrane, folded inner membrane
- **Feature**: Has its own DNA

### Chloroplasts (Plant cells)
- **Function**: Photosynthesis
- **Structure**: Double membrane, contains chlorophyll
- **Feature**: Converts light energy to chemical energy

### Endoplasmic Reticulum
- **Function**: Protein synthesis and transport
- **Types**: Rough ER, Smooth ER
- **Feature**: Connected to nuclear membrane

### Golgi Apparatus
- **Function**: Protein processing and secretion
- **Structure**: Stacked flattened vesicles
- **Feature**: Works with ER

## Cell Types

### Prokaryotic Cells
- **Features**: No nuclear membrane, no organelles
- **Examples**: Bacteria, cyanobacteria
- **Size**: Usually smaller

### Eukaryotic Cells
- **Features**: Has nuclear membrane, has organelles
- **Examples**: Plant and animal cells
- **Size**: Usually larger

## Cell Division

### Mitosis
- **Process**: Interphase, prophase, metaphase, anaphase, telophase
- **Result**: Two identical daughter cells
- **Purpose**: Growth and repair

### Meiosis
- **Process**: Two consecutive divisions
- **Result**: Four different daughter cells
- **Purpose**: Formation of reproductive cells
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Basic principles of cell theory",
            "Functions of cell membrane, cytoplasm, and nucleus",
            "Roles of important organelles",
            "Differences between prokaryotic and eukaryotic cells"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Cell Theory',
            type: 'multiple-choice',
            question: 'What is the powerhouse of the cell?',
            options: ['Nucleus', 'Mitochondria', 'Ribosomes', 'Golgi apparatus'],
            correctAnswer: 1,
            explanation: 'Mitochondria are often called the powerhouse of the cell because they produce ATP, the energy currency of the cell.'
          },
          {
            id: 'step-2',
            title: 'Cell Organelles',
            type: 'multiple-choice',
            question: 'Which organelle is responsible for photosynthesis in plant cells?',
            options: ['Mitochondria', 'Chloroplasts', 'Nucleus', 'Endoplasmic reticulum'],
            correctAnswer: 1,
            explanation: 'Chloroplasts contain chlorophyll and are responsible for photosynthesis in plant cells.'
          },
          {
            id: 'step-3',
            title: 'Cell Membrane',
            type: 'multiple-choice',
            question: 'What is the function of the cell membrane?',
            options: [
              'To produce energy',
              'To control what enters and leaves the cell',
              'To store genetic material',
              'To perform photosynthesis'
            ],
            correctAnswer: 1,
            explanation: 'The cell membrane controls what enters and leaves the cell, maintaining homeostasis and protecting the cell.'
          },
          {
            id: 'step-4',
            title: 'Prokaryotic vs Eukaryotic',
            type: 'multiple-choice',
            question: 'What is the main difference between prokaryotic and eukaryotic cells?',
            options: [
              'Size difference',
              'Eukaryotic cells have a nucleus, prokaryotic cells do not',
              'Prokaryotic cells are more complex',
              'No difference'
            ],
            correctAnswer: 1,
            explanation: 'The main difference is that eukaryotic cells have a membrane-bound nucleus, while prokaryotic cells do not.'
          },
          {
            id: 'step-5',
            title: 'Cell Division',
            type: 'multiple-choice',
            question: 'What process creates new cells?',
            options: [
              'Photosynthesis',
              'Cellular respiration',
              'Cell division (mitosis)',
              'Protein synthesis'
            ],
            correctAnswer: 2,
            explanation: 'Cell division, specifically mitosis, is the process by which cells reproduce and create new cells.'
          }
        ]
      }
    }
  }
};

// Â≠¶ÁßëÂÆö‰πâ
export const subjects = {
    algebra: {
      'quest-1': {
        id: 'quest-1',
        title: 'Linear Equations Basics',
        description: 'Master the fundamentals of solving linear equations',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üìê',
        timeEstimate: '30 min',
        skills: ['algebra', 'problem-solving'],
        requirements: [],
        deliverables: [
          {
            type: 'equation-solving',
            description: 'Solve 10 linear equations',
            format: 'text'
          }
        ],
        resources: ['Algebra textbook', 'Practice problems', 'Video tutorials'],
        learningMaterial: {
          title: "Linear Equations Fundamentals",
          content: `
# Linear Equations Fundamentals

## What are Linear Equations?
A linear equation is an equation where the highest power of the variable is 1.

### Standard Form
ax + b = c

### Key Steps to Solve
1. **Isolate the variable** - Get x by itself
2. **Use inverse operations** - Do the opposite operation
3. **Check your answer** - Substitute back into original equation

## Examples

### Example 1: Simple Addition
x + 3 = 7
- Subtract 3 from both sides: x = 4
- Check: 4 + 3 = 7 ‚úì

### Example 2: With Multiplication
2x = 10
- Divide both sides by 2: x = 5
- Check: 2(5) = 10 ‚úì

### Example 3: Multiple Steps
3x + 2 = 11
- Subtract 2: 3x = 9
- Divide by 3: x = 3
- Check: 3(3) + 2 = 11 ‚úì

## Common Mistakes to Avoid
1. Forgetting to do the same operation to both sides
2. Making sign errors when moving terms
3. Not checking your answer
          `,
          readingTime: "8-12 minutes",
          keyPoints: [
            "Standard form of linear equations",
            "Basic steps to solve equations",
            "Transposing and combining like terms",
            "Importance of checking answers"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Basic Concepts',
            type: 'multiple-choice',
            question: 'What is the solution to 2x + 3 = 7?',
            options: ['x = 2', 'x = 4', 'x = 5', 'x = 1'],
            correctAnswer: 0,
            explanation: 'Subtract 3 from both sides: 2x = 4, then divide by 2: x = 2'
          },
          {
            id: 'step-2',
            title: 'Practice',
            type: 'text-input',
            question: 'Solve: 3x - 5 = 10',
            placeholder: 'Enter your answer...',
            correctAnswers: ['x = 5', '5'],
            explanation: 'Add 5 to both sides: 3x = 15, then divide by 3: x = 5'
          },
          {
            id: 'step-3',
            title: 'Negative Coefficients',
            type: 'multiple-choice',
            question: 'What is the solution to -2x + 4 = 8?',
            options: ['x = 2', 'x = -2', 'x = 6', 'x = -6'],
            correctAnswer: 1,
            explanation: 'Subtract 4 from both sides: -2x = 4, then divide by -2: x = -2'
          },
          {
            id: 'step-4',
            title: 'Fractions in Equations',
            type: 'multiple-choice',
            question: 'What is the solution to (1/2)x + 3 = 7?',
            options: ['x = 8', 'x = 4', 'x = 2', 'x = 6'],
            correctAnswer: 0,
            explanation: 'Subtract 3 from both sides: (1/2)x = 4, then multiply by 2: x = 8'
          },
          {
            id: 'step-5',
            title: 'Word Problems',
            type: 'multiple-choice',
            question: 'If a number plus 5 equals 12, what is the number?',
            options: ['7', '17', '2.4', '60'],
            correctAnswer: 0,
            explanation: 'Let x be the number. Then x + 5 = 12, so x = 12 - 5 = 7'
          }
        ]
      },
      'quest-2': {
        id: 'quest-2',
        title: 'Quadratic Equations',
        description: 'Learn to solve quadratic equations using various methods',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: 'üìä',
        timeEstimate: '45 min',
        skills: ['algebra', 'quadratic-functions'],
        requirements: ['quest-1'],
        deliverables: [
          {
            type: 'quadratic-solving',
            description: 'Solve 8 quadratic equations',
            format: 'text'
          }
        ],
        resources: ['Quadratic formula sheet', 'Graphing calculator', 'Practice worksheets'],
        learningMaterial: {
          title: "Quadratic Equations Mastery",
          content: `
# Quadratic Equations

## Standard Form
ax¬≤ + bx + c = 0

## Methods to Solve

### 1. Factoring
- Look for common factors
- Use difference of squares
- Factor by grouping

### 2. Quadratic Formula
x = (-b ¬± ‚àö(b¬≤ - 4ac)) / 2a

### 3. Completing the Square
- Move constant to other side
- Add (b/2)¬≤ to both sides
- Factor the perfect square

## Discriminant
Œî = b¬≤ - 4ac
- If Œî > 0: Two real solutions
- If Œî = 0: One real solution
- If Œî < 0: No real solutions

## Examples

### Example 1: Factoring
x¬≤ - 5x + 6 = 0
(x - 2)(x - 3) = 0
x = 2 or x = 3

### Example 2: Quadratic Formula
2x¬≤ + 3x - 1 = 0
a = 2, b = 3, c = -1
x = (-3 ¬± ‚àö(9 + 8)) / 4
x = (-3 ¬± ‚àö17) / 4
          `,
          readingTime: "12-15 minutes",
          keyPoints: [
            "Three methods to solve quadratics",
            "Quadratic formula and discriminant",
            "Factoring techniques",
            "Graphical interpretation"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Factoring Method',
            type: 'multiple-choice',
            question: 'What are the solutions to x¬≤ - 4 = 0?',
            options: ['x = ¬±2', 'x = ¬±4', 'x = 2', 'x = -2'],
            correctAnswer: 0,
            explanation: 'This is a difference of squares: (x - 2)(x + 2) = 0, so x = ¬±2'
          },
          {
            id: 'step-2',
            title: 'Quadratic Formula',
            type: 'text-input',
            question: 'Use the quadratic formula to solve x¬≤ + 2x - 3 = 0',
            placeholder: 'Enter your answer...',
            correctAnswers: ['x = 1, x = -3', 'x = 1 or x = -3'],
            explanation: 'Using the formula: x = (-2 ¬± ‚àö(4 + 12))/2 = (-2 ¬± 4)/2, so x = 1 or x = -3'
          },
          {
            id: 'step-3',
            title: 'Discriminant',
            type: 'multiple-choice',
            question: 'How many real solutions does x¬≤ + 2x + 1 = 0 have?',
            options: ['0', '1', '2', 'Infinite'],
            correctAnswer: 1,
            explanation: 'The discriminant is 4 - 4 = 0, so there is exactly one real solution'
          },
          {
            id: 'step-4',
            title: 'Completing the Square',
            type: 'multiple-choice',
            question: 'What is the vertex form of x¬≤ + 6x + 5?',
            options: ['(x + 3)¬≤ - 4', '(x + 3)¬≤ + 4', '(x - 3)¬≤ - 4', '(x - 3)¬≤ + 4'],
            correctAnswer: 0,
            explanation: 'Complete the square: x¬≤ + 6x + 9 - 9 + 5 = (x + 3)¬≤ - 4'
          },
          {
            id: 'step-5',
            title: 'Word Problems',
            type: 'multiple-choice',
            question: 'A ball is thrown upward with velocity 20 m/s. When does it reach 15m height? (h = -5t¬≤ + 20t)',
            options: ['t = 1s and t = 3s', 't = 2s only', 't = 1s only', 'Never'],
            correctAnswer: 0,
            explanation: 'Set h = 15: -5t¬≤ + 20t = 15, so -5t¬≤ + 20t - 15 = 0, which gives t = 1s and t = 3s'
          }
        ]
      },
      'quest-3': {
        id: 'quest-3',
        title: 'Systems of Equations',
        description: 'Master solving systems of linear equations',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 200,
        goldReward: 100,
        icon: 'üîó',
        timeEstimate: '60 min',
        skills: ['algebra', 'systems', 'problem-solving'],
        requirements: ['quest-1'],
        deliverables: [
          {
            type: 'system-solving',
            description: 'Solve 6 systems of equations',
            format: 'text'
          }
        ],
        resources: ['Graphing paper', 'Calculator', 'System solving guide'],
        learningMaterial: {
          title: "Systems of Linear Equations",
          content: `
# Systems of Linear Equations

## What is a System?
A system of equations is a collection of two or more equations with the same variables.

## Methods to Solve

### 1. Substitution Method
- Solve one equation for one variable
- Substitute into the other equation
- Solve for the remaining variable

### 2. Elimination Method
- Multiply equations to get opposite coefficients
- Add or subtract equations to eliminate a variable
- Solve for the remaining variable

### 3. Graphing Method
- Graph both equations
- Find the intersection point
- Read the solution from the graph

## Types of Solutions
- **One solution**: Lines intersect at one point
- **No solution**: Lines are parallel (never intersect)
- **Infinite solutions**: Lines are the same

## Examples

### Example 1: Substitution
x + y = 5
2x - y = 1

From first equation: y = 5 - x
Substitute: 2x - (5 - x) = 1
2x - 5 + x = 1
3x = 6
x = 2, so y = 3

### Example 2: Elimination
3x + 2y = 7
2x - 2y = 2

Add equations: 5x = 9
x = 9/5, substitute to find y
          `,
          readingTime: "15-20 minutes",
          keyPoints: [
            "Three methods to solve systems",
            "Substitution and elimination techniques",
            "Types of solutions",
            "Real-world applications"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Substitution Method',
            type: 'multiple-choice',
            question: 'What is the solution to: x + y = 4, x - y = 2?',
            options: ['x = 3, y = 1', 'x = 1, y = 3', 'x = 2, y = 2', 'No solution'],
            correctAnswer: 0,
            explanation: 'Add the equations: 2x = 6, so x = 3. Then 3 + y = 4, so y = 1'
          },
          {
            id: 'step-2',
            title: 'Elimination Method',
            type: 'text-input',
            question: 'Solve by elimination: 2x + 3y = 7, 4x - 3y = 5',
            placeholder: 'Enter as x=..., y=...',
            correctAnswers: ['x = 2, y = 1', 'x=2, y=1'],
            explanation: 'Add equations: 6x = 12, so x = 2. Then 2(2) + 3y = 7, so 3y = 3, y = 1'
          },
          {
            id: 'step-3',
            title: 'No Solution Case',
            type: 'multiple-choice',
            question: 'How many solutions does this system have: x + y = 3, x + y = 5?',
            options: ['One', 'Two', 'None', 'Infinite'],
            correctAnswer: 2,
            explanation: 'These are parallel lines (same slope, different y-intercepts), so they never intersect'
          },
          {
            id: 'step-4',
            title: 'Infinite Solutions',
            type: 'multiple-choice',
            question: 'How many solutions does this system have: 2x + 4y = 6, x + 2y = 3?',
            options: ['One', 'Two', 'None', 'Infinite'],
            correctAnswer: 3,
            explanation: 'The second equation is half of the first, so they represent the same line'
          },
          {
            id: 'step-5',
            title: 'Word Problem',
            type: 'multiple-choice',
            question: 'A theater sells adult tickets for $8 and child tickets for $5. If 100 tickets are sold for $650, how many adult tickets were sold?',
            options: ['50', '75', '25', '80'],
            correctAnswer: 0,
            explanation: 'Let a = adult tickets, c = child tickets. Then a + c = 100 and 8a + 5c = 650. Solving gives a = 50'
          }
        ]
      }
    },
    geometry: {
      'quest-1': {
        id: 'quest-1',
        title: 'Basic Geometric Shapes',
        description: 'Learn fundamental geometric shapes and their properties',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 80,
        goldReward: 40,
        icon: 'üî∫',
        timeEstimate: '25 min',
        skills: ['geometry', 'shapes'],
        requirements: [],
        deliverables: [
          {
            type: 'shape-identification',
            description: 'Identify and classify 15 shapes',
            format: 'visual'
          }
        ],
        resources: ['Shape flashcards', 'Drawing tools', 'Geometry textbook'],
        learningMaterial: {
          title: "Basic Geometric Shapes",
          content: `
# Basic Geometric Shapes

## Triangles
- **Equilateral**: All sides equal, all angles 60¬∞
- **Isosceles**: Two sides equal, two angles equal
- **Scalene**: All sides different, all angles different
- **Right**: One angle is 90¬∞
- **Acute**: All angles less than 90¬∞
- **Obtuse**: One angle greater than 90¬∞

## Quadrilaterals
- **Square**: All sides equal, all angles 90¬∞
- **Rectangle**: Opposite sides equal, all angles 90¬∞
- **Parallelogram**: Opposite sides parallel and equal
- **Rhombus**: All sides equal, opposite angles equal
- **Trapezoid**: One pair of parallel sides
- **Kite**: Two pairs of adjacent sides equal

## Circles
- **Radius**: Distance from center to edge
- **Diameter**: Distance across circle through center
- **Circumference**: Distance around the circle
- **Area**: œÄ √ó r¬≤

## Polygons
- **Regular**: All sides and angles equal
- **Irregular**: Sides and/or angles not equal
- **Convex**: All interior angles less than 180¬∞
- **Concave**: At least one interior angle greater than 180¬∞

## Key Formulas
- **Triangle Area**: (1/2) √ó base √ó height
- **Rectangle Area**: length √ó width
- **Circle Area**: œÄ √ó r¬≤
- **Circle Circumference**: 2œÄ √ó r
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Types of triangles and their properties",
            "Quadrilateral classifications",
            "Circle terminology and formulas",
            "Regular vs irregular polygons"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Triangle Types',
            type: 'multiple-choice',
            question: 'What type of triangle has all sides equal?',
            options: ['Equilateral', 'Isosceles', 'Scalene', 'Right'],
            correctAnswer: 0,
            explanation: 'An equilateral triangle has all three sides equal and all angles equal to 60¬∞'
          },
          {
            id: 'step-2',
            title: 'Quadrilateral Properties',
            type: 'multiple-choice',
            question: 'Which quadrilateral has opposite sides parallel and equal?',
            options: ['Square', 'Rectangle', 'Parallelogram', 'All of the above'],
            correctAnswer: 3,
            explanation: 'Squares, rectangles, and parallelograms all have opposite sides parallel and equal'
          },
          {
            id: 'step-3',
            title: 'Circle Properties',
            type: 'multiple-choice',
            question: 'What is the relationship between radius and diameter?',
            options: ['Diameter = 2 √ó radius', 'Radius = 2 √ó diameter', 'They are equal', 'No relationship'],
            correctAnswer: 0,
            explanation: 'The diameter is always twice the radius: d = 2r'
          },
          {
            id: 'step-4',
            title: 'Area Calculations',
            type: 'text-input',
            question: 'What is the area of a circle with radius 5?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['25œÄ', '78.54', '25œÄ units¬≤'],
            explanation: 'Area = œÄ √ó r¬≤ = œÄ √ó 5¬≤ = 25œÄ'
          },
          {
            id: 'step-5',
            title: 'Shape Classification',
            type: 'multiple-choice',
            question: 'A shape with 6 equal sides and equal angles is called:',
            options: ['Regular hexagon', 'Irregular hexagon', 'Regular pentagon', 'Square'],
            correctAnswer: 0,
            explanation: 'A regular hexagon has 6 equal sides and 6 equal angles'
          }
        ]
      }
    },
    calculus: {
      'quest-1': {
        id: 'quest-1',
        title: 'Introduction to Limits',
        description: 'Understand the fundamental concept of limits in calculus',
        type: 'quest',
        difficulty: 'advanced',
        xpReward: 250,
        goldReward: 125,
        icon: '‚àû',
        timeEstimate: '90 min',
        skills: ['calculus', 'limits', 'analysis'],
        requirements: ['mathematics.algebra.quest-2'],
        deliverables: [
          {
            type: 'limit-calculations',
            description: 'Calculate 12 different limits',
            format: 'text'
          }
        ],
        resources: ['Calculus textbook', 'Graphing software', 'Limit practice problems'],
        learningMaterial: {
          title: "Introduction to Limits",
          content: `
# Introduction to Limits

## What is a Limit?
A limit describes the behavior of a function as the input approaches a particular value.

## Notation
lim(x‚Üía) f(x) = L

## Types of Limits

### 1. Direct Substitution
If f(a) exists, then lim(x‚Üía) f(x) = f(a)

### 2. Factoring
When direct substitution gives 0/0, try factoring

### 3. Rationalizing
For expressions with radicals, multiply by conjugate

### 4. L'H√¥pital's Rule
For 0/0 or ‚àû/‚àû forms, take derivatives

## Limit Laws
1. lim(x‚Üía) [f(x) + g(x)] = lim(x‚Üía) f(x) + lim(x‚Üía) g(x)
2. lim(x‚Üía) [f(x) √ó g(x)] = lim(x‚Üía) f(x) √ó lim(x‚Üía) g(x)
3. lim(x‚Üía) [f(x)/g(x)] = lim(x‚Üía) f(x) / lim(x‚Üía) g(x)

## Special Limits
- lim(x‚Üí0) sin(x)/x = 1
- lim(x‚Üí‚àû) (1 + 1/x)^x = e
- lim(x‚Üí0) (e^x - 1)/x = 1

## Examples

### Example 1: Direct Substitution
lim(x‚Üí2) (x¬≤ + 3x - 1) = 2¬≤ + 3(2) - 1 = 4 + 6 - 1 = 9

### Example 2: Factoring
lim(x‚Üí3) (x¬≤ - 9)/(x - 3) = lim(x‚Üí3) (x + 3)(x - 3)/(x - 3) = lim(x‚Üí3) (x + 3) = 6

### Example 3: Rationalizing
lim(x‚Üí0) (‚àö(x + 4) - 2)/x
Multiply by conjugate: (‚àö(x + 4) + 2)/(‚àö(x + 4) + 2)
= lim(x‚Üí0) (x + 4 - 4)/[x(‚àö(x + 4) + 2)] = lim(x‚Üí0) x/[x(‚àö(x + 4) + 2)] = 1/4
          `,
          readingTime: "20-25 minutes",
          keyPoints: [
            "Definition and notation of limits",
            "Limit laws and properties",
            "Techniques for evaluating limits",
            "Special limits and their applications"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Direct Substitution',
            type: 'multiple-choice',
            question: 'What is lim(x‚Üí3) (2x + 1)?',
            options: ['7', '6', '5', '8'],
            correctAnswer: 0,
            explanation: 'Direct substitution: 2(3) + 1 = 6 + 1 = 7'
          },
          {
            id: 'step-2',
            title: 'Factoring Method',
            type: 'text-input',
            question: 'Find lim(x‚Üí2) (x¬≤ - 4)/(x - 2)',
            placeholder: 'Enter your answer...',
            correctAnswers: ['4'],
            explanation: 'Factor: (x - 2)(x + 2)/(x - 2) = x + 2, so lim(x‚Üí2) (x + 2) = 4'
          },
          {
            id: 'step-3',
            title: 'Special Limits',
            type: 'multiple-choice',
            question: 'What is lim(x‚Üí0) sin(x)/x?',
            options: ['0', '1', '‚àû', 'Undefined'],
            correctAnswer: 1,
            explanation: 'This is a fundamental limit: lim(x‚Üí0) sin(x)/x = 1'
          },
          {
            id: 'step-4',
            title: 'Limit Laws',
            type: 'multiple-choice',
            question: 'If lim(x‚Üía) f(x) = 3 and lim(x‚Üía) g(x) = 2, what is lim(x‚Üía) [f(x) + g(x)]?',
            options: ['5', '6', '1', 'Cannot determine'],
            correctAnswer: 0,
            explanation: 'Using the sum law: lim(x‚Üía) [f(x) + g(x)] = 3 + 2 = 5'
          },
          {
            id: 'step-5',
            title: 'Rationalizing',
            type: 'text-input',
            question: 'Find lim(x‚Üí0) (‚àö(x + 1) - 1)/x',
            placeholder: 'Enter your answer...',
            correctAnswers: ['1/2', '0.5'],
            explanation: 'Multiply by conjugate: (‚àö(x + 1) + 1)/(‚àö(x + 1) + 1), then simplify to get 1/2'
          }
        ]
      }
    }
  },

  // ==================== Áâ©ÁêÜÂ≠¶‰π†Ë∑ØÂæÑ ====================
  physics: {
    mechanics: {
      'quest-1': {
        id: 'quest-1',
        title: "Newton's Laws of Motion",
        description: 'Master the three fundamental laws that govern motion',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: '‚ö°',
        timeEstimate: '45 min',
        skills: ['physics', 'mechanics', 'problem-solving'],
        requirements: [],
        deliverables: [
          {
            type: 'physics-problems',
            description: 'Solve motion problems using Newton\'s laws',
            format: 'text'
          }
        ],
        resources: ['Physics textbook', 'Interactive simulations', 'Problem sets'],
        learningMaterial: {
          title: "Newton's Laws of Motion",
          content: `
# Newton's Laws of Motion

## First Law (Law of Inertia)
**An object at rest stays at rest, and an object in motion stays in motion, unless acted upon by an external force.**

### Key Points:
- Objects resist changes in their state of motion
- Inertia is the tendency to resist acceleration
- No net force means no acceleration

## Second Law (F = ma)
**Force equals mass times acceleration.**

### Formula: F = ma
- F = net force (N)
- m = mass (kg)
- a = acceleration (m/s¬≤)

### Applications:
- Heavier objects need more force to accelerate
- Same force on lighter objects creates more acceleration
- Force and acceleration are in the same direction

## Third Law (Action-Reaction)
**For every action, there is an equal and opposite reaction.**

### Key Points:
- Forces always come in pairs
- Action and reaction forces are equal in magnitude
- Action and reaction forces are opposite in direction
- Forces act on different objects

## Real-World Examples

### First Law Examples:
- Car suddenly stopping, passengers lurch forward
- Spacecraft coasting through space
- Hockey puck sliding on ice

### Second Law Examples:
- Pushing a shopping cart (more mass = more force needed)
- Car acceleration (more force = more acceleration)
- Rocket launch (thrust force overcomes gravity)

### Third Law Examples:
- Walking (foot pushes ground, ground pushes foot)
- Swimming (arms push water, water pushes arms)
- Rocket propulsion (gas pushes rocket, rocket pushes gas)

## Problem-Solving Strategy
1. Identify all forces acting on the object
2. Draw a free-body diagram
3. Apply Newton's second law: Œ£F = ma
4. Solve for the unknown quantity
5. Check if the answer makes sense
          `,
          readingTime: "15-20 minutes",
          keyPoints: [
            "First Law: Objects resist changes in motion",
            "Second Law: F = ma relationship",
            "Third Law: Action-reaction pairs",
            "Real-world applications of Newton's laws"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'First Law',
            type: 'multiple-choice',
            question: 'What does Newton\'s First Law state?',
            options: [
              'Force equals mass times acceleration',
              'An object at rest stays at rest unless acted upon by an external force',
              'For every action there is an equal reaction',
              'Energy is conserved'
            ],
            correctAnswer: 1,
            explanation: 'Newton\'s First Law states that an object at rest stays at rest, and an object in motion stays in motion, unless acted upon by an external force.'
          },
          {
            id: 'step-2',
            title: 'Second Law',
            type: 'multiple-choice',
            question: 'What is the formula for Newton\'s Second Law?',
            options: ['F = ma', 'E = mc¬≤', 'v = d/t', 'P = mv'],
            correctAnswer: 0,
            explanation: 'Newton\'s Second Law states that Force equals mass times acceleration (F = ma).'
          },
          {
            id: 'step-3',
            title: 'Third Law',
            type: 'multiple-choice',
            question: 'What does Newton\'s Third Law state?',
            options: [
              'Force equals mass times acceleration',
              'An object at rest stays at rest',
              'For every action there is an equal and opposite reaction',
              'Energy is conserved'
            ],
            correctAnswer: 2,
            explanation: 'Newton\'s Third Law states that for every action, there is an equal and opposite reaction.'
          },
          {
            id: 'step-4',
            title: 'Force Applications',
            type: 'multiple-choice',
            question: 'If a 2kg object accelerates at 3 m/s¬≤, what force is applied?',
            options: ['6 N', '5 N', '1.5 N', '9 N'],
            correctAnswer: 0,
            explanation: 'Using F = ma: F = 2 kg √ó 3 m/s¬≤ = 6 N'
          },
          {
            id: 'step-5',
            title: 'Action-Reaction',
            type: 'multiple-choice',
            question: 'When you walk, what is the action-reaction pair?',
            options: [
              'Your foot pushes forward, air pushes back',
              'Your foot pushes down on ground, ground pushes up on foot',
              'Your leg moves forward, your body moves backward',
              'Gravity pulls you down, ground pushes you up'
            ],
            correctAnswer: 1,
            explanation: 'When walking, your foot pushes down and backward on the ground, and the ground pushes up and forward on your foot.'
          }
        ]
      }
    },
    thermodynamics: {
      'quest-1': {
        id: 'quest-1',
        title: 'Heat and Temperature',
        description: 'Understand the difference between heat and temperature',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 120,
        goldReward: 60,
        icon: 'üå°Ô∏è',
        timeEstimate: '40 min',
        skills: ['physics', 'thermodynamics', 'energy'],
        requirements: [],
        deliverables: [
          {
            type: 'heat-calculations',
            description: 'Calculate heat transfer problems',
            format: 'text'
          }
        ],
        resources: ['Thermodynamics textbook', 'Temperature scales chart', 'Heat transfer examples'],
        learningMaterial: {
          title: "Heat and Temperature Fundamentals",
          content: `
# Heat and Temperature

## Key Differences

### Temperature
- **Definition**: Measure of average kinetic energy of particles
- **Units**: Celsius (¬∞C), Fahrenheit (¬∞F), Kelvin (K)
- **Property**: Intensive (doesn't depend on amount)
- **Symbol**: T

### Heat
- **Definition**: Energy transfer due to temperature difference
- **Units**: Joules (J), calories (cal)
- **Property**: Extensive (depends on amount)
- **Symbol**: Q

## Temperature Scales

### Celsius to Fahrenheit
F = (9/5)C + 32

### Celsius to Kelvin
K = C + 273.15

### Fahrenheit to Celsius
C = (5/9)(F - 32)

## Heat Transfer

### Conduction
- Heat transfer through direct contact
- Example: Metal spoon in hot soup
- Formula: Q = kA(ŒîT/L)t

### Convection
- Heat transfer through fluid motion
- Example: Hot air rising, cold air sinking
- Natural and forced convection

### Radiation
- Heat transfer through electromagnetic waves
- Example: Sun warming Earth
- No medium required

## Heat Capacity
Q = mcŒîT
- Q = heat energy (J)
- m = mass (kg)
- c = specific heat capacity (J/kg¬∑K)
- ŒîT = temperature change (K)

## Specific Heat Capacities
- Water: 4186 J/kg¬∑K
- Aluminum: 900 J/kg¬∑K
- Iron: 450 J/kg¬∑K
- Copper: 385 J/kg¬∑K

## Examples

### Example 1: Temperature Conversion
Convert 25¬∞C to Fahrenheit and Kelvin:
- F = (9/5)(25) + 32 = 45 + 32 = 77¬∞F
- K = 25 + 273.15 = 298.15 K

### Example 2: Heat Calculation
How much heat is needed to raise 2 kg of water from 20¬∞C to 80¬∞C?
Q = mcŒîT = (2 kg)(4186 J/kg¬∑K)(60 K) = 502,320 J = 502.32 kJ
          `,
          readingTime: "12-15 minutes",
          keyPoints: [
            "Temperature vs heat distinction",
            "Temperature scale conversions",
            "Three methods of heat transfer",
            "Heat capacity calculations"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Temperature vs Heat',
            type: 'multiple-choice',
            question: 'What is the main difference between temperature and heat?',
            options: [
              'Temperature is energy, heat is not',
              'Heat is energy transfer, temperature is average kinetic energy',
              'They are the same thing',
              'Temperature is measured in Joules'
            ],
            correctAnswer: 1,
            explanation: 'Heat is energy transfer due to temperature difference, while temperature measures average kinetic energy of particles.'
          },
          {
            id: 'step-2',
            title: 'Temperature Conversion',
            type: 'text-input',
            question: 'Convert 100¬∞C to Fahrenheit',
            placeholder: 'Enter your answer...',
            correctAnswers: ['212¬∞F', '212'],
            explanation: 'F = (9/5)(100) + 32 = 180 + 32 = 212¬∞F'
          },
          {
            id: 'step-3',
            title: 'Heat Transfer Methods',
            type: 'multiple-choice',
            question: 'Which method of heat transfer requires a medium?',
            options: ['Conduction', 'Convection', 'Radiation', 'All of them'],
            correctAnswer: 2,
            explanation: 'Radiation is the only method that does not require a medium - it can transfer heat through vacuum.'
          },
          {
            id: 'step-4',
            title: 'Heat Capacity',
            type: 'text-input',
            question: 'How much heat is needed to raise 1 kg of water by 10¬∞C?',
            placeholder: 'Enter your answer in Joules...',
            correctAnswers: ['41860 J', '41.86 kJ'],
            explanation: 'Q = mcŒîT = (1 kg)(4186 J/kg¬∑K)(10 K) = 41,860 J'
          },
          {
            id: 'step-5',
            title: 'Specific Heat',
            type: 'multiple-choice',
            question: 'Which material has the highest specific heat capacity?',
            options: ['Water', 'Aluminum', 'Iron', 'Copper'],
            correctAnswer: 0,
            explanation: 'Water has the highest specific heat capacity at 4186 J/kg¬∑K, making it excellent for temperature regulation.'
          }
        ]
      }
    }
  },

  // ==================== ÂåñÂ≠¶Â≠¶‰π†Ë∑ØÂæÑ ====================
  chemistry: {
    organic: {
      'quest-1': {
        id: 'quest-1',
        title: 'Organic Compounds',
        description: 'Learn about carbon-based molecules and their properties',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üß¨',
        timeEstimate: '30 min',
        skills: ['chemistry', 'organic-compounds', 'carbon-chemistry'],
        requirements: [],
        deliverables: [
          {
            type: 'molecular-structures',
            description: 'Draw and identify organic compounds',
            format: 'diagram'
          }
        ],
        resources: ['Chemistry textbook', 'Molecular models', 'Interactive tools'],
        learningMaterial: {
          title: "Organic Compounds Fundamentals",
          content: `
# Introduction to Organic Compounds

## What are Organic Compounds?
Organic compounds are carbon-based molecules that form the basis of all living things and many synthetic materials.

## Carbon Chemistry

### Why Carbon is Special
- **Four valence electrons**: Can form 4 covalent bonds
- **Versatile bonding**: Single, double, and triple bonds
- **Chain formation**: Can form long chains and rings
- **Isomerism**: Same formula, different structures

### Functional Groups
- **Hydroxyl (-OH)**: Alcohols
- **Carbonyl (C=O)**: Aldehydes and ketones
- **Carboxyl (-COOH)**: Acids
- **Amino (-NH2)**: Amines

## Types of Organic Compounds

### Hydrocarbons
- **Alkanes**: Single bonds (methane, ethane)
- **Alkenes**: Double bonds (ethene, propene)
- **Alkynes**: Triple bonds (ethyne, propyne)
- **Aromatics**: Benzene rings

### Biomolecules
- **Carbohydrates**: Sugars and starches
- **Proteins**: Amino acid chains
- **Lipids**: Fats and oils
- **Nucleic acids**: DNA and RNA

### Industrial Applications
- **Pharmaceuticals**: Medicine development
- **Plastics**: Polymer chemistry
- **Fuels**: Petroleum products
- **Materials**: Synthetic fibers
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Carbon can form 4 covalent bonds",
            "Functional groups determine properties",
            "Organic compounds are essential for life",
            "Industrial applications of organic chemistry"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Carbon Chemistry',
            type: 'multiple-choice',
            question: 'How many bonds can carbon form?',
            options: ['2', '3', '4', '6'],
            correctAnswer: 2,
            explanation: 'Carbon can form 4 covalent bonds, allowing it to create complex organic molecules.'
          },
          {
            id: 'step-2',
            title: 'Functional Groups',
            type: 'multiple-choice',
            question: 'Which functional group is found in alcohols?',
            options: ['-COOH', '-OH', '-NH2', '-CHO'],
            correctAnswer: 1,
            explanation: 'The hydroxyl group (-OH) is characteristic of alcohols.'
          },
          {
            id: 'step-3',
            title: 'Hydrocarbon Types',
            type: 'multiple-choice',
            question: 'What type of hydrocarbon has only single bonds?',
            options: ['Alkene', 'Alkyne', 'Alkane', 'Aromatic'],
            correctAnswer: 2,
            explanation: 'Alkanes have only single bonds between carbon atoms.'
          },
          {
            id: 'step-4',
            title: 'Biomolecules',
            type: 'text-input',
            question: 'What type of biomolecule includes sugars and starches?',
            correctAnswer: 'carbohydrates',
            explanation: 'Carbohydrates are biomolecules that include sugars, starches, and cellulose.'
          },
          {
            id: 'step-5',
            title: 'Industrial Applications',
            type: 'multiple-choice',
            question: 'Which organic compound is used to make plastics?',
            options: ['Methane', 'Ethylene', 'Benzene', 'All of the above'],
            correctAnswer: 3,
            explanation: 'Many organic compounds, including ethylene and benzene derivatives, are used in plastic production.'
          }
        ]
      }
    },
    organic: {
      'quest-1': {
        id: 'quest-1',
        title: 'Organic Compounds',
        description: 'Learn about carbon-based molecules and their properties',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üß¨',
        timeEstimate: '30 min',
        skills: ['chemistry', 'organic-compounds', 'carbon-chemistry'],
        requirements: [],
        deliverables: [
          {
            type: 'molecular-structures',
            description: 'Draw and identify organic compounds',
            format: 'diagram'
          }
        ],
        resources: ['Chemistry textbook', 'Molecular models', 'Interactive tools'],
        learningMaterial: {
          title: "Organic Compounds Fundamentals",
          content: `
# Introduction to Organic Compounds

## What are Organic Compounds?
Organic compounds are carbon-based molecules that form the basis of all living things and many synthetic materials.

## Carbon Chemistry

### Why Carbon is Special
- **Four valence electrons**: Can form 4 covalent bonds
- **Versatile bonding**: Single, double, and triple bonds
- **Chain formation**: Can form long chains and rings
- **Isomerism**: Same formula, different structures

### Functional Groups
- **Hydroxyl (-OH)**: Alcohols
- **Carbonyl (C=O)**: Aldehydes and ketones
- **Carboxyl (-COOH)**: Acids
- **Amino (-NH2)**: Amines

## Types of Organic Compounds

### Hydrocarbons
- **Alkanes**: Single bonds (methane, ethane)
- **Alkenes**: Double bonds (ethene, propene)
- **Alkynes**: Triple bonds (ethyne, propyne)
- **Aromatics**: Benzene rings

### Biomolecules
- **Carbohydrates**: Sugars and starches
- **Proteins**: Amino acid chains
- **Lipids**: Fats and oils
- **Nucleic acids**: DNA and RNA

### Industrial Applications
- **Pharmaceuticals**: Medicine development
- **Plastics**: Polymer chemistry
- **Fuels**: Petroleum products
- **Materials**: Synthetic fibers
          `,
          readingTime: "10-15 minutes",
          keyPoints: [
            "Carbon can form 4 covalent bonds",
            "Functional groups determine properties",
            "Organic compounds are essential for life",
            "Industrial applications of organic chemistry"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Carbon Chemistry',
            type: 'multiple-choice',
            question: 'How many bonds can carbon form?',
            options: ['2', '3', '4', '6'],
            correctAnswer: 2,
            explanation: 'Carbon can form 4 covalent bonds, allowing it to create complex organic molecules.'
          },
          {
            id: 'step-2',
            title: 'Functional Groups',
            type: 'multiple-choice',
            question: 'Which functional group is found in alcohols?',
            options: ['-COOH', '-OH', '-NH2', '-CHO'],
            correctAnswer: 1,
            explanation: 'The hydroxyl group (-OH) is characteristic of alcohols.'
          },
          {
            id: 'step-3',
            title: 'Hydrocarbon Types',
            type: 'multiple-choice',
            question: 'What type of hydrocarbon has only single bonds?',
            options: ['Alkene', 'Alkyne', 'Alkane', 'Aromatic'],
            correctAnswer: 2,
            explanation: 'Alkanes have only single bonds between carbon atoms.'
          },
          {
            id: 'step-4',
            title: 'Biomolecules',
            type: 'text-input',
            question: 'What type of biomolecule includes sugars and starches?',
            correctAnswer: 'carbohydrates',
            explanation: 'Carbohydrates are biomolecules that include sugars, starches, and cellulose.'
          },
          {
            id: 'step-5',
            title: 'Industrial Applications',
            type: 'multiple-choice',
            question: 'Which organic compound is used to make plastics?',
            options: ['Methane', 'Ethylene', 'Benzene', 'All of the above'],
            correctAnswer: 3,
            explanation: 'Many organic compounds, including ethylene and benzene derivatives, are used in plastic production.'
          }
        ]
      }
    },
    atomic_structure: {
      'quest-1': {
        id: 'quest-1',
        title: 'Atomic Structure and Periodic Table',
        description: 'Learn about atoms, electrons, and the periodic table',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: '‚öõÔ∏è',
        timeEstimate: '35 min',
        skills: ['chemistry', 'atomic-theory', 'periodic-table'],
        requirements: [],
        deliverables: [
          {
            type: 'atomic-diagrams',
            description: 'Draw atomic structures for 10 elements',
            format: 'visual'
          }
        ],
        resources: ['Periodic table', 'Atomic model kit', 'Chemistry textbook'],
        learningMaterial: {
          title: "Atomic Structure and Periodic Table",
          content: `
# Atomic Structure and Periodic Table

## Atomic Structure

### Subatomic Particles
- **Protons**: Positive charge, in nucleus, mass ‚âà 1 amu
- **Neutrons**: No charge, in nucleus, mass ‚âà 1 amu  
- **Electrons**: Negative charge, in electron cloud, mass ‚âà 0 amu

### Atomic Number and Mass
- **Atomic Number (Z)**: Number of protons (identifies element)
- **Mass Number (A)**: Protons + neutrons
- **Atomic Mass**: Average mass of isotopes

## Electron Configuration

### Energy Levels (Shells)
- **n = 1**: 2 electrons maximum
- **n = 2**: 8 electrons maximum
- **n = 3**: 18 electrons maximum
- **n = 4**: 32 electrons maximum

### Subshells
- **s subshell**: 2 electrons, spherical
- **p subshell**: 6 electrons, dumbbell-shaped
- **d subshell**: 10 electrons, complex shapes
- **f subshell**: 14 electrons, very complex shapes

## Periodic Table Organization

### Periods (Rows)
- Elements with same number of electron shells
- 7 periods total

### Groups (Columns)
- Elements with same number of valence electrons
- Similar chemical properties

### Major Groups
- **Group 1**: Alkali metals (1 valence electron)
- **Group 2**: Alkaline earth metals (2 valence electrons)
- **Group 17**: Halogens (7 valence electrons)
- **Group 18**: Noble gases (8 valence electrons)

## Periodic Trends

### Atomic Radius
- Decreases across period (left to right)
- Increases down group (top to bottom)

### Ionization Energy
- Increases across period (left to right)
- Decreases down group (top to bottom)

### Electronegativity
- Increases across period (left to right)
- Decreases down group (top to bottom)

## Examples

### Example 1: Carbon (C)
- Atomic number: 6
- Protons: 6, Neutrons: 6, Electrons: 6
- Electron configuration: 1s¬≤ 2s¬≤ 2p¬≤
- Group 14, Period 2

### Example 2: Sodium (Na)
- Atomic number: 11
- Protons: 11, Neutrons: 12, Electrons: 11
- Electron configuration: 1s¬≤ 2s¬≤ 2p‚Å∂ 3s¬π
- Group 1, Period 3
          `,
          readingTime: "15-20 minutes",
          keyPoints: [
            "Three subatomic particles and their properties",
            "Electron configuration rules",
            "Periodic table organization",
            "Periodic trends and their explanations"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Subatomic Particles',
            type: 'multiple-choice',
            question: 'Which subatomic particle has a positive charge?',
            options: ['Proton', 'Neutron', 'Electron', 'Ion'],
            correctAnswer: 0,
            explanation: 'Protons have a positive charge and are located in the nucleus of the atom.'
          },
          {
            id: 'step-2',
            title: 'Atomic Number',
            type: 'text-input',
            question: 'How many protons does an atom with atomic number 8 have?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['8'],
            explanation: 'The atomic number equals the number of protons in the nucleus.'
          },
          {
            id: 'step-3',
            title: 'Electron Configuration',
            type: 'multiple-choice',
            question: 'What is the electron configuration of helium (He)?',
            options: ['1s¬π', '1s¬≤', '1s¬≤ 2s¬π', '2s¬≤'],
            correctAnswer: 1,
            explanation: 'Helium has 2 electrons, both in the 1s orbital: 1s¬≤'
          },
          {
            id: 'step-4',
            title: 'Periodic Groups',
            type: 'multiple-choice',
            question: 'Which group contains the noble gases?',
            options: ['Group 1', 'Group 17', 'Group 18', 'Group 2'],
            correctAnswer: 2,
            explanation: 'Group 18 contains the noble gases, which have 8 valence electrons and are very stable.'
          },
          {
            id: 'step-5',
            title: 'Periodic Trends',
            type: 'multiple-choice',
            question: 'Which element has the highest electronegativity?',
            options: ['Lithium', 'Carbon', 'Fluorine', 'Neon'],
            correctAnswer: 2,
            explanation: 'Fluorine has the highest electronegativity of all elements, making it very reactive.'
          }
        ]
      }
    },
    chemical_bonding: {
      'quest-1': {
        id: 'quest-1',
        title: 'Ionic and Covalent Bonding',
        description: 'Understand how atoms bond to form compounds',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: 'üîó',
        timeEstimate: '50 min',
        skills: ['chemistry', 'bonding', 'molecular-structure'],
        requirements: ['chemistry.atomic_structure.quest-1'],
        deliverables: [
          {
            type: 'bonding-exercises',
            description: 'Identify and draw 8 different chemical bonds',
            format: 'visual'
          }
        ],
        resources: ['Molecular model kit', 'Bonding charts', 'Chemistry textbook'],
        learningMaterial: {
          title: "Ionic and Covalent Bonding",
          content: `
# Ionic and Covalent Bonding

## Ionic Bonding

### Definition
- Transfer of electrons between atoms
- Forms between metals and non-metals
- Creates ions (charged particles)

### Characteristics
- High melting and boiling points
- Conduct electricity when dissolved or molten
- Form crystal lattices
- Brittle solids

### Examples
- **NaCl**: Sodium (metal) + Chlorine (non-metal)
- **CaO**: Calcium (metal) + Oxygen (non-metal)
- **MgCl‚ÇÇ**: Magnesium (metal) + Chlorine (non-metal)

### Formation Process
1. Metal atom loses electron(s) ‚Üí becomes positive ion (cation)
2. Non-metal atom gains electron(s) ‚Üí becomes negative ion (anion)
3. Oppositely charged ions attract ‚Üí ionic bond

## Covalent Bonding

### Definition
- Sharing of electron pairs between atoms
- Forms between non-metals
- Creates molecules

### Characteristics
- Lower melting and boiling points
- Don't conduct electricity (usually)
- Can be gases, liquids, or solids
- Flexible structures

### Examples
- **H‚ÇÇO**: Water molecule
- **CH‚ÇÑ**: Methane molecule
- **CO‚ÇÇ**: Carbon dioxide molecule

### Types of Covalent Bonds
- **Single bond**: 1 shared electron pair
- **Double bond**: 2 shared electron pairs
- **Triple bond**: 3 shared electron pairs

## Bond Polarity

### Nonpolar Covalent
- Equal sharing of electrons
- Same electronegativity
- Example: H‚ÇÇ, Cl‚ÇÇ

### Polar Covalent
- Unequal sharing of electrons
- Different electronegativity
- Example: HCl, H‚ÇÇO

## Lewis Structures

### Rules for Drawing
1. Count total valence electrons
2. Place least electronegative atom in center
3. Connect atoms with single bonds
4. Complete octets with remaining electrons
5. Use multiple bonds if necessary

### Examples

#### Water (H‚ÇÇO)
- Total valence electrons: 2(1) + 6 = 8
- Structure: H-O-H with 2 lone pairs on oxygen

#### Methane (CH‚ÇÑ)
- Total valence electrons: 4 + 4(1) = 8
- Structure: Carbon in center with 4 single bonds to hydrogen

## Electronegativity and Bonding

### Electronegativity Difference
- **> 1.7**: Ionic bond
- **0.4 - 1.7**: Polar covalent bond
- **< 0.4**: Nonpolar covalent bond

### Examples
- **NaCl**: ŒîEN = 3.0 - 0.9 = 2.1 (Ionic)
- **HCl**: ŒîEN = 3.0 - 2.1 = 0.9 (Polar covalent)
- **H‚ÇÇ**: ŒîEN = 2.1 - 2.1 = 0 (Nonpolar covalent)
          `,
          readingTime: "18-22 minutes",
          keyPoints: [
            "Ionic vs covalent bonding mechanisms",
            "Lewis structure drawing rules",
            "Bond polarity and electronegativity",
            "Physical properties of different bond types"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Ionic Bonding',
            type: 'multiple-choice',
            question: 'What happens in ionic bonding?',
            options: [
              'Electrons are shared',
              'Electrons are transferred',
              'Atoms remain unchanged',
              'Protons are exchanged'
            ],
            correctAnswer: 1,
            explanation: 'Ionic bonding involves the transfer of electrons from metal to non-metal atoms.'
          },
          {
            id: 'step-2',
            title: 'Covalent Bonding',
            type: 'multiple-choice',
            question: 'Which type of bonding occurs between two non-metal atoms?',
            options: ['Ionic', 'Covalent', 'Metallic', 'Hydrogen'],
            correctAnswer: 1,
            explanation: 'Covalent bonding occurs between non-metal atoms through sharing of electron pairs.'
          },
          {
            id: 'step-3',
            title: 'Lewis Structures',
            type: 'text-input',
            question: 'How many valence electrons does carbon have?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['4'],
            explanation: 'Carbon is in group 14, so it has 4 valence electrons.'
          },
          {
            id: 'step-4',
            title: 'Bond Polarity',
            type: 'multiple-choice',
            question: 'Which bond is most polar?',
            options: ['H-H', 'H-Cl', 'Cl-Cl', 'C-H'],
            correctAnswer: 1,
            explanation: 'H-Cl has the greatest electronegativity difference, making it the most polar bond.'
          },
          {
            id: 'step-5',
            title: 'Bond Properties',
            type: 'multiple-choice',
            question: 'Which type of bond typically has the highest melting point?',
            options: ['Ionic', 'Covalent', 'Metallic', 'Hydrogen'],
            correctAnswer: 0,
            explanation: 'Ionic bonds typically have the highest melting points due to strong electrostatic attractions.'
          }
        ]
      }
    }
  },

  // ==================== ÁîüÁâ©Â≠¶Â≠¶‰π†Ë∑ØÂæÑ ====================
  biology: {
    cell_biology: {
      'quest-1': {
        id: 'quest-1',
        title: 'Cell Structure and Function',
        description: 'Explore the basic unit of life - the cell',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 90,
        goldReward: 45,
        icon: 'üß¨',
        timeEstimate: '30 min',
        skills: ['biology', 'cell-biology', 'microscopy'],
        requirements: [],
        deliverables: [
          {
            type: 'cell-diagrams',
            description: 'Label cell organelles in diagrams',
            format: 'visual'
          }
        ],
        resources: ['Microscope', 'Cell models', 'Biology textbook'],
        learningMaterial: {
          title: "Cell Structure and Function",
          content: `
# Cell Structure and Function

## Cell Theory
1. All living things are made of cells
2. Cells are the basic unit of life
3. All cells come from pre-existing cells

## Types of Cells

### Prokaryotic Cells
- **No nucleus**: DNA in cytoplasm
- **No membrane-bound organelles**
- **Smaller size** (1-10 Œºm)
- **Examples**: Bacteria, Archaea

### Eukaryotic Cells
- **Has nucleus**: DNA enclosed in nuclear membrane
- **Membrane-bound organelles**
- **Larger size** (10-100 Œºm)
- **Examples**: Plants, animals, fungi, protists

## Cell Organelles

### Nucleus
- **Function**: Control center, contains DNA
- **Structure**: Double membrane with pores
- **Contains**: Chromatin, nucleolus

### Mitochondria
- **Function**: Cellular respiration, ATP production
- **Structure**: Double membrane, inner folds (cristae)
- **Nickname**: "Powerhouse of the cell"

### Chloroplasts (Plant cells only)
- **Function**: Photosynthesis
- **Structure**: Double membrane, contains chlorophyll
- **Contains**: Thylakoids, stroma

### Endoplasmic Reticulum (ER)
- **Rough ER**: Has ribosomes, protein synthesis
- **Smooth ER**: No ribosomes, lipid synthesis

### Golgi Apparatus
- **Function**: Protein modification and packaging
- **Structure**: Stack of flattened membranes
- **Nickname**: "Post office of the cell"

### Ribosomes
- **Function**: Protein synthesis
- **Location**: Free in cytoplasm or attached to ER
- **Structure**: Two subunits (large and small)

### Lysosomes
- **Function**: Digestion, waste removal
- **Contains**: Digestive enzymes
- **Nickname**: "Garbage disposal of the cell"

### Vacuoles
- **Function**: Storage, water balance
- **Plant cells**: Large central vacuole
- **Animal cells**: Small vacuoles

### Cell Wall (Plant cells only)
- **Function**: Support and protection
- **Material**: Cellulose
- **Structure**: Rigid, outside cell membrane

### Cell Membrane
- **Function**: Controls what enters/leaves cell
- **Structure**: Phospholipid bilayer
- **Contains**: Proteins, cholesterol

## Cell Transport

### Passive Transport
- **Diffusion**: Movement from high to low concentration
- **Osmosis**: Water movement across membrane
- **Facilitated diffusion**: Protein-assisted transport

### Active Transport
- **Requires energy (ATP)**
- **Moves against concentration gradient**
- **Examples**: Sodium-potassium pump

## Examples

### Plant Cell vs Animal Cell
- **Plant**: Cell wall, chloroplasts, large vacuole
- **Animal**: No cell wall, no chloroplasts, small vacuoles
- **Both**: Nucleus, mitochondria, ER, Golgi, ribosomes
          `,
          readingTime: "12-15 minutes",
          keyPoints: [
            "Prokaryotic vs eukaryotic cell differences",
            "Major organelles and their functions",
            "Cell membrane structure and transport",
            "Plant vs animal cell differences"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Cell Theory',
            type: 'multiple-choice',
            question: 'Which statement is part of the cell theory?',
            options: [
              'All cells have a nucleus',
              'All living things are made of cells',
              'Cells can only be seen with a microscope',
              'All cells are the same size'
            ],
            correctAnswer: 1,
            explanation: 'The cell theory states that all living things are made of cells.'
          },
          {
            id: 'step-2',
            title: 'Cell Types',
            type: 'multiple-choice',
            question: 'Which type of cell has a nucleus?',
            options: ['Prokaryotic', 'Eukaryotic', 'Both', 'Neither'],
            correctAnswer: 1,
            explanation: 'Eukaryotic cells have a nucleus, while prokaryotic cells do not.'
          },
          {
            id: 'step-3',
            title: 'Organelles',
            type: 'multiple-choice',
            question: 'Which organelle is called the "powerhouse of the cell"?',
            options: ['Nucleus', 'Mitochondria', 'Ribosome', 'Golgi apparatus'],
            correctAnswer: 1,
            explanation: 'Mitochondria are called the powerhouse because they produce ATP through cellular respiration.'
          },
          {
            id: 'step-4',
            title: 'Plant vs Animal Cells',
            type: 'multiple-choice',
            question: 'Which structure is found only in plant cells?',
            options: ['Nucleus', 'Mitochondria', 'Chloroplasts', 'Ribosomes'],
            correctAnswer: 2,
            explanation: 'Chloroplasts are found only in plant cells and are responsible for photosynthesis.'
          },
          {
            id: 'step-5',
            title: 'Cell Transport',
            type: 'multiple-choice',
            question: 'What type of transport requires energy?',
            options: ['Diffusion', 'Osmosis', 'Active transport', 'Facilitated diffusion'],
            correctAnswer: 2,
            explanation: 'Active transport requires energy (ATP) to move substances against their concentration gradient.'
          }
        ]
      }
    },
    genetics: {
      'quest-1': {
        id: 'quest-1',
        title: 'Mendelian Genetics',
        description: 'Learn the basic principles of inheritance',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 180,
        goldReward: 90,
        icon: 'üß¨',
        timeEstimate: '60 min',
        skills: ['biology', 'genetics', 'inheritance'],
        requirements: ['biology.cell_biology.quest-1'],
        deliverables: [
          {
            type: 'punnett-squares',
            description: 'Complete 10 Punnett square problems',
            format: 'visual'
          }
        ],
        resources: ['Genetics textbook', 'Punnett square worksheets', 'Genetic examples'],
        learningMaterial: {
          title: "Mendelian Genetics",
          content: `
# Mendelian Genetics

## Basic Principles

### Genes and Alleles
- **Gene**: Unit of heredity, codes for a trait
- **Allele**: Different versions of a gene
- **Genotype**: Genetic makeup (e.g., AA, Aa, aa)
- **Phenotype**: Physical expression (e.g., tall, short)

### Dominant vs Recessive
- **Dominant allele**: Expressed when present (capital letter)
- **Recessive allele**: Only expressed when homozygous (lowercase letter)
- **Homozygous**: Same alleles (AA or aa)
- **Heterozygous**: Different alleles (Aa)

## Mendel's Laws

### Law of Segregation
- Each parent contributes one allele
- Alleles separate during gamete formation
- Each gamete gets one allele

### Law of Independent Assortment
- Genes for different traits assort independently
- Only applies to genes on different chromosomes
- Creates genetic diversity

## Punnett Squares

### Monohybrid Cross (1 trait)
- Cross between parents differing in one trait
- Example: Tall (T) vs Short (t)
- Genotypic ratio: 1:2:1 (TT:Tt:tt)
- Phenotypic ratio: 3:1 (Tall:Short)

### Dihybrid Cross (2 traits)
- Cross between parents differing in two traits
- Example: Tall/Green vs Short/Yellow
- Genotypic ratio: 1:2:2:4:2:1:2:1:1
- Phenotypic ratio: 9:3:3:1

## Examples

### Example 1: Monohybrid Cross
**Parent 1**: TT (homozygous tall)
**Parent 2**: tt (homozygous short)

**F1 Generation**: All Tt (heterozygous tall)
**F2 Generation**: 1 TT : 2 Tt : 1 tt
**Phenotype**: 3 tall : 1 short

### Example 2: Dihybrid Cross
**Parent 1**: TtGg (tall, green)
**Parent 2**: TtGg (tall, green)

**Possible gametes**: TG, Tg, tG, tg
**F2 Phenotypic ratio**: 9 tall green : 3 tall yellow : 3 short green : 1 short yellow

## Genetic Terminology

### Complete Dominance
- One allele completely masks the other
- Example: Tall (T) completely dominant over short (t)

### Incomplete Dominance
- Heterozygous shows intermediate phenotype
- Example: Red (RR) + White (rr) = Pink (Rr)

### Codominance
- Both alleles expressed equally
- Example: Blood type AB

## Probability in Genetics

### Multiplication Rule
- For independent events: P(A and B) = P(A) √ó P(B)
- Example: Probability of getting TT from Tt √ó Tt = 1/2 √ó 1/2 = 1/4

### Addition Rule
- For mutually exclusive events: P(A or B) = P(A) + P(B)
- Example: Probability of getting Tt = 1/4 + 1/4 = 1/2
          `,
          readingTime: "20-25 minutes",
          keyPoints: [
            "Mendel's laws of inheritance",
            "Punnett square construction and interpretation",
            "Dominant vs recessive traits",
            "Probability calculations in genetics"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Basic Terminology',
            type: 'multiple-choice',
            question: 'What is the difference between genotype and phenotype?',
            options: [
              'They are the same thing',
              'Genotype is genetic makeup, phenotype is physical expression',
              'Phenotype is genetic makeup, genotype is physical expression',
              'Genotype is always dominant'
            ],
            correctAnswer: 1,
            explanation: 'Genotype refers to the genetic makeup (e.g., AA, Aa), while phenotype refers to the physical expression (e.g., tall, short).'
          },
          {
            id: 'step-2',
            title: 'Dominant vs Recessive',
            type: 'multiple-choice',
            question: 'In a cross between Tt and tt, what is the probability of getting tt offspring?',
            options: ['0%', '25%', '50%', '100%'],
            correctAnswer: 2,
            explanation: 'Tt √ó tt gives 1/2 Tt and 1/2 tt, so there is a 50% probability of getting tt offspring.'
          },
          {
            id: 'step-3',
            title: 'Punnett Squares',
            type: 'text-input',
            question: 'What is the genotypic ratio for a cross between Aa and Aa?',
            placeholder: 'Enter as 1:2:1 format...',
            correctAnswers: ['1:2:1', '1 AA : 2 Aa : 1 aa'],
            explanation: 'Aa √ó Aa gives 1 AA : 2 Aa : 1 aa, which is a 1:2:1 genotypic ratio.'
          },
          {
            id: 'step-4',
            title: 'Dihybrid Cross',
            type: 'multiple-choice',
            question: 'What is the phenotypic ratio for a dihybrid cross (AaBb √ó AaBb)?',
            options: ['3:1', '1:2:1', '9:3:3:1', '1:1:1:1'],
            correctAnswer: 2,
            explanation: 'A dihybrid cross between AaBb √ó AaBb gives a 9:3:3:1 phenotypic ratio.'
          },
          {
            id: 'step-5',
            title: 'Probability',
            type: 'multiple-choice',
            question: 'What is the probability of getting Aa from Aa √ó Aa?',
            options: ['1/4', '1/2', '3/4', '1'],
            correctAnswer: 1,
            explanation: 'From Aa √ó Aa, the possible outcomes are 1/4 AA, 1/2 Aa, and 1/4 aa, so the probability of Aa is 1/2.'
          }
        ]
      }
    }
  },

  // ==================== ËÆ°ÁÆóÊú∫ÁßëÂ≠¶Â≠¶‰π†Ë∑ØÂæÑ ====================
  computerScience: {
    programming: {
      'quest-1': {
        id: 'quest-1',
        title: 'Introduction to Python Programming',
        description: 'Learn the fundamentals of Python programming language',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 120,
        goldReward: 60,
        icon: 'üêç',
        timeEstimate: '45 min',
        skills: ['programming', 'python', 'coding'],
        requirements: [],
        deliverables: [
          {
            type: 'coding-exercises',
            description: 'Write 5 Python programs',
            format: 'code'
          }
        ],
        resources: ['Python interpreter', 'Code editor', 'Python tutorial'],
        learningMaterial: {
          title: "Introduction to Python Programming",
          content: `
# Introduction to Python Programming

## What is Python?
Python is a high-level, interpreted programming language known for its simplicity and readability.

## Key Features
- **Simple syntax**: Easy to read and write
- **Interpreted**: No compilation needed
- **Cross-platform**: Runs on Windows, Mac, Linux
- **Large community**: Extensive libraries and support

## Basic Syntax

### Variables
\`\`\`python
name = "Alice"
age = 25
height = 5.6
is_student = True
\`\`\`

### Data Types
- **String**: Text data (e.g., "Hello")
- **Integer**: Whole numbers (e.g., 42)
- **Float**: Decimal numbers (e.g., 3.14)
- **Boolean**: True/False values

### Print Statement
\`\`\`python
print("Hello, World!")
print(f"My name is {name} and I am {age} years old")
\`\`\`

## Control Structures

### If Statements
\`\`\`python
if age >= 18:
    print("You are an adult")
elif age >= 13:
    print("You are a teenager")
else:
    print("You are a child")
\`\`\`

### Loops
\`\`\`python
# For loop
for i in range(5):
    print(i)

# While loop
count = 0
while count < 3:
    print(count)
    count += 1
\`\`\`

## Functions
\`\`\`python
def greet(name):
    return f"Hello, {name}!"

# Call the function
message = greet("Alice")
print(message)
\`\`\`

## Lists
\`\`\`python
fruits = ["apple", "banana", "orange"]
print(fruits[0])  # apple
fruits.append("grape")
print(len(fruits))  # 4
\`\`\`

## Examples

### Example 1: Calculator
\`\`\`python
def add(a, b):
    return a + b

result = add(5, 3)
print(f"5 + 3 = {result}")
\`\`\`

### Example 2: List Processing
\`\`\`python
numbers = [1, 2, 3, 4, 5]
squared = [x**2 for x in numbers]
print(squared)  # [1, 4, 9, 16, 25]
\`\`\`
          `,
          readingTime: "15-20 minutes",
          keyPoints: [
            "Python syntax and data types",
            "Control structures (if, loops)",
            "Functions and their usage",
            "Lists and basic data structures"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Variables and Data Types',
            type: 'text-input',
            question: 'What is the output of: print(type(42))',
            placeholder: 'Enter your answer...',
            correctAnswers: ["<class 'int'>", 'int'],
            explanation: '42 is an integer, so type(42) returns <class \'int\'>'
          },
          {
            id: 'step-2',
            title: 'String Operations',
            type: 'multiple-choice',
            question: 'What is the result of "Hello" + "World"?',
            options: ['HelloWorld', 'Hello World', 'Error', 'Hello+World'],
            correctAnswer: 0,
            explanation: 'String concatenation joins strings together: "Hello" + "World" = "HelloWorld"'
          },
          {
            id: 'step-3',
            title: 'Control Structures',
            type: 'text-input',
            question: 'What will this code print: if 5 > 3: print("Yes") else: print("No")',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Yes'],
            explanation: 'Since 5 > 3 is True, the if condition is met and "Yes" is printed'
          },
          {
            id: 'step-4',
            title: 'Loops',
            type: 'multiple-choice',
            question: 'How many times will this loop run: for i in range(3): print(i)',
            options: ['2', '3', '4', '1'],
            correctAnswer: 1,
            explanation: 'range(3) generates numbers 0, 1, 2, so the loop runs 3 times'
          },
          {
            id: 'step-5',
            title: 'Functions',
            type: 'text-input',
            question: 'What is the output of: def square(x): return x**2; print(square(4))',
            placeholder: 'Enter your answer...',
            correctAnswers: ['16'],
            explanation: 'The function square(4) calculates 4**2 = 16'
          }
        ]
      },
      'quest-2': {
        id: 'quest-2',
        title: 'Python Data Structures',
        description: 'Master lists, dictionaries, and tuples in Python',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: 'üêç',
        timeEstimate: '60 min',
        skills: ['programming', 'python', 'data-structures'],
        requirements: ['computerScience.programming.quest-1'],
        deliverables: [
          {
            type: 'data-structure-exercises',
            description: 'Create and manipulate various data structures',
            format: 'code'
          }
        ],
        resources: ['Python interpreter', 'Data structure examples', 'Python documentation'],
        learningMaterial: {
          title: "Python Data Structures",
          content: `
# Python Data Structures

## Lists
Lists are ordered, mutable collections that can hold different data types.

### Creating Lists
\`\`\`python
fruits = ["apple", "banana", "orange"]
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", 3.14, True]
\`\`\`

### List Operations
\`\`\`python
# Accessing elements
print(fruits[0])  # apple
print(fruits[-1])  # orange

# Modifying lists
fruits.append("grape")
fruits.insert(1, "mango")
fruits.remove("banana")

# List slicing
print(fruits[1:3])  # ['mango', 'orange']
\`\`\`

## Dictionaries
Dictionaries store key-value pairs and are unordered.

### Creating Dictionaries
\`\`\`python
person = {
    "name": "Alice",
    "age": 25,
    "city": "New York"
}
\`\`\`

### Dictionary Operations
\`\`\`python
# Accessing values
print(person["name"])  # Alice
print(person.get("age", 0))  # 25

# Modifying dictionaries
person["email"] = "alice@example.com"
person.update({"phone": "123-456-7890"})

# Dictionary methods
keys = person.keys()
values = person.values()
items = person.items()
\`\`\`

## Tuples
Tuples are ordered, immutable collections.

### Creating Tuples
\`\`\`python
coordinates = (10, 20)
colors = ("red", "green", "blue")
single_item = (42,)  # Note the comma
\`\`\`

### Tuple Operations
\`\`\`python
# Accessing elements
print(coordinates[0])  # 10
print(coordinates[1])  # 20

# Tuple unpacking
x, y = coordinates
print(f"x: {x}, y: {y}")
\`\`\`

## Sets
Sets are unordered collections of unique elements.

### Creating Sets
\`\`\`python
numbers = {1, 2, 3, 4, 5}
colors = set(["red", "green", "blue"])
\`\`\`

### Set Operations
\`\`\`python
# Set methods
numbers.add(6)
numbers.remove(1)
numbers.discard(7)  # Safe removal

# Set operations
set1 = {1, 2, 3}
set2 = {3, 4, 5}
union = set1 | set2  # {1, 2, 3, 4, 5}
intersection = set1 & set2  # {3}
difference = set1 - set2  # {1, 2}
\`\`\`
          `,
          readingTime: "20-25 minutes",
          keyPoints: [
            "Lists: ordered, mutable collections",
            "Dictionaries: key-value pairs",
            "Tuples: ordered, immutable collections",
            "Sets: unordered, unique elements"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Lists',
            type: 'multiple-choice',
            question: 'How do you add an item to the end of a list?',
            options: ['list.add()', 'list.append()', 'list.insert()', 'list.push()'],
            correctAnswer: 1,
            explanation: 'Use append() to add an item to the end of a list'
          },
          {
            id: 'step-2',
            title: 'Dictionaries',
            type: 'text-input',
            question: 'What method safely gets a value from a dictionary with a default?',
            placeholder: 'Enter the method name...',
            correctAnswers: ['get', 'dict.get()'],
            explanation: 'The get() method returns a value or a default if the key is not found'
          },
          {
            id: 'step-3',
            title: 'Tuples',
            type: 'multiple-choice',
            question: 'What makes a tuple different from a list?',
            options: ['Tuples are faster', 'Tuples are immutable', 'Tuples are smaller', 'Tuples are ordered'],
            correctAnswer: 1,
            explanation: 'Tuples are immutable, meaning you cannot change their contents after creation'
          },
          {
            id: 'step-4',
            title: 'Sets',
            type: 'multiple-choice',
            question: 'What happens when you add a duplicate item to a set?',
            options: ['It creates an error', 'It adds the duplicate', 'It ignores the duplicate', 'It replaces the original'],
            correctAnswer: 2,
            explanation: 'Sets automatically ignore duplicate values, keeping only unique elements'
          },
          {
            id: 'step-5',
            title: 'Data Structure Choice',
            type: 'multiple-choice',
            question: 'Which data structure would you use to store student grades by name?',
            options: ['List', 'Dictionary', 'Tuple', 'Set'],
            correctAnswer: 1,
            explanation: 'Dictionaries are perfect for key-value pairs like student names and grades'
          }
        ]
      },
      'quest-3': {
        id: 'quest-3',
        title: 'Object-Oriented Programming',
        description: 'Learn classes, objects, and inheritance in Python',
        type: 'quest',
        difficulty: 'advanced',
        xpReward: 200,
        goldReward: 100,
        icon: 'üêç',
        timeEstimate: '90 min',
        skills: ['programming', 'python', 'oop'],
        requirements: ['computerScience.programming.quest-2'],
        deliverables: [
          {
            type: 'oop-project',
            description: 'Create a class hierarchy with inheritance',
            format: 'code'
          }
        ],
        resources: ['Python interpreter', 'OOP examples', 'Design patterns'],
        learningMaterial: {
          title: "Object-Oriented Programming in Python",
          content: `
# Object-Oriented Programming in Python

## Classes and Objects
A class is a blueprint for creating objects, while an object is an instance of a class.

### Defining a Class
\`\`\`python
class Dog:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def bark(self):
        return f"{self.name} says Woof!"
    
    def get_info(self):
        return f"{self.name} is {self.age} years old"
\`\`\`

### Creating Objects
\`\`\`python
# Create instances
my_dog = Dog("Buddy", 3)
your_dog = Dog("Max", 5)

# Use methods
print(my_dog.bark())  # Buddy says Woof!
print(your_dog.get_info())  # Max is 5 years old
\`\`\`

## Inheritance
Inheritance allows a class to inherit attributes and methods from another class.

### Base Class
\`\`\`python
class Animal:
    def __init__(self, name, species):
        self.name = name
        self.species = species
    
    def make_sound(self):
        return "Some generic animal sound"
    
    def get_info(self):
        return f"{self.name} is a {self.species}"
\`\`\`

### Derived Classes
\`\`\`python
class Cat(Animal):
    def __init__(self, name, breed):
        super().__init__(name, "cat")
        self.breed = breed
    
    def make_sound(self):
        return "Meow!"
    
    def purr(self):
        return f"{self.name} is purring"

class Bird(Animal):
    def __init__(self, name, can_fly):
        super().__init__(name, "bird")
        self.can_fly = can_fly
    
    def make_sound(self):
        return "Tweet!"
    
    def fly(self):
        if self.can_fly:
            return f"{self.name} is flying"
        else:
            return f"{self.name} cannot fly"
\`\`\`

## Encapsulation
Encapsulation hides internal implementation details.

### Private Attributes
\`\`\`python
class BankAccount:
    def __init__(self, initial_balance):
        self.__balance = initial_balance  # Private attribute
    
    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount
            return True
        return False
    
    def withdraw(self, amount):
        if 0 < amount <= self.__balance:
            self.__balance -= amount
            return True
        return False
    
    def get_balance(self):
        return self.__balance
\`\`\`

## Polymorphism
Polymorphism allows objects of different types to be treated uniformly.

### Method Overriding
\`\`\`python
class Shape:
    def area(self):
        pass

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height

class Circle(Shape):
    def __init__(self, radius):
        self.radius = radius
    
    def area(self):
        return 3.14159 * self.radius ** 2

# Polymorphic behavior
shapes = [Rectangle(5, 3), Circle(4)]
for shape in shapes:
    print(f"Area: {shape.area()}")
\`\`\`
          `,
          readingTime: "25-30 minutes",
          keyPoints: [
            "Classes and objects: blueprints and instances",
            "Inheritance: code reuse and specialization",
            "Encapsulation: data hiding and protection",
            "Polymorphism: uniform interface for different types"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Classes and Objects',
            type: 'text-input',
            question: 'What is the special method called when creating a new object?',
            placeholder: 'Enter the method name...',
            correctAnswers: ['__init__', '__init__()'],
            explanation: '__init__ is the constructor method that initializes new objects'
          },
          {
            id: 'step-2',
            title: 'Inheritance',
            type: 'multiple-choice',
            question: 'How do you call the parent class constructor in a child class?',
            options: ['parent.__init__()', 'super().__init__()', 'self.__init__()', 'class.__init__()'],
            correctAnswer: 1,
            explanation: 'Use super().__init__() to call the parent class constructor'
          },
          {
            id: 'step-3',
            title: 'Encapsulation',
            type: 'multiple-choice',
            question: 'How do you make an attribute private in Python?',
            options: ['Use private keyword', 'Add __ prefix', 'Use protected keyword', 'Add _ prefix'],
            correctAnswer: 1,
            explanation: 'In Python, attributes with double underscore (__) are considered private'
          },
          {
            id: 'step-4',
            title: 'Polymorphism',
            type: 'multiple-choice',
            question: 'What allows different classes to have methods with the same name?',
            options: ['Inheritance', 'Polymorphism', 'Encapsulation', 'Abstraction'],
            correctAnswer: 1,
            explanation: 'Polymorphism allows different classes to implement the same method differently'
          },
          {
            id: 'step-5',
            title: 'OOP Concepts',
            type: 'multiple-choice',
            question: 'Which OOP principle promotes code reuse?',
            options: ['Encapsulation', 'Inheritance', 'Polymorphism', 'Abstraction'],
            correctAnswer: 1,
            explanation: 'Inheritance allows child classes to reuse code from parent classes'
          }
        ]
      }
    },
    web_development: {
      'quest-1': {
        id: 'quest-1',
        title: 'HTML and CSS Basics',
        description: 'Learn to create web pages with HTML and style them with CSS',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üåê',
        timeEstimate: '40 min',
        skills: ['web-development', 'html', 'css'],
        requirements: [],
        deliverables: [
          {
            type: 'web-page',
            description: 'Create a personal webpage',
            format: 'html'
          }
        ],
        resources: ['Text editor', 'Web browser', 'HTML/CSS reference'],
        learningMaterial: {
          title: "HTML and CSS Basics",
          content: `
# HTML and CSS Basics

## What is HTML?
HTML (HyperText Markup Language) is the standard markup language for creating web pages.

## Basic HTML Structure
\`\`\`html
<!DOCTYPE html>
<html>
<head>
    <title>My Web Page</title>
</head>
<body>
    <h1>Welcome to My Website</h1>
    <p>This is a paragraph of text.</p>
</body>
</html>
\`\`\`

## Common HTML Elements

### Headings
\`\`\`html
<h1>Main Heading</h1>
<h2>Subheading</h2>
<h3>Smaller Heading</h3>
\`\`\`

### Text Elements
\`\`\`html
<p>This is a paragraph.</p>
<strong>Bold text</strong>
<em>Italic text</em>
\`\`\`

### Lists
\`\`\`html
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
</ul>

<ol>
    <li>First item</li>
    <li>Second item</li>
</ol>
\`\`\`

### Links and Images
\`\`\`html
<a href="https://example.com">Visit Example</a>
<img src="image.jpg" alt="Description">
\`\`\`

## What is CSS?
CSS (Cascading Style Sheets) is used to style and layout web pages.

## Basic CSS Syntax
\`\`\`css
selector {
    property: value;
}
\`\`\`

## Common CSS Properties

### Colors and Text
\`\`\`css
h1 {
    color: blue;
    font-size: 24px;
    text-align: center;
}
\`\`\`

### Layout
\`\`\`css
.container {
    width: 800px;
    margin: 0 auto;
    padding: 20px;
}
\`\`\`

### Backgrounds and Borders
\`\`\`css
.box {
    background-color: lightgray;
    border: 2px solid black;
    border-radius: 10px;
}
\`\`\`

## CSS Selectors

### Element Selector
\`\`\`css
p {
    color: red;
}
\`\`\`

### Class Selector
\`\`\`css
.highlight {
    background-color: yellow;
}
\`\`\`

### ID Selector
\`\`\`css
#header {
    font-size: 32px;
}
\`\`\`

## Examples

### Example 1: Styled Button
\`\`\`html
<button class="btn">Click Me</button>
\`\`\`

\`\`\`css
.btn {
    background-color: blue;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
}
\`\`\`

### Example 2: Card Layout
\`\`\`html
<div class="card">
    <h3>Card Title</h3>
    <p>Card content goes here.</p>
</div>
\`\`\`

\`\`\`css
.card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 20px;
    margin: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
\`\`\`
          `,
          readingTime: "18-22 minutes",
          keyPoints: [
            "HTML document structure and elements",
            "CSS syntax and selectors",
            "Common HTML tags and attributes",
            "Basic CSS styling properties"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'HTML Structure',
            type: 'multiple-choice',
            question: 'Which tag is used for the main heading?',
            options: ['<h1>', '<head>', '<header>', '<title>'],
            correctAnswer: 0,
            explanation: '<h1> is used for the main heading, while <head> is for document metadata'
          },
          {
            id: 'step-2',
            title: 'HTML Elements',
            type: 'text-input',
            question: 'What HTML tag creates a link?',
            placeholder: 'Enter the tag...',
            correctAnswers: ['<a>', 'a'],
            explanation: 'The <a> tag is used to create hyperlinks in HTML'
          },
          {
            id: 'step-3',
            title: 'CSS Selectors',
            type: 'multiple-choice',
            question: 'Which CSS selector targets elements with class "highlight"?',
            options: ['.highlight', '#highlight', 'highlight', '.highlight'],
            correctAnswer: 0,
            explanation: 'Class selectors use a dot (.) followed by the class name'
          },
          {
            id: 'step-4',
            title: 'CSS Properties',
            type: 'text-input',
            question: 'What CSS property changes text color?',
            placeholder: 'Enter the property...',
            correctAnswers: ['color'],
            explanation: 'The color property is used to set the text color in CSS'
          },
          {
            id: 'step-5',
            title: 'HTML Lists',
            type: 'multiple-choice',
            question: 'Which tag creates an unordered list?',
            options: ['<ul>', '<ol>', '<li>', '<list>'],
            correctAnswer: 0,
            explanation: '<ul> creates an unordered (bulleted) list, while <ol> creates an ordered (numbered) list'
          }
        ]
      }
    }
  },

  // ==================== ÂéÜÂè≤Â≠¶‰π†Ë∑ØÂæÑ ====================
  history: {
    world_history: {
      'quest-1': {
        id: 'quest-1',
        title: 'Ancient Civilizations',
        description: 'Explore the great civilizations of the ancient world',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 110,
        goldReward: 55,
        icon: 'üèõÔ∏è',
        timeEstimate: '50 min',
        skills: ['history', 'ancient-civilizations', 'culture'],
        requirements: [],
        deliverables: [
          {
            type: 'timeline-creation',
            description: 'Create a timeline of ancient civilizations',
            format: 'visual'
          }
        ],
        resources: ['History textbook', 'Maps', 'Archaeological images'],
        learningMaterial: {
          title: "Ancient Civilizations",
          content: `
# Ancient Civilizations

## Mesopotamia (3500-500 BCE)
**Location**: Between Tigris and Euphrates rivers (modern Iraq)

### Key Achievements
- **Cuneiform writing**: First known writing system
- **Code of Hammurabi**: First written law code
- **Ziggurats**: Step pyramids for religious purposes
- **Wheel and plow**: Agricultural innovations

### Major Cities
- **Ur**: Important trading center
- **Babylon**: Capital under Hammurabi
- **Nineveh**: Assyrian capital

## Ancient Egypt (3100-30 BCE)
**Location**: Nile River Valley

### Key Achievements
- **Pyramids**: Massive tombs for pharaohs
- **Hieroglyphics**: Picture-based writing system
- **Mummification**: Preservation of the dead
- **Calendar**: 365-day solar calendar

### Major Periods
- **Old Kingdom**: Pyramid building era
- **Middle Kingdom**: Cultural renaissance
- **New Kingdom**: Empire expansion

## Ancient Greece (800-146 BCE)
**Location**: Greek peninsula and islands

### Key Achievements
- **Democracy**: Government by the people
- **Philosophy**: Socrates, Plato, Aristotle
- **Olympic Games**: Athletic competitions
- **Architecture**: Columns, theaters, temples

### City-States
- **Athens**: Center of democracy and culture
- **Sparta**: Military powerhouse
- **Corinth**: Trading center

## Ancient Rome (753 BCE-476 CE)
**Location**: Italian peninsula, expanded across Europe

### Key Achievements
- **Roman Law**: Legal system still influential
- **Engineering**: Roads, aqueducts, concrete
- **Latin Language**: Basis for many modern languages
- **Republic to Empire**: Government evolution

### Major Periods
- **Roman Republic**: 509-27 BCE
- **Roman Empire**: 27 BCE-476 CE

## Ancient China (1600 BCE-220 CE)
**Location**: Yellow and Yangtze River valleys

### Key Achievements
- **Silk Road**: Trade route to the West
- **Great Wall**: Defensive structure
- **Paper**: Writing material
- **Confucianism**: Philosophical system

### Major Dynasties
- **Shang**: First dynasty with written records
- **Zhou**: Longest dynasty, Confucius lived
- **Qin**: First unified empire
- **Han**: Golden age of Chinese culture

## Indus Valley (3300-1300 BCE)
**Location**: Indus River Valley (modern Pakistan/India)

### Key Achievements
- **Urban planning**: Grid-pattern cities
- **Drainage systems**: Advanced sanitation
- **Standardized weights**: Trade facilitation
- **Seal carving**: Artistic achievement

## Common Themes
- **River valleys**: Most civilizations developed near rivers
- **Writing systems**: All major civilizations developed writing
- **Religious beliefs**: Polytheistic religions common
- **Trade networks**: Connections between civilizations
- **Social hierarchy**: Rulers, priests, merchants, farmers
          `,
          readingTime: "20-25 minutes",
          keyPoints: [
            "Major ancient civilizations and their locations",
            "Key achievements of each civilization",
            "Common themes across civilizations",
            "Timeline of ancient world development"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Mesopotamia',
            type: 'multiple-choice',
            question: 'Which civilization developed the first known writing system?',
            options: ['Egypt', 'Mesopotamia', 'Greece', 'China'],
            correctAnswer: 1,
            explanation: 'Mesopotamia developed cuneiform, the first known writing system around 3200 BCE'
          },
          {
            id: 'step-2',
            title: 'Ancient Egypt',
            type: 'text-input',
            question: 'What was the purpose of pyramids in ancient Egypt?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['tombs', 'burial chambers', 'pharaoh tombs'],
            explanation: 'Pyramids were built as tombs for pharaohs to house their bodies and belongings for the afterlife'
          },
          {
            id: 'step-3',
            title: 'Ancient Greece',
            type: 'multiple-choice',
            question: 'Which Greek city-state was known for its military strength?',
            options: ['Athens', 'Sparta', 'Corinth', 'Thebes'],
            correctAnswer: 1,
            explanation: 'Sparta was famous for its military training and warrior culture'
          },
          {
            id: 'step-4',
            title: 'Ancient Rome',
            type: 'multiple-choice',
            question: 'What type of government did Rome have before becoming an empire?',
            options: ['Monarchy', 'Democracy', 'Republic', 'Oligarchy'],
            correctAnswer: 2,
            explanation: 'Rome was a republic before becoming an empire, with elected officials and citizen participation'
          },
          {
            id: 'step-5',
            title: 'Ancient China',
            type: 'text-input',
            question: 'What was the name of the famous trade route that connected China to the West?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Silk Road', 'Silk Route'],
            explanation: 'The Silk Road was a network of trade routes connecting China with the Mediterranean world'
          }
        ]
      }
    },
    american_history: {
      'quest-1': {
        id: 'quest-1',
        title: 'American Revolution',
        description: 'Learn about the events that led to American independence',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: 'üá∫üá∏',
        timeEstimate: '60 min',
        skills: ['history', 'american-revolution', 'politics'],
        requirements: [],
        deliverables: [
          {
            type: 'essay',
            description: 'Write an essay on the causes of the American Revolution',
            format: 'text'
          }
        ],
        resources: ['History textbook', 'Primary sources', 'Maps of colonies'],
        learningMaterial: {
          title: "American Revolution",
          content: `
# American Revolution (1765-1783)

## Causes of the Revolution

### Taxation Without Representation
- **Stamp Act (1765)**: Tax on all printed materials
- **Townshend Acts (1767)**: Taxes on imports
- **Tea Act (1773)**: Monopoly on tea trade
- **Colonists' Response**: "No taxation without representation"

### British Policies
- **Proclamation of 1763**: Limited westward expansion
- **Quartering Act**: Required housing British soldiers
- **Intolerable Acts**: Punishment for Boston Tea Party
- **Navigation Acts**: Restricted colonial trade

### Colonial Resistance
- **Sons of Liberty**: Secret organization against British rule
- **Boston Massacre (1770)**: British soldiers killed 5 colonists
- **Boston Tea Party (1773)**: Colonists dumped tea into harbor
- **Committees of Correspondence**: Communication network

## Key Events

### First Continental Congress (1774)
- **Location**: Philadelphia
- **Purpose**: Respond to Intolerable Acts
- **Actions**: Boycott British goods, prepare for war

### Battles of Lexington and Concord (1775)
- **"Shot heard 'round the world"**: First shots of the war
- **Paul Revere's Ride**: Warning of British advance
- **Result**: War officially began

### Second Continental Congress (1775)
- **George Washington**: Appointed commander-in-chief
- **Declaration of Independence**: Written by Thomas Jefferson
- **July 4, 1776**: Independence declared

## Major Battles

### Early Battles (1775-1776)
- **Bunker Hill**: British victory, but high casualties
- **New York Campaign**: British captured New York City
- **Trenton**: Washington's surprise attack on Christmas

### Turning Point (1777)
- **Saratoga**: American victory convinced France to help
- **Valley Forge**: Harsh winter, but army survived

### Southern Campaign (1778-1781)
- **Charleston**: British captured major southern city
- **Yorktown**: Final major battle, British surrender

## Key Figures

### Patriots
- **George Washington**: Commander-in-chief, first president
- **Thomas Jefferson**: Author of Declaration of Independence
- **Benjamin Franklin**: Diplomat, inventor, philosopher
- **John Adams**: Lawyer, diplomat, second president

### British
- **King George III**: British monarch during revolution
- **General Cornwallis**: British commander who surrendered at Yorktown
- **General Howe**: British commander in early war

## Treaty of Paris (1783)
- **Recognition**: Britain recognized American independence
- **Territory**: U.S. gained land to Mississippi River
- **Fishing Rights**: Americans could fish off Newfoundland
- **Debts**: Both sides would pay their debts

## Impact and Legacy
- **New Nation**: First successful colonial revolution
- **Constitution**: Created new form of government
- **Influence**: Inspired other revolutions worldwide
- **Democracy**: Established principles of self-government
          `,
          readingTime: "25-30 minutes",
          keyPoints: [
            "Causes of the American Revolution",
            "Key battles and turning points",
            "Important figures on both sides",
            "Impact and legacy of the revolution"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Causes of Revolution',
            type: 'multiple-choice',
            question: 'What was the main complaint of American colonists about British taxes?',
            options: [
              'Taxes were too high',
              'No taxation without representation',
              'Taxes were unfair',
              'They wanted no taxes at all'
            ],
            correctAnswer: 1,
            explanation: 'Colonists objected to being taxed by Parliament when they had no representatives in Parliament'
          },
          {
            id: 'step-2',
            title: 'Key Events',
            type: 'text-input',
            question: 'What event is known as "the shot heard \'round the world"?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Battle of Lexington', 'Lexington and Concord', 'Lexington'],
            explanation: 'The first shots of the American Revolution were fired at Lexington and Concord'
          },
          {
            id: 'step-3',
            title: 'Declaration of Independence',
            type: 'multiple-choice',
            question: 'Who wrote the Declaration of Independence?',
            options: ['George Washington', 'Benjamin Franklin', 'Thomas Jefferson', 'John Adams'],
            correctAnswer: 2,
            explanation: 'Thomas Jefferson was the primary author of the Declaration of Independence'
          },
          {
            id: 'step-4',
            title: 'Turning Point',
            type: 'multiple-choice',
            question: 'Which battle convinced France to help the Americans?',
            options: ['Bunker Hill', 'Saratoga', 'Yorktown', 'Trenton'],
            correctAnswer: 1,
            explanation: 'The American victory at Saratoga convinced France that the Americans could win'
          },
          {
            id: 'step-5',
            title: 'End of War',
            type: 'text-input',
            question: 'Where did the British surrender to end the war?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Yorktown'],
            explanation: 'The British surrender at Yorktown in 1781 effectively ended the American Revolution'
          }
        ]
      },
      'quest-2': {
        id: 'quest-2',
        title: 'Medieval Europe',
        description: 'Explore the Middle Ages and feudal society',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 150,
        goldReward: 75,
        icon: 'üè∞',
        timeEstimate: '60 min',
        skills: ['history', 'medieval-history', 'europe'],
        requirements: ['history.world_history.quest-1'],
        deliverables: [
          {
            type: 'timeline-creation',
            description: 'Create a timeline of medieval events',
            format: 'visual'
          }
        ],
        resources: ['History textbook', 'Medieval maps', 'Primary sources'],
        learningMaterial: {
          title: "Medieval Europe (500-1500 CE)",
          content: `
# Medieval Europe (500-1500 CE)

## The Fall of Rome and Early Middle Ages

### Barbarian Invasions
- **Visigoths**: Sacked Rome in 410 CE
- **Vandals**: Conquered North Africa and sacked Rome in 455 CE
- **Ostrogoths**: Ruled Italy under Theodoric
- **Franks**: Established kingdom in Gaul (modern France)

### Charlemagne and the Carolingian Empire
- **Charlemagne (768-814)**: Crowned Holy Roman Emperor in 800 CE
- **Carolingian Renaissance**: Revival of learning and culture
- **Administrative reforms**: Divided empire into counties
- **Educational reforms**: Established schools and libraries

## Feudal System

### Social Hierarchy
1. **King**: Supreme ruler
2. **Nobles/Lords**: Landowners with military obligations
3. **Knights**: Warriors who served lords
4. **Serfs/Peasants**: Agricultural workers bound to land

### Feudal Obligations
- **Lord to Vassal**: Protection and land grants
- **Vassal to Lord**: Military service and loyalty
- **Serf to Lord**: Labor and taxes

## The Church and Religion

### Power of the Church
- **Pope**: Spiritual leader of Western Christianity
- **Bishops**: Regional church leaders
- **Monasteries**: Centers of learning and agriculture
- **Crusades**: Religious wars to reclaim Holy Land

### Monastic Life
- **Benedictine Rule**: Guidelines for monastic life
- **Scriptoriums**: Where monks copied manuscripts
- **Agricultural innovation**: Improved farming techniques
- **Education**: Monasteries preserved classical knowledge

## Medieval Society

### Daily Life
- **Castles**: Fortified homes of nobility
- **Manors**: Self-sufficient agricultural estates
- **Guilds**: Trade organizations in towns
- **Universities**: Centers of higher learning

### Medieval Technology
- **Heavy plow**: Improved agriculture
- **Windmills and watermills**: Harnessed natural power
- **Gothic architecture**: Pointed arches and flying buttresses
- **Stirrups**: Improved cavalry warfare

## Major Events

### The Crusades (1095-1291)
- **First Crusade (1096-1099)**: Captured Jerusalem
- **Third Crusade (1189-1192)**: Richard the Lionheart vs. Saladin
- **Fourth Crusade (1202-1204)**: Sacked Constantinople
- **Children's Crusade (1212)**: Tragic failed expedition

### The Black Death (1347-1351)
- **Bubonic plague**: Killed 1/3 of Europe's population
- **Social disruption**: Labor shortages and peasant revolts
- **Economic impact**: Changed feudal relationships
- **Cultural response**: Art and literature reflected mortality

### The Hundred Years' War (1337-1453)
- **England vs. France**: Territorial disputes
- **Joan of Arc**: French heroine who inspired resistance
- **Longbow**: English military advantage
- **National identity**: Strengthened both nations

## Medieval Culture

### Art and Architecture
- **Romanesque**: Thick walls, rounded arches
- **Gothic**: Pointed arches, stained glass, flying buttresses
- **Illuminated manuscripts**: Decorated religious texts
- **Cathedral building**: Massive religious structures

### Literature and Learning
- **Chivalry**: Code of conduct for knights
- **Courtly love**: Romantic literature tradition
- **Scholasticism**: Philosophical method combining faith and reason
- **Universities**: Bologna, Paris, Oxford, Cambridge

## End of the Middle Ages

### Factors Leading to Change
- **Renaissance**: Revival of classical learning
- **Printing press**: Spread of knowledge
- **Exploration**: Age of Discovery begins
- **Rise of nation-states**: Centralized monarchies

### Legacy
- **Feudal system**: Influenced social structures
- **Church power**: Shaped European politics
- **Cultural achievements**: Art, literature, architecture
- **Foundation for modern Europe**: Set stage for Renaissance
          `,
          readingTime: "25-30 minutes",
          keyPoints: [
            "Feudal system and social hierarchy",
            "Role of the Church in medieval society",
            "Major events: Crusades, Black Death, Hundred Years' War",
            "Medieval culture and achievements"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Feudal System',
            type: 'multiple-choice',
            question: 'What was the main obligation of a vassal to his lord?',
            options: ['Pay taxes', 'Provide military service', 'Work the land', 'Give religious guidance'],
            correctAnswer: 1,
            explanation: 'Vassals were required to provide military service to their lords in exchange for land grants'
          },
          {
            id: 'step-2',
            title: 'Charlemagne',
            type: 'text-input',
            question: 'What title was Charlemagne given in 800 CE?',
            placeholder: 'Enter the title...',
            correctAnswers: ['Holy Roman Emperor', 'Emperor'],
            explanation: 'Charlemagne was crowned Holy Roman Emperor by Pope Leo III in 800 CE'
          },
          {
            id: 'step-3',
            title: 'The Crusades',
            type: 'multiple-choice',
            question: 'What was the main goal of the Crusades?',
            options: ['Conquer Europe', 'Reclaim the Holy Land', 'Spread Christianity', 'Find new trade routes'],
            correctAnswer: 1,
            explanation: 'The Crusades were religious wars to reclaim the Holy Land from Muslim control'
          },
          {
            id: 'step-4',
            title: 'Black Death',
            type: 'multiple-choice',
            question: 'What percentage of Europe\'s population did the Black Death kill?',
            options: ['10%', '25%', '33%', '50%'],
            correctAnswer: 2,
            explanation: 'The Black Death killed approximately one-third of Europe\'s population between 1347-1351'
          },
          {
            id: 'step-5',
            title: 'Medieval Architecture',
            type: 'multiple-choice',
            question: 'Which architectural style featured pointed arches and flying buttresses?',
            options: ['Romanesque', 'Gothic', 'Baroque', 'Renaissance'],
            correctAnswer: 1,
            explanation: 'Gothic architecture is characterized by pointed arches, flying buttresses, and stained glass windows'
          }
        ]
      },
      'quest-3': {
        id: 'quest-3',
        title: 'Renaissance and Reformation',
        description: 'Discover the rebirth of learning and religious reform',
        type: 'quest',
        difficulty: 'advanced',
        xpReward: 200,
        goldReward: 100,
        icon: 'üé®',
        timeEstimate: '90 min',
        skills: ['history', 'renaissance', 'reformation'],
        requirements: ['history.world_history.quest-2'],
        deliverables: [
          {
            type: 'art-analysis',
            description: 'Analyze Renaissance artworks and their significance',
            format: 'visual'
          }
        ],
        resources: ['Art history books', 'Renaissance images', 'Primary sources'],
        learningMaterial: {
          title: "Renaissance and Reformation (1300-1600)",
          content: `
# Renaissance and Reformation (1300-1600)

## The Renaissance

### Origins and Characteristics
- **Humanism**: Focus on human potential and achievement
- **Classical revival**: Renewed interest in Greek and Roman culture
- **Individualism**: Emphasis on personal expression and achievement
- **Secularism**: Focus on worldly rather than religious concerns

### Italian Renaissance (1300-1500)

#### Key Figures
- **Petrarch**: "Father of Humanism," poet and scholar
- **Dante**: Author of "The Divine Comedy"
- **Machiavelli**: Political philosopher, "The Prince"
- **Leonardo da Vinci**: Artist, inventor, scientist
- **Michelangelo**: Sculptor, painter, architect
- **Raphael**: Painter known for perfect composition

#### Artistic Achievements
- **Perspective**: Mathematical system for creating depth
- **Chiaroscuro**: Use of light and shadow
- **Sfumato**: Soft blending of colors
- **Realistic representation**: Accurate human anatomy

### Northern Renaissance (1400-1600)

#### Key Figures
- **Erasmus**: Dutch humanist and scholar
- **Albrecht D√ºrer**: German painter and printmaker
- **Jan van Eyck**: Flemish painter, oil painting pioneer
- **Pieter Bruegel**: Flemish painter of peasant life

#### Characteristics
- **Religious themes**: More focus on Christian subjects
- **Oil painting**: New medium for detailed work
- **Printing press**: Spread of ideas and knowledge
- **Social commentary**: Art reflecting contemporary life

## The Reformation

### Causes of the Reformation
- **Church corruption**: Indulgences, simony, nepotism
- **Renaissance humanism**: Questioning of authority
- **Printing press**: Spread of new ideas
- **Nationalism**: Resentment of papal authority

### Martin Luther and the Protestant Reformation

#### Luther's Actions
- **95 Theses (1517)**: Criticized indulgences
- **Sola Scriptura**: Bible as sole religious authority
- **Sola Fide**: Justification by faith alone
- **Priesthood of all believers**: Direct relationship with God

#### Spread of Protestantism
- **Lutheranism**: Germany and Scandinavia
- **Calvinism**: Switzerland, Netherlands, Scotland
- **Anglicanism**: England under Henry VIII
- **Anabaptism**: Radical reformers

### Catholic Counter-Reformation

#### Council of Trent (1545-1563)
- **Doctrine reaffirmed**: Traditional Catholic teachings
- **Reforms implemented**: Better education for clergy
- **Index of Forbidden Books**: Censorship of heretical works
- **Inquisition strengthened**: Persecution of heretics

#### New Religious Orders
- **Jesuits**: Society of Jesus, education and missions
- **Ursulines**: Women's education
- **Capuchins**: Return to Franciscan simplicity

## Impact of Renaissance and Reformation

### Cultural Changes
- **Artistic revolution**: New techniques and subjects
- **Literary achievements**: Vernacular literature
- **Scientific method**: Observation and experimentation
- **Education**: Spread of learning beyond clergy

### Political Changes
- **Nation-states**: Centralized monarchies
- **Religious wars**: Conflicts between Catholics and Protestants
- **Tolerance**: Gradual acceptance of religious diversity
- **Secularization**: Separation of church and state

### Social Changes
- **Middle class**: Rise of merchants and professionals
- **Women's roles**: Limited but some opportunities
- **Peasant life**: Continued agricultural focus
- **Urban growth**: Cities as centers of culture

## Key Events

### Renaissance Timeline
- **1300s**: Petrarch and early humanism
- **1400s**: Italian Renaissance peaks
- **1500s**: Northern Renaissance and spread

### Reformation Timeline
- **1517**: Luther's 95 Theses
- **1521**: Diet of Worms, Luther excommunicated
- **1534**: Henry VIII breaks with Rome
- **1545-1563**: Council of Trent
- **1555**: Peace of Augsburg

## Legacy

### Renaissance Legacy
- **Artistic techniques**: Still used today
- **Humanistic education**: Liberal arts tradition
- **Scientific method**: Foundation for modern science
- **Individual achievement**: Emphasis on personal potential

### Reformation Legacy
- **Religious diversity**: Multiple Christian denominations
- **Bible translation**: Scripture in vernacular languages
- **Education**: Emphasis on literacy and learning
- **Political freedom**: Challenge to absolute authority
          `,
          readingTime: "30-35 minutes",
          keyPoints: [
            "Renaissance humanism and artistic achievements",
            "Causes and spread of the Protestant Reformation",
            "Catholic Counter-Reformation response",
            "Long-term cultural and political impact"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Renaissance Humanism',
            type: 'multiple-choice',
            question: 'What was the main focus of Renaissance humanism?',
            options: [
              'Religious devotion',
              'Human potential and achievement',
              'Military conquest',
              'Agricultural improvement'
            ],
            correctAnswer: 1,
            explanation: 'Renaissance humanism focused on human potential, achievement, and the study of classical texts'
          },
          {
            id: 'step-2',
            title: 'Martin Luther',
            type: 'text-input',
            question: 'What document did Martin Luther post in 1517?',
            placeholder: 'Enter the document name...',
            correctAnswers: ['95 Theses', 'Ninety-Five Theses'],
            explanation: 'Martin Luther posted his 95 Theses criticizing indulgences in 1517, starting the Reformation'
          },
          {
            id: 'step-3',
            title: 'Renaissance Art',
            type: 'multiple-choice',
            question: 'What technique did Renaissance artists use to create the illusion of depth?',
            options: ['Chiaroscuro', 'Perspective', 'Sfumato', 'Fresco'],
            correctAnswer: 1,
            explanation: 'Perspective is the mathematical technique Renaissance artists used to create the illusion of depth'
          },
          {
            id: 'step-4',
            title: 'Protestant Beliefs',
            type: 'multiple-choice',
            question: 'What did "Sola Scriptura" mean?',
            options: [
              'Only the Pope can interpret the Bible',
              'The Bible is the sole religious authority',
              'Only priests can read the Bible',
              'The Bible should be in Latin only'
            ],
            correctAnswer: 1,
            explanation: '"Sola Scriptura" means the Bible is the sole religious authority, not church tradition or papal decrees'
          },
          {
            id: 'step-5',
            title: 'Counter-Reformation',
            type: 'multiple-choice',
            question: 'What was the main purpose of the Council of Trent?',
            options: [
              'To convert Muslims',
              'To reform and strengthen the Catholic Church',
              'To start new crusades',
              'To translate the Bible'
            ],
            correctAnswer: 1,
            explanation: 'The Council of Trent was called to reform and strengthen the Catholic Church in response to the Protestant Reformation'
          }
        ]
      }
    }
  },

  // ==================== Âú∞ÁêÜÂ≠¶‰π†Ë∑ØÂæÑ ====================
  geography: {
    physical_geography: {
      'quest-1': {
        id: 'quest-1',
        title: 'Earth\'s Physical Features',
        description: 'Explore the natural features that shape our planet',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 100,
        goldReward: 50,
        icon: 'üåç',
        timeEstimate: '45 min',
        skills: ['geography', 'physical-features', 'earth-science'],
        requirements: [],
        deliverables: [
          {
            type: 'map-creation',
            description: 'Create a map showing major physical features',
            format: 'visual'
          }
        ],
        resources: ['World maps', 'Atlas', 'Geographic images'],
        learningMaterial: {
          title: "Earth's Physical Features",
          content: `
# Earth's Physical Features

## Continents and Oceans

### Seven Continents
1. **Asia**: Largest continent, home to 60% of world population
2. **Africa**: Second largest, diverse ecosystems
3. **North America**: Includes Canada, USA, Mexico
4. **South America**: Amazon rainforest, Andes mountains
5. **Europe**: Small but historically important
6. **Australia**: Smallest continent, island continent
7. **Antarctica**: Coldest, driest, windiest continent

### Five Oceans
1. **Pacific**: Largest ocean, covers 1/3 of Earth
2. **Atlantic**: Second largest, separates Americas from Europe/Africa
3. **Indian**: Third largest, between Africa and Australia
4. **Arctic**: Smallest, around North Pole
5. **Southern**: Around Antarctica

## Major Mountain Ranges

### Highest Peaks
- **Mount Everest**: 8,848m (Asia)
- **K2**: 8,611m (Asia)
- **Kangchenjunga**: 8,586m (Asia)

### Major Ranges
- **Himalayas**: Asia, highest mountains
- **Andes**: South America, longest mountain range
- **Rockies**: North America, western United States
- **Alps**: Europe, between France and Italy
- **Atlas**: Africa, northern Morocco

## Major Rivers

### Longest Rivers
1. **Nile**: 6,650km (Africa)
2. **Amazon**: 6,400km (South America)
3. **Yangtze**: 6,300km (Asia)
4. **Mississippi**: 6,275km (North America)

### Important Rivers
- **Ganges**: Sacred river in India
- **Thames**: Flows through London
- **Rhine**: Major European river
- **Congo**: Second longest in Africa

## Deserts

### Largest Deserts
1. **Antarctic Desert**: 14,000,000 km¬≤
2. **Arctic Desert**: 13,985,000 km¬≤
3. **Sahara**: 9,200,000 km¬≤ (Africa)
4. **Arabian**: 2,330,000 km¬≤ (Middle East)

### Hot Deserts
- **Sahara**: Africa, world's largest hot desert
- **Gobi**: Asia, between China and Mongolia
- **Kalahari**: Africa, southern Africa
- **Sonoran**: North America, southwestern USA

## Climate Zones

### Tropical
- **Location**: Near equator
- **Temperature**: Hot year-round
- **Rainfall**: Heavy, seasonal
- **Examples**: Amazon rainforest, Congo basin

### Temperate
- **Location**: Mid-latitudes
- **Temperature**: Four seasons
- **Rainfall**: Moderate
- **Examples**: Eastern USA, Western Europe

### Polar
- **Location**: High latitudes
- **Temperature**: Cold year-round
- **Rainfall**: Low
- **Examples**: Antarctica, Arctic regions

## Natural Disasters

### Earthquakes
- **Causes**: Tectonic plate movement
- **Ring of Fire**: Pacific Ocean earthquake zone
- **Measurement**: Richter scale

### Volcanoes
- **Active**: Currently erupting or recently erupted
- **Dormant**: Not currently active but could erupt
- **Extinct**: Will not erupt again

### Weather Events
- **Hurricanes**: Tropical cyclones
- **Tornadoes**: Rotating air columns
- **Floods**: Overflow of water onto land
- **Droughts**: Extended periods of dry weather
          `,
          readingTime: "18-22 minutes",
          keyPoints: [
            "Seven continents and five oceans",
            "Major mountain ranges and rivers",
            "Climate zones and their characteristics",
            "Natural disasters and their causes"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Continents',
            type: 'multiple-choice',
            question: 'Which is the largest continent?',
            options: ['Africa', 'Asia', 'North America', 'Europe'],
            correctAnswer: 1,
            explanation: 'Asia is the largest continent, covering about 30% of Earth\'s land area'
          },
          {
            id: 'step-2',
            title: 'Oceans',
            type: 'text-input',
            question: 'What is the largest ocean?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Pacific', 'Pacific Ocean'],
            explanation: 'The Pacific Ocean is the largest, covering about 1/3 of Earth\'s surface'
          },
          {
            id: 'step-3',
            title: 'Mountains',
            type: 'multiple-choice',
            question: 'What is the highest mountain in the world?',
            options: ['K2', 'Mount Everest', 'Kangchenjunga', 'Lhotse'],
            correctAnswer: 1,
            explanation: 'Mount Everest is the highest peak at 8,848 meters above sea level'
          },
          {
            id: 'step-4',
            title: 'Rivers',
            type: 'text-input',
            question: 'What is the longest river in the world?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['Nile', 'Nile River'],
            explanation: 'The Nile River is the longest at approximately 6,650 kilometers'
          },
          {
            id: 'step-5',
            title: 'Climate',
            type: 'multiple-choice',
            question: 'Which climate zone is found near the equator?',
            options: ['Temperate', 'Tropical', 'Polar', 'Desert'],
            correctAnswer: 1,
            explanation: 'The tropical climate zone is found near the equator, characterized by hot temperatures and heavy rainfall'
          }
        ]
      }
    }
  },

  // ==================== Ëâ∫ÊúØÂ≠¶‰π†Ë∑ØÂæÑ ====================
  art: {
    art_history: {
      'quest-1': {
        id: 'quest-1',
        title: 'Renaissance Art',
        description: 'Discover the artistic revolution of the Renaissance period',
        type: 'quest',
        difficulty: 'intermediate',
        xpReward: 140,
        goldReward: 70,
        icon: 'üé®',
        timeEstimate: '55 min',
        skills: ['art', 'art-history', 'renaissance'],
        requirements: [],
        deliverables: [
          {
            type: 'art-analysis',
            description: 'Analyze 5 Renaissance artworks',
            format: 'text'
          }
        ],
        resources: ['Art history textbook', 'Museum websites', 'High-resolution images'],
        learningMaterial: {
          title: "Renaissance Art",
          content: `
# Renaissance Art (1400-1600)

## What was the Renaissance?
The Renaissance was a period of cultural rebirth in Europe, marked by renewed interest in classical Greek and Roman art, literature, and philosophy.

## Key Characteristics

### Humanism
- **Focus on human experience**: Art celebrated human achievements
- **Individualism**: Emphasis on personal expression
- **Classical influence**: Study of ancient Greek and Roman art
- **Realistic representation**: Accurate depiction of human form

### Techniques
- **Perspective**: Mathematical system for creating depth
- **Chiaroscuro**: Use of light and shadow for volume
- **Sfumato**: Soft blending of colors and tones
- **Fresco**: Painting on wet plaster

## Major Artists

### Leonardo da Vinci (1452-1519)
**Masterpieces**:
- **Mona Lisa**: Famous portrait with mysterious smile
- **The Last Supper**: Biblical scene with perspective
- **Vitruvian Man**: Study of human proportions

**Innovations**:
- Scientific approach to art
- Detailed anatomical studies
- Inventor and scientist

### Michelangelo (1475-1564)
**Masterpieces**:
- **Sistine Chapel ceiling**: Biblical scenes in Vatican
- **David**: Marble sculpture of biblical hero
- **Pieta**: Mary holding dead Christ

**Innovations**:
- Master of both painting and sculpture
- Dynamic human figures
- Emotional expression in art

### Raphael (1483-1520)
**Masterpieces**:
- **School of Athens**: Philosophers in classical setting
- **Madonna paintings**: Multiple versions of Virgin Mary
- **Portrait of Pope Julius II**: Papal portrait

**Innovations**:
- Perfect composition and balance
- Ideal beauty in human form
- Harmony and grace

## Art Movements

### Early Renaissance (1400-1500)
- **Florence**: Center of artistic innovation
- **Linear perspective**: Mathematical depth
- **Classical themes**: Greek and Roman subjects
- **Naturalism**: Realistic representation

### High Renaissance (1500-1520)
- **Rome**: New artistic center
- **Perfection**: Ideal forms and compositions
- **Master artists**: Leonardo, Michelangelo, Raphael
- **Papal patronage**: Church support for art

### Late Renaissance (1520-1600)
- **Mannerism**: Exaggerated and elongated forms
- **Emotional intensity**: Dramatic expressions
- **Complex compositions**: Multiple figures and scenes
- **Regional styles**: Different approaches across Europe

## Famous Works

### The Last Supper (1495-1498)
- **Artist**: Leonardo da Vinci
- **Location**: Milan, Italy
- **Subject**: Jesus and disciples at final meal
- **Technique**: Experimental fresco method

### Sistine Chapel Ceiling (1508-1512)
- **Artist**: Michelangelo
- **Location**: Vatican City
- **Subject**: Biblical creation story
- **Technique**: Fresco painting on ceiling

### Mona Lisa (1503-1519)
- **Artist**: Leonardo da Vinci
- **Location**: Louvre Museum, Paris
- **Subject**: Portrait of Lisa Gherardini
- **Technique**: Oil on wood panel

## Impact and Legacy
- **Artistic revolution**: Changed how art was made and viewed
- **Techniques**: Methods still used today
- **Influence**: Inspired artists for centuries
- **Humanism**: Focus on human experience and achievement
          `,
          readingTime: "22-25 minutes",
          keyPoints: [
            "Renaissance characteristics and humanism",
            "Major artists and their masterpieces",
            "Artistic techniques and innovations",
            "Impact on art history and culture"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Renaissance Characteristics',
            type: 'multiple-choice',
            question: 'What was the main focus of Renaissance art?',
            options: [
              'Religious themes only',
              'Human experience and achievement',
              'Abstract forms',
              'Political messages'
            ],
            correctAnswer: 1,
            explanation: 'Renaissance art focused on humanism, celebrating human achievements and experiences'
          },
          {
            id: 'step-2',
            title: 'Famous Artists',
            type: 'multiple-choice',
            question: 'Who painted the Sistine Chapel ceiling?',
            options: ['Leonardo da Vinci', 'Michelangelo', 'Raphael', 'Donatello'],
            correctAnswer: 1,
            explanation: 'Michelangelo painted the Sistine Chapel ceiling between 1508-1512'
          },
          {
            id: 'step-3',
            title: 'Art Techniques',
            type: 'text-input',
            question: 'What technique uses light and shadow to create volume?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['chiaroscuro'],
            explanation: 'Chiaroscuro is the technique of using light and shadow to create the illusion of volume and depth'
          },
          {
            id: 'step-4',
            title: 'Famous Works',
            type: 'multiple-choice',
            question: 'Where is the Mona Lisa currently displayed?',
            options: ['Uffizi Gallery', 'Louvre Museum', 'Metropolitan Museum', 'National Gallery'],
            correctAnswer: 1,
            explanation: 'The Mona Lisa is displayed in the Louvre Museum in Paris, France'
          },
          {
            id: 'step-5',
            title: 'Renaissance Impact',
            type: 'multiple-choice',
            question: 'What mathematical technique did Renaissance artists use to create depth?',
            options: ['Algebra', 'Geometry', 'Perspective', 'Calculus'],
            correctAnswer: 2,
            explanation: 'Renaissance artists developed linear perspective, a mathematical system for creating the illusion of depth on a flat surface'
          }
        ]
      }
    }
  },

  // ==================== Èü≥‰πêÂ≠¶‰π†Ë∑ØÂæÑ ====================
  music: {
    music_theory: {
      'quest-1': {
        id: 'quest-1',
        title: 'Music Fundamentals',
        description: 'Learn the basic elements of music theory',
        type: 'quest',
        difficulty: 'beginner',
        xpReward: 90,
        goldReward: 45,
        icon: 'üéµ',
        timeEstimate: '35 min',
        skills: ['music', 'music-theory', 'fundamentals'],
        requirements: [],
        deliverables: [
          {
            type: 'music-exercises',
            description: 'Complete 10 music theory exercises',
            format: 'audio'
          }
        ],
        resources: ['Piano/keyboard', 'Music theory book', 'Online tutorials'],
        learningMaterial: {
          title: "Music Fundamentals",
          content: `
# Music Fundamentals

## The Musical Alphabet
Music uses the first seven letters of the alphabet: A, B, C, D, E, F, G

### Note Names
- **Natural notes**: A, B, C, D, E, F, G
- **Sharps (#)**: Raise a note by half step
- **Flats (b)**: Lower a note by half step
- **Example**: C# (C sharp) = Db (D flat)

## The Staff and Clefs

### Treble Clef (G Clef)
- **Used for**: Higher-pitched instruments and voices
- **Lines**: E, G, B, D, F (Every Good Boy Does Fine)
- **Spaces**: F, A, C, E (FACE)

### Bass Clef (F Clef)
- **Used for**: Lower-pitched instruments and voices
- **Lines**: G, B, D, F, A (Good Boys Do Fine Always)
- **Spaces**: A, C, E, G (All Cows Eat Grass)

## Time Signatures

### Common Time Signatures
- **4/4**: Four beats per measure, quarter note gets one beat
- **3/4**: Three beats per measure (waltz time)
- **2/4**: Two beats per measure (march time)
- **6/8**: Six beats per measure, eighth note gets one beat

### Note Values
- **Whole note**: 4 beats
- **Half note**: 2 beats
- **Quarter note**: 1 beat
- **Eighth note**: 1/2 beat
- **Sixteenth note**: 1/4 beat

## Scales

### Major Scale
**Pattern**: W-W-H-W-W-W-H (Whole-Whole-Half-Whole-Whole-Whole-Half)
**Example - C Major**: C-D-E-F-G-A-B-C

### Minor Scale
**Natural Minor Pattern**: W-H-W-W-H-W-W
**Example - A Minor**: A-B-C-D-E-F-G-A

## Intervals

### Perfect Intervals
- **Unison**: Same note
- **Fourth**: 4 notes apart (C to F)
- **Fifth**: 5 notes apart (C to G)
- **Octave**: 8 notes apart (C to C)

### Major/Minor Intervals
- **Second**: 2 notes apart (C to D)
- **Third**: 3 notes apart (C to E)
- **Sixth**: 6 notes apart (C to A)
- **Seventh**: 7 notes apart (C to B)

## Chords

### Triads (3-note chords)
- **Major**: Root, major third, perfect fifth
- **Minor**: Root, minor third, perfect fifth
- **Diminished**: Root, minor third, diminished fifth
- **Augmented**: Root, major third, augmented fifth

### Common Chords
- **C Major**: C-E-G
- **A Minor**: A-C-E
- **F Major**: F-A-C
- **G Major**: G-B-D

## Key Signatures

### Major Keys
- **C Major**: No sharps or flats
- **G Major**: 1 sharp (F#)
- **D Major**: 2 sharps (F#, C#)
- **F Major**: 1 flat (Bb)

### Minor Keys
- **A Minor**: No sharps or flats (relative to C Major)
- **E Minor**: 1 sharp (F#)
- **B Minor**: 2 sharps (F#, C#)
- **D Minor**: 1 flat (Bb)
          `,
          readingTime: "15-18 minutes",
          keyPoints: [
            "Musical alphabet and note names",
            "Staff, clefs, and note reading",
            "Time signatures and note values",
            "Scales, intervals, and chords"
          ]
        },
        steps: [
          {
            id: 'step-1',
            title: 'Musical Alphabet',
            type: 'multiple-choice',
            question: 'How many letters are in the musical alphabet?',
            options: ['5', '7', '8', '12'],
            correctAnswer: 1,
            explanation: 'The musical alphabet uses 7 letters: A, B, C, D, E, F, G'
          },
          {
            id: 'step-2',
            title: 'Note Names',
            type: 'text-input',
            question: 'What does a sharp (#) do to a note?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['raises it', 'raises it by half step', 'makes it higher'],
            explanation: 'A sharp raises a note by a half step, making it higher in pitch'
          },
          {
            id: 'step-3',
            title: 'Time Signatures',
            type: 'multiple-choice',
            question: 'What does 4/4 time signature mean?',
            options: [
              '4 measures, 4 beats',
              '4 beats per measure, quarter note gets 1 beat',
              '4 notes per measure',
              '4 sharps'
            ],
            correctAnswer: 1,
            explanation: '4/4 means 4 beats per measure, and a quarter note gets 1 beat'
          },
          {
            id: 'step-4',
            title: 'Scales',
            type: 'text-input',
            question: 'What are the notes in a C major scale?',
            placeholder: 'Enter your answer...',
            correctAnswers: ['C-D-E-F-G-A-B-C', 'C D E F G A B C'],
            explanation: 'The C major scale is C-D-E-F-G-A-B-C, with no sharps or flats'
          },
          {
            id: 'step-5',
            title: 'Chords',
            type: 'multiple-choice',
            question: 'What notes make up a C major chord?',
            options: ['C-E-G', 'C-F-A', 'C-D-E', 'C-G-B'],
            correctAnswer: 0,
            explanation: 'A C major chord consists of C (root), E (major third), and G (perfect fifth)'
          }
        ]
      }
    }
  }
};

// Ëé∑ÂèñquestÊï∞ÊçÆÔºà‰ºòÂÖà‰ΩøÁî®Êú¨Âú∞Êï∞ÊçÆ‰ª•Á°Æ‰øùÂ≠¶‰π†ÊùêÊñôÊòæÁ§∫Ôºâ
export const getQuestData = async (subject, category, questId) => {
  try {
    // ‰ºòÂÖà‰ΩøÁî®Êú¨Âú∞fallbackÊï∞ÊçÆÔºàÂåÖÂê´Â≠¶‰π†ÊùêÊñôÔºâ
    if (FALLBACK_QUESTS[subject] && FALLBACK_QUESTS[subject][category] && FALLBACK_QUESTS[subject][category][questId]) {
      console.log('‰ΩøÁî®Êú¨Âú∞Êï∞ÊçÆÔºàÂåÖÂê´Â≠¶‰π†ÊùêÊñôÔºâ:', FALLBACK_QUESTS[subject][category][questId]);
      return FALLBACK_QUESTS[subject][category][questId];
    }
    
    // Â¶ÇÊûúÊú¨Âú∞Ê≤°ÊúâÔºåÂÜçÂ∞ùËØï‰ªé‰∫ëÁ´ØËé∑Âèñ
    const cloudData = await getCloudQuest(subject, category, questId);
    if (cloudData) {
      console.log('‰ΩøÁî®‰∫ëÁ´ØÊï∞ÊçÆ:', cloudData);
      return cloudData;
    }
    
    return null;
  } catch (error) {
    console.error('Error getting quest data:', error);
    return null;
  }
};

// Ëé∑ÂèñÊâÄÊúâquestÊï∞ÊçÆ
export const getAllQuestData = async () => {
  try {
    const cloudData = await getCloudQuestData();
    if (Object.keys(cloudData).length > 0) {
      return cloudData;
    }
    
    // Â¶ÇÊûú‰∫ëÁ´ØÊ≤°ÊúâÊï∞ÊçÆÔºåËøîÂõûÊú¨Âú∞fallback
    return FALLBACK_QUESTS;
  } catch (error) {
    console.error('Error getting all quest data:', error);
    return FALLBACK_QUESTS;
  }
};

// ÂÖ∂‰ªñÁé∞ÊúâÁöÑÂáΩÊï∞‰øùÊåÅ‰∏çÂèò
export const getUserQuestProgress = async (userId) => {
  try {
    console.log('Getting user quest progress for userId:', userId);
    
    // ‰ªéÊñ∞ÁöÑFirebaseÈõÜÂêàËé∑ÂèñÁî®Êà∑ËøõÂ∫¶
    const userProgressRef = doc(db, 'studyprogress', userId);
    const userProgressDoc = await getDoc(userProgressRef);
    
    if (userProgressDoc.exists()) {
      const data = userProgressDoc.data();
      console.log('User progress found in Firebase studyprogress:', data);
      return data;
    } else {
      console.log('No user progress found in Firebase studyprogress, creating new');
      // ÂàõÂª∫Êñ∞ÁöÑÁî®Êà∑ËøõÂ∫¶Êï∞ÊçÆ
      const newProgress = {
        totalXP: 0,
        gold: 0,
        completedQuests: [],
        currentLevel: 1,
        skills: {},
        achievements: [],
        questHistory: [],
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString()
      };
      
      // ‰øùÂ≠òÊñ∞ÁöÑËøõÂ∫¶Êï∞ÊçÆ
      await setDoc(userProgressRef, newProgress);
      console.log('New user progress created in studyprogress collection');
      return newProgress;
    }
  } catch (error) {
    console.error('Error getting user quest progress:', error);
    // ËøîÂõûÈªòËÆ§ÁöÑÁî®Êà∑ËøõÂ∫¶Êï∞ÊçÆ
    return {
      totalXP: 0,
      gold: 0,
      completedQuests: [],
      currentLevel: 1,
      skills: {},
      achievements: []
    };
  }
};

export const updateQuestProgress = async (userId, questId, subject, category, questType, xpEarned, goldEarned, deliverables) => {
  try {
    console.log('Starting quest progress update...');
    
    // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑ËøõÂ∫¶
    const currentProgress = await getUserQuestProgress(userId);
    console.log('Current progress:', currentProgress);
    
    // ÁîüÊàêÂîØ‰∏ÄÁöÑquestÊ†áËØÜÁ¨¶
    const uniqueQuestId = `${subject}_${category}_${questId}`;
    
    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂÆåÊàêËøáËøô‰∏™questÔºàÊ£ÄÊü•ÂéüÂßãIDÂíåÂîØ‰∏ÄIDÔºâ
    const isAlreadyCompleted = currentProgress.completedQuests && 
                              (currentProgress.completedQuests.includes(questId) || 
                               currentProgress.completedQuests.includes(uniqueQuestId));
    if (isAlreadyCompleted) {
      console.log('Quest already completed, skipping update');
      return currentProgress;
    }
    
    // Êõ¥Êñ∞ËøõÂ∫¶
    const updatedProgress = {
      ...currentProgress,
      totalXP: (currentProgress.totalXP || 0) + xpEarned,
      gold: (currentProgress.gold || 0) + goldEarned,
      completedQuests: [...(currentProgress.completedQuests || []), uniqueQuestId],
      questHistory: [
        ...(currentProgress.questHistory || []),
        {
          questId,
          subject,
          category,
          questType,
          xpEarned,
          goldEarned,
          completedAt: new Date().toISOString(),
          deliverables
        }
      ]
    };
    
    console.log('Updated progress to save:', updatedProgress);
    
    // ‰øùÂ≠òÂà∞Êñ∞ÁöÑ‰∫ëÁ´ØÈõÜÂêà
    console.log('Attempting to save to Firebase studyprogress...');
    const userProgressRef = doc(db, 'studyprogress', userId);
    console.log('Firebase document reference:', userProgressRef);
    console.log('Data to save:', updatedProgress);
    
    try {
      await setDoc(userProgressRef, updatedProgress, { merge: true });
      console.log('Quest progress successfully saved to Firebase');
      
      // È™åËØÅ‰øùÂ≠òÊòØÂê¶ÊàêÂäü
      const savedDoc = await getDoc(userProgressRef);
      console.log('Verification - saved document:', savedDoc.exists() ? savedDoc.data() : 'Document not found');
      
      // Êõ¥Êñ∞Áî®Êà∑Á≠âÁ∫ß
      const levelUpdateResult = await updateUserLevel(userId, updatedProgress.totalXP);
      
      return levelUpdateResult;
    } catch (firebaseError) {
      console.error('Firebase save error:', firebaseError);
      throw firebaseError;
    }
  } catch (error) {
    console.error('Error updating quest progress:', error);
    // Âç≥‰Ωø‰øùÂ≠òÂ§±Ë¥•Ôºå‰πüËøîÂõûÊú¨Âú∞Êõ¥Êñ∞
    return {
      totalXP: (await getUserQuestProgress(userId)).totalXP + xpEarned,
      gold: (await getUserQuestProgress(userId)).gold + goldEarned,
      completedQuests: [...(await getUserQuestProgress(userId)).completedQuests, questId]
    };
  }
};

export const isQuestUnlocked = (questId, subject, category, userProgress) => {
  // ‰øùÊåÅÁé∞ÊúâÂÆûÁé∞
  return true;
};

export const isQuestCompleted = (questId, subject, category, userProgress) => {
  console.log(`üîç Checking quest completion for:`, {
    questId,
    subject,
    category,
    userProgress: userProgress ? 'exists' : 'null',
    completedQuests: userProgress?.completedQuests || 'none'
  });
  
  if (!userProgress || !userProgress.completedQuests) {
    console.log(`‚ùå Quest ${questId} not completed: no userProgress or completedQuests`);
    return false;
  }
  
  // ÁîüÊàêÂîØ‰∏ÄÁöÑquestÊ†áËØÜÁ¨¶Ôºösubject_category_questId
  const uniqueQuestId = `${subject}_${category}_${questId}`;
  
  // Ê£ÄÊü•Â§öÁßçÂèØËÉΩÁöÑIDÊ†ºÂºèÔºàÂêëÂêéÂÖºÂÆπÔºâ
  const possibleIds = [
    questId, // ÂéüÂßãID (quest-1)
    uniqueQuestId, // ÂîØ‰∏ÄÊ†áËØÜÁ¨¶ (italian_grammar_quest-1)
    `${questId}_${subject}_${category}`, // Âè¶‰∏ÄÁßçÂèØËÉΩÁöÑÊ†ºÂºè
    `${subject}_${category}_${questId}` // Ê†áÂáÜÊ†ºÂºè
  ];
  
  const isCompleted = possibleIds.some(id => userProgress.completedQuests.includes(id));
  
  console.log(`‚úÖ Quest ${questId} completion check:`, {
    completedQuests: userProgress.completedQuests,
    questId,
    uniqueQuestId,
    possibleIds,
    isCompleted,
    matches: possibleIds.map(id => ({
      id,
      match: userProgress.completedQuests.includes(id)
    }))
  });
  
  return isCompleted;
};

// ‰∏¥Êó∂Ë∞ÉËØïÂáΩÊï∞ÔºöÈáçÁΩÆÁî®Êà∑ËøõÂ∫¶
export const resetUserQuestProgress = async (userId) => {
  try {
    console.log('Resetting user quest progress for userId:', userId);
    
    const defaultProgress = {
      totalXP: 0,
      gold: 0,
      completedQuests: [],
      currentLevel: 1,
      skills: {},
      achievements: [],
      questHistory: [],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    };
    
    const userProgressRef = doc(db, 'studyprogress', userId);
    await setDoc(userProgressRef, defaultProgress);
    
    console.log('User quest progress reset successfully');
    return defaultProgress;
  } catch (error) {
    console.error('Error resetting user quest progress:', error);
    throw error;
  }
};

// Âà†Èô§ÊóßÁöÑquestËÆ∞ÂΩï
export const deleteOldQuestRecords = async (userId) => {
  try {
    console.log('Deleting old quest records for userId:', userId);
    
    // Âà†Èô§ÊóßÁöÑuserProgressÈõÜÂêà‰∏≠ÁöÑËÆ∞ÂΩï
    const oldUserProgressRef = doc(db, 'userProgress', userId);
    await deleteDoc(oldUserProgressRef);
    console.log('Old userProgress record deleted');
    
    // Âà†Èô§ÊóßÁöÑquestProgressÈõÜÂêà‰∏≠ÁöÑËÆ∞ÂΩïÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
    const oldQuestProgressRef = doc(db, 'questProgress', userId);
    try {
      await deleteDoc(oldQuestProgressRef);
      console.log('Old questProgress record deleted');
    } catch (error) {
      console.log('No old questProgress record to delete');
    }
    
    console.log('Old quest records deleted successfully');
    return true;
  } catch (error) {
    console.error('Error deleting old quest records:', error);
    throw error;
  }
};

export const getAvailableQuests = async (subject, category, userProgress) => {
  try {
    console.log('Getting available quests for:', { subject, category, userProgress });
    
    // Áõ¥Êé•‰ΩøÁî®Êú¨Âú∞fallbackÊï∞ÊçÆÔºåÁ°Æ‰øùÂåÖÂê´ÊâÄÊúâÊñ∞Â¢ûÁöÑquest
    if (FALLBACK_QUESTS[subject] && FALLBACK_QUESTS[subject][category]) {
      console.log('Using fallback data for quests');
      const quests = Object.values(FALLBACK_QUESTS[subject][category]).map(quest => {
        const isCompleted = isQuestCompleted(quest.id, subject, category, userProgress);
        console.log(`Fallback quest ${quest.id} completion status: ${isCompleted}`);
        return {
          ...quest,
          isUnlocked: isQuestUnlocked(quest.id, subject, category, userProgress),
          isCompleted: isCompleted
        };
      });
      
      console.log('Final fallback quests with completion status:', quests);
      return quests;
    }
    
    console.log('No quest data found for:', { subject, category });
    console.log('Available subjects:', Object.keys(FALLBACK_QUESTS));
    console.log('Available categories for', subject, ':', FALLBACK_QUESTS[subject] ? Object.keys(FALLBACK_QUESTS[subject]) : 'none');
    return [];
  } catch (error) {
    console.error('Error getting available quests:', error);
    return [];
  }
};

export const getAIMentorSuggestions = (userProgress) => {
  // ‰øùÊåÅÁé∞ÊúâÂÆûÁé∞
  return [];
};

export const getPortfolioItems = (userProgress) => {
  // ‰øùÊåÅÁé∞ÊúâÂÆûÁé∞
  return [];
};

// Â≠¶ÁßëÂÆö‰πâ
export const subjects = {
  italian: { 
    name: 'Italian', 
    icon: 'üáÆüáπ', 
    color: '#4CAF50',
    categories: ['grammar', 'vocabulary', 'conversation']
  },
  philosophy: { 
    name: 'Philosophy', 
    icon: 'ü§î', 
    color: '#9C27B0',
    categories: ['ethics', 'logic', 'metaphysics']
  },
  biology: { 
    name: 'Biology', 
    icon: 'üß¨', 
    color: '#4CAF50',
    categories: ['cell-biology', 'genetics', 'ecology']
  },
  mathematics: { 
    name: 'Mathematics', 
    icon: 'üìê', 
    color: '#2196F3',
    categories: ['algebra', 'geometry', 'calculus']
  },
  physics: { 
    name: 'Physics', 
    icon: '‚öõÔ∏è', 
    color: '#FF9800',
    categories: ['mechanics', 'thermodynamics', 'electromagnetism']
  },
  chemistry: { 
    name: 'Chemistry', 
    icon: 'üß™', 
    color: '#E91E63',
    categories: ['organic', 'inorganic', 'physical']
  },
  history: { 
    name: 'History', 
    icon: 'üìú', 
    color: '#795548',
    categories: ['ancient', 'medieval', 'modern']
  },
  literature: { 
    name: 'Literature', 
    icon: 'üìö', 
    color: '#607D8B',
    categories: ['poetry', 'prose', 'drama']
  },
  computerScience: { 
    name: 'Computer Science', 
    icon: 'üíª', 
    color: '#00BCD4',
    categories: ['programming', 'algorithms', 'data-structures']
  },
  psychology: { 
    name: 'Psychology', 
    icon: 'üß†', 
    color: '#FF5722',
    categories: ['cognitive', 'behavioral', 'social']
  },
  sociology: { 
    name: 'Sociology', 
    icon: 'üë•', 
    color: '#3F51B5',
    categories: ['social-structures', 'culture', 'deviance']
  },
  economics: { 
    name: 'Economics', 
    icon: 'üí∞', 
    color: '#8BC34A',
    categories: ['microeconomics', 'macroeconomics', 'finance']
  },
  geography: { 
    name: 'Geography', 
    icon: 'üåç', 
    color: '#4CAF50',
    categories: ['physical', 'human', 'environmental']
  },
  art: { 
    name: 'Art', 
    icon: 'üé®', 
    color: '#E91E63',
    categories: ['painting', 'sculpture', 'digital']
  },
  music: { 
    name: 'Music', 
    icon: 'üéµ', 
    color: '#9C27B0',
    categories: ['theory', 'composition', 'performance']
  }
};

// Ë∑®Â≠¶ÁßëÊäÄËÉΩ
export const crossSubjectSkills = {
  'critical-thinking': { name: 'Critical Thinking', icon: 'üß†', description: 'Analyze and evaluate information' },
  'problem-solving': { name: 'Problem Solving', icon: 'üîß', description: 'Find solutions to complex problems' },
  'communication': { name: 'Communication', icon: 'üí¨', description: 'Express ideas clearly and effectively' },
  'research': { name: 'Research', icon: 'üîç', description: 'Gather and analyze information' },
  'creativity': { name: 'Creativity', icon: '‚ú®', description: 'Generate original ideas and solutions' },
  'collaboration': { name: 'Collaboration', icon: 'ü§ù', description: 'Work effectively with others' },
  'time-management': { name: 'Time Management', icon: '‚è∞', description: 'Organize and prioritize tasks' },
  'adaptability': { name: 'Adaptability', icon: 'üîÑ', description: 'Adjust to new situations and challenges' }
};

// ‰øùÊåÅÂêëÂêéÂÖºÂÆπÁöÑquestTemplatesÂØºÂá∫
export const questTemplates = {};

// Âä®ÊÄÅÂä†ËΩΩquestTemplatesÊï∞ÊçÆ
export const loadQuestTemplates = async () => {
  try {
    console.log('Loading quest templates...');
    // Áõ¥Êé•‰ΩøÁî®Êú¨Âú∞fallbackÊï∞ÊçÆÔºåÁ°Æ‰øùÂåÖÂê´ÊâÄÊúâÊñ∞Â¢ûÁöÑquest
    console.log('Using fallback quest data with all new quests');
    return FALLBACK_QUESTS;
  } catch (error) {
    console.error('Error loading quest templates:', error);
    console.log('Using fallback quest data due to error');
    return FALLBACK_QUESTS;
  }
};

// ==================== Á≠âÁ∫ßÁ≥ªÁªü ====================

// Á≠âÁ∫ßÈÖçÁΩÆ
export const LEVEL_CONFIG = {
  // ÊØè‰∏™Á≠âÁ∫ßÊâÄÈúÄÁöÑÊÄªÁªèÈ™åÂÄº
  experienceRequired: (level) => {
    if (level <= 1) return 0;
    // ‰ΩøÁî®ÊåáÊï∞Â¢ûÈïøÂÖ¨Âºè: XP = 100 * (level - 1)^1.5
    return Math.floor(100 * Math.pow(level - 1, 1.5));
  },
  
  // Ê†πÊçÆÁªèÈ™åÂÄºËÆ°ÁÆóÁ≠âÁ∫ß
  calculateLevel: (totalXP) => {
    let level = 1;
    while (LEVEL_CONFIG.experienceRequired(level + 1) <= totalXP) {
      level++;
    }
    return level;
  },
  
  // ËÆ°ÁÆóÂΩìÂâçÁ≠âÁ∫ßËøõÂ∫¶
  calculateLevelProgress: (totalXP) => {
    const currentLevel = LEVEL_CONFIG.calculateLevel(totalXP);
    const currentLevelXP = LEVEL_CONFIG.experienceRequired(currentLevel);
    const nextLevelXP = LEVEL_CONFIG.experienceRequired(currentLevel + 1);
    const progressXP = totalXP - currentLevelXP;
    const requiredXP = nextLevelXP - currentLevelXP;
    
    return {
      currentLevel,
      nextLevel: currentLevel + 1,
      progressXP,
      requiredXP,
      progressPercentage: Math.round((progressXP / requiredXP) * 100)
    };
  },
  
  // Á≠âÁ∫ßÂ•ñÂä±
  getLevelRewards: (level) => {
    const rewards = {
      gold: level * 50, // ÊØèÁ∫ß50ÈáëÂ∏Å
      skillPoints: Math.floor(level / 2), // ÊØè2Á∫ß1‰∏™ÊäÄËÉΩÁÇπ
      achievements: []
    };
    
    // ÁâπÊÆäÁ≠âÁ∫ßÂ•ñÂä±
    if (level >= 5) rewards.achievements.push('Rising Star');
    if (level >= 10) rewards.achievements.push('Experienced Learner');
    if (level >= 20) rewards.achievements.push('Knowledge Seeker');
    if (level >= 30) rewards.achievements.push('Master Scholar');
    if (level >= 50) rewards.achievements.push('Legendary Academic');
    
    return rewards;
  }
};

// Êõ¥Êñ∞Áî®Êà∑Á≠âÁ∫ß
export const updateUserLevel = async (userId, newTotalXP) => {
  try {
    console.log('Updating user level for userId:', userId, 'newTotalXP:', newTotalXP);
    
    const levelProgress = LEVEL_CONFIG.calculateLevelProgress(newTotalXP);
    const levelRewards = LEVEL_CONFIG.getLevelRewards(levelProgress.currentLevel);
    
    // Ëé∑ÂèñÂΩìÂâçÁî®Êà∑ËøõÂ∫¶
    const currentProgress = await getUserQuestProgress(userId);
    
    // Ê£ÄÊü•ÊòØÂê¶ÂçáÁ∫ß‰∫Ü
    const oldLevel = currentProgress.currentLevel || 1;
    const newLevel = levelProgress.currentLevel;
    const leveledUp = newLevel > oldLevel;
    
    // Êõ¥Êñ∞Áî®Êà∑ËøõÂ∫¶
    const updatedProgress = {
      ...currentProgress,
      totalXP: newTotalXP,
      currentLevel: newLevel,
      levelProgress: levelProgress,
      updatedAt: new Date().toISOString()
    };
    
    // Â¶ÇÊûúÂçáÁ∫ß‰∫ÜÔºåÊ∑ªÂä†Â•ñÂä±
    if (leveledUp) {
      updatedProgress.gold = (updatedProgress.gold || 0) + levelRewards.gold;
      updatedProgress.skillPoints = (updatedProgress.skillPoints || 0) + levelRewards.skillPoints;
      updatedProgress.achievements = [
        ...(updatedProgress.achievements || []),
        ...levelRewards.achievements
      ];
      
      console.log(`üéâ User leveled up! Level ${oldLevel} ‚Üí ${newLevel}`);
      console.log('Level rewards:', levelRewards);
    }
    
    // ‰øùÂ≠òÂà∞Firebase
    const userProgressRef = doc(db, 'studyprogress', userId);
    await setDoc(userProgressRef, updatedProgress, { merge: true });
    
    console.log('User level updated successfully');
    return {
      ...updatedProgress,
      leveledUp,
      levelRewards: leveledUp ? levelRewards : null
    };
  } catch (error) {
    console.error('Error updating user level:', error);
    throw error;
  }
};
